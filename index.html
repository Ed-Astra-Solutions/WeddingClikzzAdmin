<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeddingClikz Admin Console</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #C9A962;
            --gold-light: #E8D5A8;
            --gold-dark: #8B7340;
            --gold-gradient: linear-gradient(135deg, #C9A962 0%, #E8D5A8 50%, #C9A962 100%);
            --charcoal: #141414;
            --white: #FAFAFA;
            --bg-dark: #0A0A0A;
            --bg-card: #141414;
            --bg-card-hover: #1C1C1C;
            --text-muted: #5A5A5A;
            --text-light: #9A9A9A;
            --text-bright: #E0E0E0;
            --success: #4A9F5B;
            --warning: #E89B3C;
            --danger: #D15252;
            --info: #5A8FD4;
            --border-subtle: rgba(201, 169, 98, 0.12);
            --border-gold: rgba(201, 169, 98, 0.25);
            --shadow-gold: 0 0 30px rgba(201, 169, 98, 0.08);
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-elevated: 0 16px 48px rgba(0, 0, 0, 0.6);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: var(--bg-dark);
            color: var(--white);
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Login Page */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(201, 169, 98, 0.06) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 80%, rgba(201, 169, 98, 0.04) 0%, transparent 40%),
                linear-gradient(180deg, #0A0A0A 0%, #0F0F0F 100%);
        }

        .login-box {
            background: linear-gradient(180deg, #161616 0%, #101010 100%);
            padding: 52px 44px;
            border-radius: 24px;
            border: 1px solid var(--border-gold);
            width: 100%;
            max-width: 420px;
            box-shadow: 
                var(--shadow-elevated),
                0 0 60px rgba(201, 169, 98, 0.06),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
            position: relative;
            overflow: hidden;
        }

        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gold-gradient);
            opacity: 0.7;
        }

        .login-box::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
            pointer-events: none;
        }

        .login-box h1 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            text-align: center;
            margin-bottom: 6px;
            font-size: 34px;
            font-weight: 500;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .login-box p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 40px;
            font-size: 13px;
            letter-spacing: 3px;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 26px;
            position: relative;
            z-index: 1;
        }

        .form-group label {
            display: block;
            color: var(--text-light);
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 12px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 15px 18px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--white);
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition-smooth);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1), 0 0 20px rgba(201, 169, 98, 0.05);
            background: rgba(0, 0, 0, 0.6);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        /* Password Toggle */
        .password-input-wrapper {
            position: relative;
            width: 100%;
        }

        .password-input-wrapper input {
            padding-right: 50px;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: var(--transition-smooth);
        }

        .password-toggle:hover {
            color: var(--gold);
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
        }

        .password-toggle .eye-off {
            display: none;
        }

        .password-toggle.showing .eye-on {
            display: none;
        }

        .password-toggle.showing .eye-off {
            display: block;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            text-decoration: none;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: #0A0A0A;
            width: 100%;
            box-shadow: 0 4px 20px rgba(201, 169, 98, 0.25);
            position: relative;
            z-index: 1;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(201, 169, 98, 0.35);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-gold);
            color: var(--gold);
        }

        .btn-secondary:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold);
            color: var(--gold-light);
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .btn-icon:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold-dark);
            color: var(--gold);
        }

        .btn-icon svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
        }

        .btn-icon.loading svg {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #A83232 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(209, 82, 82, 0.25);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #E06060 0%, var(--danger) 100%);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 10px 20px;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .error-message {
            background: rgba(209, 82, 82, 0.08);
            border: 1px solid rgba(209, 82, 82, 0.3);
            color: #E57373;
            padding: 14px 16px;
            border-radius: 10px;
            margin-bottom: 24px;
            text-align: center;
            display: none;
            font-size: 14px;
        }

        /* Admin Layout */
        .admin-layout {
            display: none;
        }

        /* App Bar */
        .app-bar {
            position: fixed;
            top: 0;
            left: 260px;
            right: 0;
            height: 70px;
            background: linear-gradient(180deg, #111111 0%, #0A0A0A 100%);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 36px;
            z-index: 100;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .app-bar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--gold);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: var(--transition-smooth);
        }

        .menu-toggle:hover {
            background: rgba(201, 169, 98, 0.1);
        }

        .menu-toggle svg {
            width: 24px;
            height: 24px;
        }

        .app-bar-title {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .app-bar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .app-bar-user {
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .app-bar-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            font-weight: 600;
            color: #0A0A0A;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .app-bar-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.2);
        }

        .app-bar-user-info {
            display: none;
        }

        .app-bar-user-name {
            color: var(--text-bright);
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .app-bar-user-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .app-bar-logout {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: transparent;
            border: 1px solid var(--border-gold);
            border-radius: 8px;
            color: var(--gold);
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .app-bar-logout:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold);
        }

        .app-bar-logout svg {
            width: 16px;
            height: 16px;
        }

        /* User Dropdown Menu */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-gold);
            border-radius: 12px;
            padding: 16px;
            min-width: 240px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 10000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 12px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .user-dropdown::after {
            content: '';
            position: absolute;
            top: -7px;
            right: 13px;
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-bottom: 7px solid var(--bg-secondary);
        }

        .user-dropdown-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 12px;
        }

        .user-dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            color: #0A0A0A;
        }

        .user-dropdown-info {
            flex: 1;
        }

        .user-dropdown-name {
            color: var(--text-bright);
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-dropdown-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .user-dropdown-email {
            color: var(--gold);
            font-size: 12px;
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(201, 169, 98, 0.08);
            border-radius: 6px;
            word-break: break-all;
        }

        /* User Dropdown Menu */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-gold);
            border-radius: 12px;
            padding: 16px;
            min-width: 240px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 10000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 12px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .user-dropdown::after {
            content: '';
            position: absolute;
            top: -7px;
            right: 13px;
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-bottom: 7px solid var(--bg-secondary);
        }

        .user-dropdown-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 12px;
        }

        .user-dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            color: #0A0A0A;
        }

        .user-dropdown-info {
            flex: 1;
        }

        .user-dropdown-name {
            color: var(--text-bright);
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-dropdown-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .user-dropdown-email {
            color: var(--gold);
            font-size: 12px;
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(201, 169, 98, 0.08);
            border-radius: 6px;
            word-break: break-all;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: linear-gradient(180deg, #111111 0%, #0A0A0A 100%);
            border-right: 1px solid var(--border-subtle);
            padding: 0;
            overflow-y: auto;
            box-shadow: 4px 0 40px rgba(0, 0, 0, 0.4);
        }

        .sidebar::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        .sidebar-logo {
            padding: 32px 28px;
            border-bottom: 1px solid var(--border-subtle);
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.04) 0%, transparent 100%);
        }

        .sidebar-logo h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 2px;
            margin-bottom: 6px;
        }

        .sidebar-logo span {
            color: var(--text-muted);
            font-size: 11px;
            letter-spacing: 2.5px;
            text-transform: uppercase;
        }

        .nav-menu {
            list-style: none;
            padding: 20px 14px;
        }

        .nav-item {
            padding: 14px 20px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: block;
            color: var(--text-light);
            border-radius: 8px;
            margin-bottom: 6px;
            position: relative;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .nav-item:hover {
            background: rgba(201, 169, 98, 0.06);
            color: var(--gold-light);
            padding-left: 24px;
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(201, 169, 98, 0.12) 0%, transparent 100%);
            color: var(--gold);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: var(--gold);
            border-radius: 0 3px 3px 0;
        }

        .main-content {
            margin-left: 260px;
            margin-top: 70px;
            padding: 36px 44px;
            min-height: calc(100vh - 70px);
            background: 
                radial-gradient(ellipse at 80% 10%, rgba(201, 169, 98, 0.03) 0%, transparent 40%),
                linear-gradient(180deg, #0A0A0A 0%, #0E0E0E 100%);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            color: var(--text-bright);
            font-size: 24px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .user-info {
            display: none;
        }

        /* Dashboard Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(145deg, #151515 0%, #0F0F0F 100%);
            padding: 26px 28px;
            border-radius: 14px;
            border: 1px solid var(--border-subtle);
            box-shadow: var(--shadow-card);
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gold-gradient);
            opacity: 0.5;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-elevated), 0 0 40px rgba(201, 169, 98, 0.06);
            border-color: var(--border-gold);
        }

        .stat-card h3 {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 14px;
            font-weight: 500;
        }

        .stat-card .value {
            font-family: 'Playfair Display', serif;
            font-size: 38px;
            color: var(--gold);
            font-weight: 500;
            line-height: 1;
        }

        .stat-card .change {
            font-size: 12px;
            margin-top: 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 5px 12px;
            border-radius: 6px;
            font-weight: 500;
        }

        .stat-card .change.positive {
            color: #6ABF7B;
            background: rgba(74, 159, 91, 0.12);
        }

        .stat-card .change.negative {
            color: #E57373;
            background: rgba(209, 82, 82, 0.12);
        }

        /* Tables */
        .table-container {
            background: linear-gradient(180deg, #141414 0%, #0E0E0E 100%);
            border-radius: 14px;
            border: 1px solid var(--border-subtle);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        /* Offerings Subtabs */
        .offerings-tabs {
            display: flex;
            gap: 8px;
            padding: 20px 26px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.04) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-subtle);
        }

        .offerings-tab {
            padding: 12px 24px;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .offerings-tab:hover {
            background: rgba(201, 169, 98, 0.08);
            border-color: var(--gold-dark);
            color: var(--gold-light);
        }

        .offerings-tab.active {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-color: var(--gold);
            color: #0A0A0A;
            font-weight: 600;
        }

        .offerings-tab svg {
            width: 16px;
            height: 16px;
        }

        .offerings-tab.active svg {
            stroke: #0A0A0A;
        }

        .offerings-content {
            display: none;
        }

        .offerings-content.active {
            display: block;
        }

        /* Offerings Header with Info */
        .offerings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 26px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.06) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-subtle);
        }

        .offerings-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .offerings-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 0.5px;
            margin: 0;
        }

        .info-icon-wrapper {
            position: relative;
            display: inline-flex;
        }

        .info-icon {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: rgba(201, 169, 98, 0.15);
            border: 1px solid var(--gold-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            color: var(--gold);
        }

        .info-icon:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .info-icon svg {
            width: 14px;
            height: 14px;
        }

        .info-tooltip {
            position: absolute;
            top: calc(100% + 12px);
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            width: 420px;
            max-height: 80vh;
            overflow-y: auto;
            background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
            border: 1px solid var(--border-gold);
            border-radius: 14px;
            padding: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .info-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .info-tooltip::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid #1a1a1a;
        }

        .info-icon-wrapper:hover .info-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .info-tooltip-title {
            font-family: 'Playfair Display', serif;
            font-size: 16px;
            color: var(--gold);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-tooltip-title svg {
            width: 18px;
            height: 18px;
        }

        .info-tooltip-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-tooltip-list li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(201, 169, 98, 0.1);
            font-size: 13px;
            color: var(--text-light);
            line-height: 1.5;
        }

        .info-tooltip-list li:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .info-tooltip-list li strong {
            color: var(--gold-light);
            font-weight: 600;
        }

        .info-tooltip-bullet {
            width: 20px;
            height: 20px;
            min-width: 20px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: #0A0A0A;
            margin-top: 1px;
        }

        .info-tooltip-section {
            margin-bottom: 14px;
        }

        .info-tooltip-section:last-child {
            margin-bottom: 0;
        }

        .info-tooltip-section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--gold-light);
            margin-bottom: 6px;
        }

        .info-tooltip-section p {
            margin: 0 0 0 30px;
            font-size: 12px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .info-tooltip-section em {
            color: var(--gold);
            font-style: normal;
            font-weight: 500;
        }

        .info-tooltip-sublist {
            list-style: none;
            padding: 0;
            margin: 8px 0 0 30px;
        }

        .info-tooltip-sublist li {
            font-size: 11px;
            color: var(--text-muted);
            padding: 3px 0;
            padding-left: 12px;
            position: relative;
        }

        .info-tooltip-sublist li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: var(--gold);
        }

        .info-tooltip-sublist li strong {
            color: var(--gold-light);
            font-weight: 600;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px 26px;
            border-bottom: 1px solid var(--border-subtle);
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
        }

        .table-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 20px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .search-box {
            display: flex;
            gap: 12px;
        }

        .search-box input {
            padding: 10px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--white);
            width: 240px;
            transition: var(--transition-smooth);
            font-size: 14px;
        }

        .search-box input:focus {
            border-color: var(--gold-dark);
            outline: none;
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.08);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 14px 22px;
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        th {
            background: rgba(201, 169, 98, 0.04);
            color: var(--text-light);
            font-weight: 600;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        td {
            color: var(--text-bright);
            font-size: 14px;
        }

        tr {
            transition: var(--transition-smooth);
        }

        tbody tr:hover {
            background: rgba(201, 169, 98, 0.04);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .status-sent { background: rgba(90, 143, 212, 0.12); color: #7EB3F0; }
        .status-viewed { background: rgba(232, 155, 60, 0.12); color: #F0B860; }
        .status-accepted { background: rgba(74, 159, 91, 0.12); color: #6ABF7B; }
        .status-rejected { background: rgba(209, 82, 82, 0.12); color: #E57373; }
        .status-expired { background: rgba(128, 128, 128, 0.12); color: #A0A0A0; }
        .status-draft { background: rgba(128, 128, 128, 0.12); color: #A0A0A0; }
        .status-active { background: rgba(74, 159, 91, 0.12); color: #6ABF7B; }
        .status-inactive { background: rgba(209, 82, 82, 0.12); color: #E57373; }

        .actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-smooth);
            font-size: 14px;
        }

        .action-btn.edit {
            background: rgba(90, 143, 212, 0.12);
            color: #7EB3F0;
        }

        .action-btn.delete {
            background: rgba(209, 82, 82, 0.12);
            color: #E57373;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .action-btn.edit:hover {
            background: rgba(90, 143, 212, 0.2);
            box-shadow: 0 4px 12px rgba(90, 143, 212, 0.15);
        }

        .action-btn.delete:hover {
            background: rgba(209, 82, 82, 0.2);
            box-shadow: 0 4px 12px rgba(209, 82, 82, 0.15);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.88);
            backdrop-filter: blur(6px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.25s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: linear-gradient(180deg, #161616 0%, #0E0E0E 100%);
            border-radius: 16px;
            border: 1px solid var(--border-gold);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-elevated), 0 0 60px rgba(201, 169, 98, 0.06);
            animation: modalSlide 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal::-webkit-scrollbar {
            width: 4px;
        }

        .modal::-webkit-scrollbar-track {
            background: transparent;
        }

        .modal::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        @keyframes modalSlide {
            from { 
                opacity: 0;
                transform: translateY(-24px) scale(0.96);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 22px 26px;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
        }

        .modal-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 20px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-muted);
            font-size: 18px;
            cursor: pointer;
            width: 34px;
            height: 34px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-smooth);
        }

        .modal-close:hover {
            background: rgba(209, 82, 82, 0.15);
            color: #E57373;
        }

        /* Quote Details Invoice Styling */
        .quote-invoice {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
        }

        .quote-invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--gold);
        }

        .quote-invoice-logo h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--charcoal);
            margin-bottom: 0.25rem;
        }

        .quote-invoice-logo h2 span {
            color: var(--gold);
        }

        .quote-invoice-logo p {
            font-size: 0.85rem;
            color: var(--text-light);
            margin: 0;
        }

        .quote-invoice-badge {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--white);
            padding: 0.5rem 1.25rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quote-invoice-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .quote-invoice-meta-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quote-invoice-meta-item label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            font-weight: 600;
        }

        .quote-invoice-meta-item span {
            font-size: 1rem;
            color: var(--charcoal);
            font-weight: 500;
        }

        .quote-invoice-parties {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--cream);
            border-radius: 8px;
        }

        .quote-invoice-party h4 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .quote-invoice-party p {
            margin: 0.25rem 0;
            color: var(--charcoal);
            font-size: 0.95rem;
        }

        .quote-invoice-party strong {
            color: var(--gold-dark);
        }

        .quote-invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }

        .quote-invoice-table thead {
            background: var(--cream);
        }

        .quote-invoice-table th {
            padding: 0.75rem 1rem;
            text-align: left;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            font-weight: 600;
            border-bottom: 2px solid var(--gold-light);
        }

        .quote-invoice-table th:last-child {
            text-align: right;
        }

        .quote-invoice-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .quote-invoice-table td:last-child {
            text-align: right;
            font-weight: 600;
            color: var(--gold-dark);
        }

        .quote-invoice-table .event-row {
            background: rgba(201, 168, 124, 0.05);
            font-weight: 600;
        }

        .quote-invoice-table .event-row td {
            color: var(--charcoal);
        }

        .quote-invoice-table .service-row td:first-child {
            padding-left: 2rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .quote-invoice-totals {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 2rem;
        }

        .quote-invoice-totals-box {
            min-width: 300px;
        }

        .quote-invoice-totals-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .quote-invoice-totals-row.total {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--white);
            border: none;
            border-radius: 8px;
            margin-top: 0.5rem;
            font-size: 1.1rem;
        }

        .quote-invoice-totals-row.total span:last-child {
            font-size: 1.5rem;
            font-family: 'Playfair Display', serif;
        }

        .modal-body {
            padding: 26px;
        }

        .modal-footer {
            padding: 18px 26px;
            border-top: 1px solid var(--border-subtle);
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            background: rgba(0, 0, 0, 0.15);
        }

        /* Sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
        }

        .toast {
            background: linear-gradient(145deg, #181818 0%, #101010 100%);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 14px 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow-elevated);
            min-width: 280px;
            font-size: 14px;
        }

        .toast.success { 
            border-left: 3px solid #6ABF7B;
            background: linear-gradient(145deg, rgba(74, 159, 91, 0.08) 0%, #101010 100%);
        }
        .toast.error { 
            border-left: 3px solid #E57373;
            background: linear-gradient(145deg, rgba(209, 82, 82, 0.08) 0%, #101010 100%);
        }
        .toast.warning { 
            border-left: 3px solid #F0B860;
            background: linear-gradient(145deg, rgba(232, 155, 60, 0.08) 0%, #101010 100%);
        }

        @keyframes slideIn {
            from {
                transform: translateX(120%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Pricing Editor */
        .pricing-list {
            margin-top: 12px;
        }

        .pricing-item {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            align-items: center;
            padding: 12px 14px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .pricing-item select {
            flex: 1;
        }

        .pricing-item input {
            width: 120px;
        }

        .pricing-item button {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            background: rgba(209, 82, 82, 0.12);
            color: #E57373;
            transition: var(--transition-smooth);
        }

        .pricing-item button:hover {
            background: rgba(209, 82, 82, 0.2);
        }

        .add-pricing-btn {
            background: rgba(74, 159, 91, 0.12);
            color: #6ABF7B;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 500;
            transition: var(--transition-smooth);
        }

        .add-pricing-btn:hover {
            background: rgba(74, 159, 91, 0.2);
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 52px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-subtle);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Pagination */
        .pagination-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(201, 169, 98, 0.02);
        }

        .pagination-info {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pagination-info span {
            color: var(--gold);
            font-weight: 600;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pagination-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--border-subtle);
            background: var(--card-bg);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-smooth);
        }

        .pagination-btn:hover:not(:disabled) {
            border-color: var(--gold);
            color: var(--gold);
            background: rgba(201, 169, 98, 0.1);
        }

        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .pagination-btn svg {
            width: 16px;
            height: 16px;
        }

        .pagination-pages {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .pagination-page {
            min-width: 36px;
            height: 36px;
            padding: 0 8px;
            border: 1px solid transparent;
            background: transparent;
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all var(--transition-smooth);
        }

        .pagination-page:hover:not(.active):not(.ellipsis) {
            border-color: var(--border-subtle);
            background: rgba(255, 255, 255, 0.05);
        }

        .pagination-page.active {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: #0A0A0A;
            font-weight: 600;
            border-color: var(--gold);
        }

        .pagination-page.ellipsis {
            cursor: default;
            color: var(--text-muted);
        }

        .pagination-per-page {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 16px;
            padding-left: 16px;
            border-left: 1px solid var(--border-subtle);
        }

        .pagination-per-page label {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pagination-per-page select {
            padding: 6px 10px;
            border: 1px solid var(--border-subtle);
            background: var(--card-bg);
            border-radius: 6px;
            color: var(--text-light);
            font-size: 13px;
            cursor: pointer;
            transition: all var(--transition-smooth);
        }

        .pagination-per-page select:hover {
            border-color: var(--gold);
        }

        .pagination-per-page select:focus {
            outline: none;
            border-color: var(--gold);
        }

        @media (max-width: 768px) {
            .pagination-container {
                flex-direction: column;
                gap: 12px;
            }

            .pagination-controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            .pagination-per-page {
                margin-left: 0;
                padding-left: 0;
                border-left: none;
            }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 220px;
            }

            .main-content {
                margin-left: 220px;
                padding: 28px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                z-index: 100;
                width: 260px;
            }

            .main-content {
                margin-left: 0;
                padding: 20px 16px;
            }

            .header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                display: block;
                overflow-x: auto;
            }

            .modal {
                margin: 16px;
                max-width: calc(100% - 32px);
            }

            /* App Bar responsive */
            .app-bar {
                left: 0;
                padding: 0 20px;
            }

            .menu-toggle {
                display: flex;
            }

            .app-bar-user-info {
                display: none;
            }

            .app-bar-logout span {
                display: none;
            }

            .app-bar-logout {
                padding: 10px;
            }

            /* Sidebar overlay for mobile */
            .sidebar {
                transform: translateX(-100%);
                z-index: 200;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.6);
                z-index: 150;
                backdrop-filter: blur(4px);
            }

            .sidebar-overlay.active {
                display: block;
            }

            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h1>WeddingClikz</h1>
            <p>Admin Console</p>
            <div class="error-message" id="loginError"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required placeholder="admin@example.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="loginPassword" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        <button type="button" class="password-toggle" id="togglePassword" onclick="togglePasswordVisibility()">
                            <svg class="eye-on" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <svg class="eye-off" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                            </svg>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
        </div>
    </div>

    <!-- Admin Layout -->
    <div class="admin-layout" id="adminLayout">
        <!-- Sidebar Overlay (for mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

        <!-- App Bar -->
        <div class="app-bar">
            <div class="app-bar-left">
                <button class="menu-toggle" id="menuToggle" onclick="toggleSidebar()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <h1 class="app-bar-title" id="appBarTitle">Dashboard</h1>
            </div>
            <div class="app-bar-right">
                <div class="app-bar-user">
                    <div class="app-bar-avatar" id="appBarAvatar">A</div>
                    <div class="app-bar-user-info">
                        <span class="app-bar-user-name" id="appBarUserName">Admin</span>
                        <span class="app-bar-user-role">Administrator</span>
                    </div>
                    <!-- User Dropdown Menu -->
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-header">
                            <div class="user-dropdown-avatar" id="dropdownAvatar">A</div>
                            <div class="user-dropdown-info">
                                <div class="user-dropdown-name" id="dropdownName">Admin</div>
                                <div class="user-dropdown-role">Administrator</div>
                            </div>
                        </div>
                        <div class="user-dropdown-email" id="dropdownEmail">admin@example.com</div>
                    </div>
                </div>
                <button class="app-bar-logout" id="appBarLogout">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <h2>WeddingClikz</h2>
                <span>Admin Console</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">Dashboard</li>
                <li class="nav-item" data-section="offerings">Offerings</li>
                <li class="nav-item" data-section="quotes">Quotes</li>
                <li class="nav-item" data-section="users">Customers</li>
                <li class="nav-item" data-section="admins">Admins</li>
                <li class="nav-item" data-section="settings">Email Notifications</li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-info">
                    <span id="adminName">Admin</span>
                    <button class="btn btn-secondary btn-sm" id="logoutBtn">Logout</button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section class="section active" id="dashboardSection">
                <div class="table-header" style="margin-bottom: 2rem;">
                    <h2>Statistics</h2>
                    <button class="btn-icon" id="refreshDashboardBtn" title="Refresh Dashboard">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                    </button>
                </div>
                <div class="stats-grid" id="statsGrid">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h2>Recent Quotes</h2>
                        <button class="btn btn-secondary btn-sm" onclick="navigateToSection('quotes')">View All</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Quote #</th>
                                <th>Customer</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recentQuotesTable">
                            <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Offerings Section (Combined Events, Services, Additional Services) -->
            <section class="section" id="offeringsSection">
                <!-- Header with Info Icon -->
                <div class="offerings-header">
                    <div class="offerings-header-left">
                        <h2>Manage Offerings</h2>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div class="info-tooltip">
                                <div class="info-tooltip-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                    </svg>
                                    How to Manage Offerings
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">1</span>
                                        <strong>Events</strong> â€“ Occasion Types
                                    </div>
                                    <p>Events represent the types of occasions you cover (e.g., Wedding, Engagement, Pre-Wedding, Birthday). Each event is assigned a <em>pricing category</em> (Category A, B, or C) which determines how services are priced for that event.</p>
                                    <ul class="info-tooltip-sublist">
                                        <li><strong>Category A:</strong> Premium events with highest service rates</li>
                                        <li><strong>Category B:</strong> Standard events with mid-tier pricing</li>
                                        <li><strong>Category C:</strong> Budget-friendly events with lower rates</li>
                                    </ul>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">2</span>
                                        <strong>Services</strong> â€“ What You Offer
                                    </div>
                                    <p>Services are your core offerings (e.g., Photography, Videography, Drone Coverage). Each service has <em>three different prices</em> â€“ one for each pricing category. When a customer selects an event, the quote automatically uses the correct price based on that event's category.</p>
                                    <p style="margin-top: 6px; color: var(--gold);"><strong>Example:</strong> If Photography costs â‚¹50,000 for Category A and a customer books a Wedding (Category A event), they'll see the â‚¹50,000 price.</p>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">3</span>
                                        <strong>Add-ons</strong> â€“ Optional Extras
                                    </div>
                                    <p>Add-ons are supplementary items customers can include with any event (e.g., Extra Album, Drone Footage, Same-Day Edit). Unlike services, add-ons have a <em>flat price</em> that remains the same regardless of the event category.</p>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">4</span>
                                        <strong>Active/Inactive</strong> â€“ Visibility Control
                                    </div>
                                    <p>Toggle items as Active or Inactive to control what customers see. Inactive items are <em>hidden</em> from the quote builder but remain in your system â€“ perfect for seasonal offerings or temporarily unavailable services.</p>
                                </div>
                                <div class="info-tooltip-section" style="border-top: 1px solid rgba(201, 169, 98, 0.2); padding-top: 12px; margin-top: 8px;">
                                    <p style="margin: 0; font-size: 11px; color: var(--text-muted);"><strong>ðŸ’¡ Tip:</strong> Start by creating your Events first, then add Services with category-based pricing, and finally add any optional Add-ons.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subtabs -->
                <div class="offerings-tabs">
                    <button class="offerings-tab active" data-subtab="events">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        Events
                    </button>
                    <button class="offerings-tab" data-subtab="services">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        Services
                    </button>
                    <button class="offerings-tab" data-subtab="additionalServices">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Add-ons
                    </button>
                </div>

                <!-- Events Content -->
                <div class="offerings-content active" id="eventsContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Events</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('event')">+ Add Event</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Icon</th>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Category</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="eventsTable">
                                <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Services Content -->
                <div class="offerings-content" id="servicesContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Services</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('service')">+ Add Service</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Pricing</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTable">
                                <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Additional Services Content -->
                <div class="offerings-content" id="additionalServicesContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Additional Services</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('additionalService')">+ Add Add-on</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="additionalServicesTable">
                                <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Quotes Section -->
            <section class="section" id="quotesSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Quotes</h2>
                        <div class="search-box">
                            <input type="text" id="quoteSearch" placeholder="Search quotes...">
                            <select id="quoteStatusFilter">
                                <option value="">All Status</option>
                                <option value="draft">Draft</option>
                                <option value="sent">Sent</option>
                                <option value="viewed">Viewed</option>
                                <option value="accepted">Accepted</option>
                                <option value="rejected">Rejected</option>
                                <option value="expired">Expired</option>
                            </select>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Quote #</th>
                                <th>Customer</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="quotesTable">
                            <tr><td colspan="7" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                    <!-- Pagination -->
                    <div class="pagination-container" id="quotesPagination">
                        <div class="pagination-info">
                            Showing <span id="quotesShowingStart">0</span>-<span id="quotesShowingEnd">0</span> of <span id="quotesTotalCount">0</span> quotes
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="quotesPrevBtn" onclick="changeQuotesPage(-1)" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <div class="pagination-pages" id="quotesPaginationPages">
                                <!-- Page numbers will be rendered here -->
                            </div>
                            <button class="pagination-btn" id="quotesNextBtn" onclick="changeQuotesPage(1)" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </button>
                            <div class="pagination-per-page">
                                <label>Per page:</label>
                                <select id="quotesPerPage" onchange="changeQuotesPerPage()">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customers Section -->
            <section class="section" id="usersSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Customers</h2>
                        <div class="search-box">
                            <input type="text" id="userSearch" placeholder="Search customers...">
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Quotes</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                    
                    <!-- Customers Pagination Controls -->
                    <div class="pagination-container" id="customersPaginationContainer" style="display: none;">
                        <div class="pagination-info">
                            <span id="customersPageInfo">Showing 0 of 0 customers</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="customersPrevBtn" onclick="changeCustomersPage('prev')" disabled>
                                â† Previous
                            </button>
                            <div class="pagination-pages" id="customersPaginationPages">
                                <!-- Page numbers will be inserted here -->
                            </div>
                            <button class="pagination-btn" id="customersNextBtn" onclick="changeCustomersPage('next')" disabled>
                                Next â†’
                            </button>
                        </div>
                        <div class="pagination-per-page">
                            <label for="customersPerPage">Per page:</label>
                            <select id="customersPerPage" onchange="changeCustomersPerPage()">
                                <option value="5">5</option>
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admins Section -->
            <section class="section" id="adminsSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Admin Users</h2>
                        <div class="search-box">
                            <button class="btn btn-primary btn-sm" onclick="openModal('admin')">+ Add Admin</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="adminsTable">
                            <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Email Notifications Section -->
            <section class="section" id="settingsSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Email Notifications</h2>
                    </div>
                    <div class="modal-body">
                        <p style="color: var(--text-muted); margin-bottom: 20px;">Configure email addresses that will receive a copy of customer quotes. Maximum 3 emails allowed.</p>
                        <form id="settingsForm">
                            <div class="form-group">
                                <label>Notification Email 1</label>
                                <input type="email" id="notificationEmail1" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label>Notification Email 2</label>
                                <input type="email" id="notificationEmail2" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label>Notification Email 3</label>
                                <input type="email" id="notificationEmail3" placeholder="email@example.com">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Settings</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <div class="modal-overlay" id="eventModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="eventModalTitle">Add Event</h2>
                <button class="modal-close" onclick="closeModal('event')">&times;</button>
            </div>
            <form id="eventForm">
                <div class="modal-body">
                    <input type="hidden" id="eventId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="eventName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="eventSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Icon (Emoji)</label>
                        <input type="text" id="eventIcon" placeholder="âœ¨">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="eventCategory" required>
                            <option value="wedding">Wedding</option>
                            <option value="reception-sangeet-engagement">Reception/Sangeet/Engagement</option>
                            <option value="haldi-mehendi-house">Haldi/Mehendi/House</option>
                            <option value="prewedding">Pre-Wedding</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="eventDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="eventSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="eventIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('event')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Service Modal -->
    <div class="modal-overlay" id="serviceModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="serviceModalTitle">Add Service</h2>
                <button class="modal-close" onclick="closeModal('service')">&times;</button>
            </div>
            <form id="serviceForm">
                <div class="modal-body">
                    <input type="hidden" id="serviceId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="serviceName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="serviceSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="serviceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Pricing by Category</label>
                        <div class="pricing-list" id="pricingList"></div>
                        <button type="button" class="add-pricing-btn" onclick="addPricingRow()">+ Add Pricing</button>
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="serviceSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="serviceIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('service')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quote Modal -->
    <div class="modal-overlay" id="quoteModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Quote Details</h2>
                <button class="modal-close" onclick="closeModal('quote')">&times;</button>
            </div>
            <div class="modal-body" id="quoteDetails">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('quote')">Close</button>
            </div>
        </div>
    </div>

    <!-- Additional Service Modal -->
    <div class="modal-overlay" id="additionalServiceModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="additionalServiceModalTitle">Add Additional Service</h2>
                <button class="modal-close" onclick="closeModal('additionalService')">&times;</button>
            </div>
            <form id="additionalServiceForm">
                <div class="modal-body">
                    <input type="hidden" id="additionalServiceId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="additionalServiceName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="additionalServiceSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="additionalServiceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price (â‚¹)</label>
                        <input type="number" id="additionalServicePrice" required min="0">
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="additionalServiceSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="additionalServiceIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('additionalService')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Modal -->
    <div class="modal-overlay" id="adminModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="adminModalTitle">Add Admin</h2>
                <button class="modal-close" onclick="closeModal('admin')">&times;</button>
            </div>
            <form id="adminForm">
                <div class="modal-body">
                    <input type="hidden" id="adminId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="adminNameInput" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="adminEmail" required>
                    </div>
                    <div class="form-group" id="passwordGroup">
                        <label>Password</label>
                        <input type="password" id="adminPassword">
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="adminRole">
                            <option value="admin">Admin</option>
                            <option value="superadmin">Super Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="adminIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('admin')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quote Details Modal -->
    <div class="modal-overlay" id="quoteDetailsModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h2>Quote Details</h2>
                <button class="modal-close" onclick="closeQuoteDetailsModal()">&times;</button>
            </div>
            <div class="modal-body" id="quoteDetailsContent" style="max-height: 70vh; overflow-y: auto;">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeQuoteDetailsModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURATION - Backend API URL
        // ============================================
        const BACKEND_URL = 'https://api.edastra.in';
        const API_BASE = `${BACKEND_URL}/api/admin`;
        
        let authToken = localStorage.getItem('adminToken');
        let currentAdmin = JSON.parse(localStorage.getItem('adminData') || '{}');

        // Utility Functions
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : 'âš '}</span> ${message}`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        async function apiCall(endpoint, method = 'GET', data = null) {
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${authToken}`
                }
            };
            if (data) options.body = JSON.stringify(data);
            
            const response = await fetch(`${API_BASE}${endpoint}`, options);
            const result = await response.json();
            
            if (!response.ok) {
                if (response.status === 401) {
                    logout();
                    throw new Error('Session expired. Please login again.');
                }
                throw new Error(result.error || 'API request failed');
            }
            return result;
        }

        function formatDate(dateStr) {
            if (!dateStr) return '-';
            return new Date(dateStr).toLocaleDateString('en-IN', {
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        // Password visibility toggle
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleBtn = document.getElementById('togglePassword');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.classList.add('showing');
            } else {
                passwordInput.type = 'password';
                toggleBtn.classList.remove('showing');
            }
        }

        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Close sidebar when nav item is clicked (mobile)
        function closeSidebarOnMobile() {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        }

        // Update app bar title
        function updateAppBarTitle(title) {
            const appBarTitle = document.getElementById('appBarTitle');
            if (appBarTitle) {
                appBarTitle.textContent = title;
            }
        }

        // Update app bar user info
        function updateAppBarUser(name, email) {
            const appBarAvatar = document.getElementById('appBarAvatar');
            const dropdownAvatar = document.getElementById('dropdownAvatar');
            const dropdownName = document.getElementById('dropdownName');
            const dropdownEmail = document.getElementById('dropdownEmail');
            
            // Get admin data from localStorage or use currentAdmin
            let adminData = currentAdmin;
            if (!adminData) {
                const storedData = localStorage.getItem('adminData');
                if (storedData) {
                    try {
                        adminData = JSON.parse(storedData);
                    } catch (e) {
                        console.error('Error parsing admin data:', e);
                    }
                }
            }
            
            // Use provided name or fall back to admin data
            const displayName = name || (adminData ? adminData.name : 'Admin');
            const displayEmail = email || (adminData ? adminData.email : 'admin@example.com');
            
            if (appBarAvatar && displayName) {
                const initial = displayName.charAt(0).toUpperCase();
                appBarAvatar.textContent = initial;
                if (dropdownAvatar) dropdownAvatar.textContent = initial;
            }
            
            if (dropdownName) dropdownName.textContent = displayName;
            if (dropdownEmail) dropdownEmail.textContent = displayEmail;
        }

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            try {
                errorDiv.style.display = 'none';
                const response = await fetch(`${API_BASE}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.error || 'Login failed');
                }
                
                authToken = result.data.token;
                currentAdmin = result.data.admin;
                localStorage.setItem('adminToken', authToken);
                localStorage.setItem('adminData', JSON.stringify(currentAdmin));
                
                showAdminPanel();
                showToast('Login successful!');
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.style.display = 'block';
            }
        });

        function logout() {
            authToken = null;
            currentAdmin = {};
            localStorage.removeItem('adminToken');
            localStorage.removeItem('adminData');
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('adminLayout').style.display = 'none';
        }

        document.getElementById('logoutBtn').addEventListener('click', logout);

        function showAdminPanel() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminLayout').style.display = 'block';
            document.getElementById('adminName').textContent = currentAdmin.name || 'Admin';
            updateAppBarUser(currentAdmin.name, currentAdmin.email);
            loadDashboard();
        }

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                const section = item.dataset.section;
                const title = item.textContent.trim();
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(`${section}Section`).classList.add('active');
                document.getElementById('pageTitle').textContent = title;
                updateAppBarTitle(title);
                
                // Close sidebar on mobile after navigation
                closeSidebarOnMobile();
                
                loadSection(section);
            });
        });

        // Offerings subtabs navigation
        document.querySelectorAll('.offerings-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Update active tab
                document.querySelectorAll('.offerings-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                const subtab = tab.dataset.subtab;
                document.querySelectorAll('.offerings-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${subtab}Content`).classList.add('active');
                
                // Load data for the subtab
                loadOfferingsSubtab(subtab);
            });
        });

        // Navigate to section programmatically (used by dashboard cards)
        function navigateToSection(section, subtab = null) {
            // Update sidebar navigation
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const navItem = document.querySelector(`.nav-item[data-section="${section}"]`);
            if (navItem) {
                navItem.classList.add('active');
                const title = navItem.textContent.trim();
                document.getElementById('pageTitle').textContent = title;
                updateAppBarTitle(title);
            }
            
            // Show section
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(`${section}Section`).classList.add('active');
            
            // Handle offerings subtab if specified
            if (section === 'offerings' && subtab) {
                setTimeout(() => {
                    document.querySelectorAll('.offerings-tab').forEach(t => t.classList.remove('active'));
                    const tab = document.querySelector(`.offerings-tab[data-subtab="${subtab}"]`);
                    if (tab) {
                        tab.classList.add('active');
                        document.querySelectorAll('.offerings-content').forEach(c => c.classList.remove('active'));
                        document.getElementById(`${subtab}Content`).classList.add('active');
                        loadOfferingsSubtab(subtab);
                    }
                }, 100);
            } else {
                // Load section data
                loadSection(section);
            }
            
            // Close sidebar on mobile
            closeSidebarOnMobile();
        }

        // Refresh Dashboard
        document.getElementById('refreshDashboardBtn').addEventListener('click', async () => {
            const btn = document.getElementById('refreshDashboardBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            try {
                await loadDashboard();
            } catch (error) {
                showToast('Failed to refresh dashboard', 'error');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });

        function loadOfferingsSubtab(subtab) {
            switch(subtab) {
                case 'events': loadEvents(); break;
                case 'services': loadServices(); break;
                case 'additionalServices': loadAdditionalServices(); break;
            }
        }

        // App bar logout handler
        document.getElementById('appBarLogout').addEventListener('click', () => {
            localStorage.removeItem('adminToken');
            localStorage.removeItem('adminData');
            currentAdmin = null;
            document.getElementById('adminLayout').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            showToast('Logged out successfully', 'success');
        });

        // User dropdown toggle functionality
        document.getElementById('appBarAvatar').addEventListener('click', (e) => {
            e.stopPropagation();
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('userDropdown');
            const userContainer = document.querySelector('.app-bar-user');
            
            if (dropdown && !userContainer.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        function loadSection(section) {
            switch(section) {
                case 'dashboard': loadDashboard(); break;
                case 'offerings': 
                    // Load the currently active subtab
                    const activeSubtab = document.querySelector('.offerings-tab.active');
                    if (activeSubtab) {
                        loadOfferingsSubtab(activeSubtab.dataset.subtab);
                    } else {
                        loadEvents(); // Default to events
                    }
                    break;
                case 'quotes': loadQuotes(); break;
                case 'users': loadUsers(); break;
                case 'admins': loadAdmins(); break;
                case 'settings': loadSettings(); break;
            }
        }

        // Dashboard
        async function loadDashboard() {
            try {
                const result = await apiCall('/dashboard');
                const data = result.data;
                
                document.getElementById('statsGrid').innerHTML = `
                    <div class="stat-card" onclick="navigateToSection('offerings')">
                        <h3>Total Events</h3>
                        <div class="value">${data.events.total}</div>
                        <div class="change positive">${data.events.active} active</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('offerings', 'services')">
                        <h3>Total Services</h3>
                        <div class="value">${data.services.total}</div>
                        <div class="change positive">${data.services.active} active</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('quotes')">
                        <h3>Total Quotes</h3>
                        <div class="value">${data.quotes.total}</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('users')">
                        <h3>Total Users</h3>
                        <div class="value">${data.users.total}</div>
                    </div>
                `;
                
                document.getElementById('recentQuotesTable').innerHTML = data.recentQuotes.map(q => `
                    <tr>
                        <td>${q.quoteNumber}</td>
                        <td>${q.customerName || q.customerEmail}</td>
                        <td>${formatCurrency(q.total)}</td>
                        <td><span class="status-badge status-${q.status}">${q.status}</span></td>
                        <td>${formatDate(q.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn view" onclick="viewQuoteDetails('${q._id}')" title="View Details">ðŸ‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No quotes yet</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Events
        async function loadEvents() {
            try {
                const result = await apiCall('/events');
                document.getElementById('eventsTable').innerHTML = result.data.map(e => `
                    <tr>
                        <td>${e.icon || 'âœ¨'}</td>
                        <td>${e.name}</td>
                        <td>${e.slug}</td>
                        <td>${e.category}</td>
                        <td><span class="status-badge status-${e.isActive ? 'active' : 'inactive'}">${e.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editEvent('${e._id}')">âœï¸</button>
                            <button class="action-btn delete" onclick="deleteEvent('${e._id}')">ðŸ—‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No events found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        let eventsCache = [];
        async function editEvent(id) {
            try {
                const result = await apiCall('/events');
                const event = result.data.find(e => e._id === id);
                if (!event) return showToast('Event not found', 'error');
                
                document.getElementById('eventModalTitle').textContent = 'Edit Event';
                document.getElementById('eventId').value = event._id;
                document.getElementById('eventName').value = event.name;
                document.getElementById('eventSlug').value = event.slug;
                document.getElementById('eventIcon').value = event.icon || '';
                document.getElementById('eventCategory').value = event.category;
                document.getElementById('eventDescription').value = event.description || '';
                document.getElementById('eventSortOrder').value = event.sortOrder || 0;
                document.getElementById('eventIsActive').checked = event.isActive;
                
                openModal('event');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteEvent(id) {
            if (!confirm('Are you sure you want to delete this event?')) return;
            try {
                await apiCall(`/events/${id}`, 'DELETE');
                showToast('Event deleted successfully');
                loadEvents();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('eventForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('eventId').value;
            const data = {
                name: document.getElementById('eventName').value,
                slug: document.getElementById('eventSlug').value,
                icon: document.getElementById('eventIcon').value,
                category: document.getElementById('eventCategory').value,
                description: document.getElementById('eventDescription').value,
                sortOrder: parseInt(document.getElementById('eventSortOrder').value) || 0,
                isActive: document.getElementById('eventIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/events/${id}`, 'PUT', data);
                    showToast('Event updated successfully');
                } else {
                    await apiCall('/events', 'POST', data);
                    showToast('Event created successfully');
                }
                closeModal('event');
                loadEvents();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Services
        async function loadServices() {
            try {
                const result = await apiCall('/services');
                document.getElementById('servicesTable').innerHTML = result.data.map(s => `
                    <tr>
                        <td>${s.name}</td>
                        <td>${s.slug}</td>
                        <td>${s.pricing.map(p => `${p.category}: ${formatCurrency(p.price)}`).join('<br>')}</td>
                        <td><span class="status-badge status-${s.isActive ? 'active' : 'inactive'}">${s.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editService('${s._id}')">âœï¸</button>
                            <button class="action-btn delete" onclick="deleteService('${s._id}')">ðŸ—‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No services found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function editService(id) {
            try {
                const result = await apiCall('/services');
                const service = result.data.find(s => s._id === id);
                if (!service) return showToast('Service not found', 'error');
                
                document.getElementById('serviceModalTitle').textContent = 'Edit Service';
                document.getElementById('serviceId').value = service._id;
                document.getElementById('serviceName').value = service.name;
                document.getElementById('serviceSlug').value = service.slug;
                document.getElementById('serviceDescription').value = service.description || '';
                document.getElementById('serviceSortOrder').value = service.sortOrder || 0;
                document.getElementById('serviceIsActive').checked = service.isActive;
                
                // Load pricing
                const pricingList = document.getElementById('pricingList');
                pricingList.innerHTML = '';
                service.pricing.forEach(p => addPricingRow(p.category, p.price));
                
                openModal('service');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        function addPricingRow(category = '', price = '') {
            const pricingList = document.getElementById('pricingList');
            const row = document.createElement('div');
            row.className = 'pricing-item';
            row.innerHTML = `
                <select class="pricing-category">
                    <option value="wedding" ${category === 'wedding' ? 'selected' : ''}>Wedding</option>
                    <option value="reception-sangeet-engagement" ${category === 'reception-sangeet-engagement' ? 'selected' : ''}>Reception/Sangeet/Engagement</option>
                    <option value="haldi-mehendi-house" ${category === 'haldi-mehendi-house' ? 'selected' : ''}>Haldi/Mehendi/House</option>
                    <option value="prewedding" ${category === 'prewedding' ? 'selected' : ''}>Pre-Wedding</option>
                </select>
                <input type="number" class="pricing-price" placeholder="Price" value="${price}">
                <button type="button" onclick="this.parentElement.remove()">âœ•</button>
            `;
            pricingList.appendChild(row);
        }

        async function deleteService(id) {
            if (!confirm('Are you sure you want to delete this service?')) return;
            try {
                await apiCall(`/services/${id}`, 'DELETE');
                showToast('Service deleted successfully');
                loadServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('serviceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('serviceId').value;
            
            const pricingRows = document.querySelectorAll('.pricing-item');
            const pricing = [];
            pricingRows.forEach(row => {
                const category = row.querySelector('.pricing-category').value;
                const price = parseFloat(row.querySelector('.pricing-price').value) || 0;
                if (category && price > 0) {
                    pricing.push({ category, price });
                }
            });
            
            const data = {
                name: document.getElementById('serviceName').value,
                slug: document.getElementById('serviceSlug').value,
                description: document.getElementById('serviceDescription').value,
                pricing,
                sortOrder: parseInt(document.getElementById('serviceSortOrder').value) || 0,
                isActive: document.getElementById('serviceIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/services/${id}`, 'PUT', data);
                    showToast('Service updated successfully');
                } else {
                    await apiCall('/services', 'POST', data);
                    showToast('Service created successfully');
                }
                closeModal('service');
                loadServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Additional Services
        async function loadAdditionalServices() {
            try {
                const result = await apiCall('/additional-services');
                document.getElementById('additionalServicesTable').innerHTML = result.data.map(s => `
                    <tr>
                        <td>${s.name}</td>
                        <td><code>${s.slug}</code></td>
                        <td>â‚¹${s.price.toLocaleString('en-IN')}</td>
                        <td><span class="status-badge status-${s.isActive ? 'active' : 'inactive'}">${s.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editAdditionalService('${s._id}')">âœï¸</button>
                            <button class="action-btn delete" onclick="deleteAdditionalService('${s._id}')">ðŸ—‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No additional services found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function editAdditionalService(id) {
            try {
                const result = await apiCall('/additional-services');
                const service = result.data.find(s => s._id === id);
                if (!service) return showToast('Additional service not found', 'error');
                
                document.getElementById('additionalServiceModalTitle').textContent = 'Edit Additional Service';
                document.getElementById('additionalServiceId').value = service._id;
                document.getElementById('additionalServiceName').value = service.name;
                document.getElementById('additionalServiceSlug').value = service.slug;
                document.getElementById('additionalServiceDescription').value = service.description || '';
                document.getElementById('additionalServicePrice').value = service.price;
                document.getElementById('additionalServiceSortOrder').value = service.sortOrder || 0;
                document.getElementById('additionalServiceIsActive').checked = service.isActive;
                
                openModal('additionalService');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteAdditionalService(id) {
            if (!confirm('Are you sure you want to delete this additional service?')) return;
            try {
                await apiCall(`/additional-services/${id}`, 'DELETE');
                showToast('Additional service deleted successfully');
                loadAdditionalServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('additionalServiceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('additionalServiceId').value;
            
            const data = {
                name: document.getElementById('additionalServiceName').value,
                slug: document.getElementById('additionalServiceSlug').value,
                description: document.getElementById('additionalServiceDescription').value,
                price: parseFloat(document.getElementById('additionalServicePrice').value) || 0,
                sortOrder: parseInt(document.getElementById('additionalServiceSortOrder').value) || 0,
                isActive: document.getElementById('additionalServiceIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/additional-services/${id}`, 'PUT', data);
                    showToast('Additional service updated successfully');
                } else {
                    await apiCall('/additional-services', 'POST', data);
                    showToast('Additional service created successfully');
                }
                closeModal('additionalService');
                loadAdditionalServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Quotes Pagination State
        let quotesCurrentPage = 1;
        let quotesPerPage = 10;
        let quotesTotalPages = 1;
        let quotesTotalCount = 0;

        // Customers Pagination State
        let customersCurrentPage = 1;
        let customersPerPage = 10;
        let customersTotalPages = 1;
        let customersTotalCount = 0;

        // Quotes
        async function loadQuotes(resetPage = false) {
            if (resetPage) quotesCurrentPage = 1;
            
            try {
                const search = document.getElementById('quoteSearch').value;
                const status = document.getElementById('quoteStatusFilter').value;
                let query = `?page=${quotesCurrentPage}&limit=${quotesPerPage}`;
                if (search) query += `&search=${encodeURIComponent(search)}`;
                if (status) query += `&status=${status}`;
                
                const result = await apiCall(`/quotes${query}`);
                
                // Handle pagination data from response
                const quotes = result.data || [];
                quotesTotalCount = result.total || result.pagination?.total || quotes.length;
                quotesTotalPages = result.totalPages || result.pagination?.pages || Math.ceil(quotesTotalCount / quotesPerPage);
                
                // Update pagination UI
                updateQuotesPagination();
                
                document.getElementById('quotesTable').innerHTML = quotes.map(q => `
                    <tr>
                        <td>${q.quoteNumber}</td>
                        <td>${q.customerName || '-'}<br><small>${q.customerEmail}</small></td>
                        <td>${q.items.length} items</td>
                        <td>${formatCurrency(q.total)}</td>
                        <td><span class="status-badge status-${q.status}">${q.status}</span></td>
                        <td>${formatDate(q.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn view" onclick="viewQuoteDetails('${q._id}')" title="View Details">ðŸ‘ï¸</button>
                            <button class="action-btn delete" onclick="deleteQuote('${q._id}')" title="Delete">ðŸ—‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="7">No quotes found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Update quotes pagination UI
        function updateQuotesPagination() {
            const startItem = quotesTotalCount === 0 ? 0 : (quotesCurrentPage - 1) * quotesPerPage + 1;
            const endItem = Math.min(quotesCurrentPage * quotesPerPage, quotesTotalCount);
            
            document.getElementById('quotesShowingStart').textContent = startItem;
            document.getElementById('quotesShowingEnd').textContent = endItem;
            document.getElementById('quotesTotalCount').textContent = quotesTotalCount;
            
            // Update prev/next buttons
            document.getElementById('quotesPrevBtn').disabled = quotesCurrentPage <= 1;
            document.getElementById('quotesNextBtn').disabled = quotesCurrentPage >= quotesTotalPages;
            
            // Render page numbers
            renderQuotesPaginationPages();
        }

        // Render pagination page numbers
        function renderQuotesPaginationPages() {
            const container = document.getElementById('quotesPaginationPages');
            let html = '';
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, quotesCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(quotesTotalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // First page + ellipsis
            if (startPage > 1) {
                html += `<button class="pagination-page" onclick="goToQuotesPage(1)">1</button>`;
                if (startPage > 2) {
                    html += `<span class="pagination-page ellipsis">...</span>`;
                }
            }
            
            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                html += `<button class="pagination-page ${i === quotesCurrentPage ? 'active' : ''}" onclick="goToQuotesPage(${i})">${i}</button>`;
            }
            
            // Ellipsis + last page
            if (endPage < quotesTotalPages) {
                if (endPage < quotesTotalPages - 1) {
                    html += `<span class="pagination-page ellipsis">...</span>`;
                }
                html += `<button class="pagination-page" onclick="goToQuotesPage(${quotesTotalPages})">${quotesTotalPages}</button>`;
            }
            
            container.innerHTML = html;
        }

        // Change page
        function changeQuotesPage(delta) {
            const newPage = quotesCurrentPage + delta;
            if (newPage >= 1 && newPage <= quotesTotalPages) {
                quotesCurrentPage = newPage;
                loadQuotes();
            }
        }

        // Go to specific page
        function goToQuotesPage(page) {
            if (page >= 1 && page <= quotesTotalPages && page !== quotesCurrentPage) {
                quotesCurrentPage = page;
                loadQuotes();
            }
        }

        // Change per page
        function changeQuotesPerPage() {
            quotesPerPage = parseInt(document.getElementById('quotesPerPage').value);
            quotesCurrentPage = 1;
            loadQuotes();
        }

        document.getElementById('quoteSearch').addEventListener('input', debounce(() => loadQuotes(true), 300));
        document.getElementById('quoteStatusFilter').addEventListener('change', () => loadQuotes(true));

        async function viewQuote(id) {
            try {
                document.getElementById('quoteDetails').innerHTML = '<div class="loading"><div class="spinner"></div></div>';
                openModal('quote');
                
                const result = await apiCall(`/quotes/${id}`);
                const q = result.data;
                
                document.getElementById('quoteDetails').innerHTML = `
                    <p><strong>Quote #:</strong> ${q.quoteNumber}</p>
                    <p><strong>Customer:</strong> ${q.customerName || '-'}</p>
                    <p><strong>Email:</strong> ${q.customerEmail}</p>
                    <p><strong>Status:</strong> <span class="status-badge status-${q.status}">${q.status}</span></p>
                    <p><strong>Created:</strong> ${formatDate(q.createdAt)}</p>
                    <p><strong>Valid Until:</strong> ${formatDate(q.validUntil)}</p>
                    <hr style="margin: 15px 0; border-color: var(--gold-dark);">
                    <h4 style="color: var(--gold); margin-bottom: 10px;">Items</h4>
                    ${q.items.map(item => `
                        <p>â€¢ ${item.eventName} - ${item.serviceName}: ${formatCurrency(item.price)}</p>
                    `).join('')}
                    <hr style="margin: 15px 0; border-color: var(--gold-dark);">
                    <p><strong>Total:</strong> ${formatCurrency(q.total)}</p>
                `;
            } catch (error) {
                showToast(error.message, 'error');
                closeModal('quote');
            }
        }

        async function deleteQuote(id) {
            if (!confirm('Are you sure you want to delete this quote?')) return;
            try {
                await apiCall(`/quotes/${id}`, 'DELETE');
                showToast('Quote deleted successfully');
                loadQuotes();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // View Quote Details
        async function viewQuoteDetails(id) {
            const modal = document.getElementById('quoteDetailsModal');
            const content = document.getElementById('quoteDetailsContent');
            
            modal.classList.add('active');
            content.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            try {
                const result = await apiCall(`/quotes/${id}`);
                const quote = result.data;
                
                // Format date
                const formatDateLocal = (date) => {
                    if (!date) return '';
                    return new Date(date).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                };
                
                // Format currency
                const formatCurrencyLocal = (amount) => {
                    return `â‚¹${(amount || 0).toLocaleString('en-IN')}`;
                };
                
                // Group items by event
                const eventGroups = {};
                if (quote.items && quote.items.length > 0) {
                    quote.items.forEach(item => {
                        const eventKey = item.eventName || 'Other';
                        if (!eventGroups[eventKey]) {
                            eventGroups[eventKey] = {
                                eventName: item.eventName,
                                eventDate: item.eventDate,
                                services: []
                            };
                        }
                        eventGroups[eventKey].services.push({
                            name: item.serviceName,
                            price: item.price
                        });
                    });
                }
                
                // Group additional services by event
                if (quote.additionalServices && quote.additionalServices.length > 0) {
                    quote.additionalServices.forEach(addon => {
                        const eventKey = addon.event || addon.eventSlug || 'Other';
                        // Find matching event group or create "Add-ons" group
                        let targetGroup = Object.values(eventGroups).find(g => 
                            g.eventName === eventKey || 
                            g.eventName?.toLowerCase().replace(/\s+/g, '-') === eventKey
                        );
                        if (!targetGroup) {
                            if (!eventGroups['Add-ons']) {
                                eventGroups['Add-ons'] = { eventName: 'Additional Services', services: [] };
                            }
                            targetGroup = eventGroups['Add-ons'];
                        }
                        if (!targetGroup.addons) targetGroup.addons = [];
                        targetGroup.addons.push({
                            name: addon.name,
                            price: addon.price
                        });
                    });
                }
                
                // Build invoice HTML
                let invoiceHTML = `
                    <div class="quote-invoice">
                        <div class="quote-invoice-header">
                            <div class="quote-invoice-logo">
                                <h2>Wedding<span>Clickz</span></h2>
                                <p>Professional Wedding Photography</p>
                            </div>
                            <div class="quote-invoice-badge">
                                ${quote.quoteNumber}
                            </div>
                        </div>
                        
                        <div class="quote-invoice-meta">
                            <div class="quote-invoice-meta-item">
                                <label>Quote Date</label>
                                <span>${formatDateLocal(quote.createdAt)}</span>
                            </div>
                            <div class="quote-invoice-meta-item">
                                <label>Status</label>
                                <span class="status-badge status-${quote.status}">${quote.status.toUpperCase()}</span>
                            </div>
                        </div>
                        
                        <div class="quote-invoice-parties">
                            <div class="quote-invoice-party">
                                <h4>From</h4>
                                <p><strong>WeddingClickz</strong></p>
                                <p>Email: contact@weddingclickz.com</p>
                                <p>Phone: +91 XXX XXX XXXX</p>
                            </div>
                            <div class="quote-invoice-party">
                                <h4>To</h4>
                                <p><strong>${quote.customerName || 'N/A'}</strong></p>
                                <p>Email: ${quote.customerEmail}</p>
                                ${quote.customerPhone ? `<p>Phone: ${quote.customerPhone}</p>` : ''}
                            </div>
                        </div>
                        
                        <table class="quote-invoice-table">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th style="text-align: right;">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                // Add items grouped by event
                Object.values(eventGroups).forEach(group => {
                    // Event header
                    invoiceHTML += `
                        <tr class="event-row">
                            <td colspan="2">
                                <strong>${group.eventName}</strong>
                                ${group.eventDate ? ` - ${formatDateLocal(group.eventDate)}` : ''}
                            </td>
                        </tr>
                    `;
                    
                    // Services
                    if (group.services && group.services.length > 0) {
                        group.services.forEach(service => {
                            invoiceHTML += `
                                <tr class="service-row">
                                    <td>${service.name}</td>
                                    <td>${formatCurrencyLocal(service.price)}</td>
                                </tr>
                            `;
                        });
                    }
                    
                    // Additional services for this event
                    if (group.addons && group.addons.length > 0) {
                        group.addons.forEach(addon => {
                            invoiceHTML += `
                                <tr class="service-row">
                                    <td>${addon.name} (Add-on)</td>
                                    <td>${formatCurrencyLocal(addon.price)}</td>
                                </tr>
                            `;
                        });
                    }
                });
                
                invoiceHTML += `
                            </tbody>
                        </table>
                        
                        <div class="quote-invoice-totals">
                            <div class="quote-invoice-totals-box">
                                <div class="quote-invoice-totals-row total">
                                    <span>Total Amount</span>
                                    <span>${formatCurrencyLocal(quote.total)}</span>
                                </div>
                            </div>
                        </div>
                        
                        ${quote.notes ? `
                            <div style="margin-top: 2rem; padding: 1rem; background: var(--cream); border-radius: 8px;">
                                <h4 style="font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-light); margin-bottom: 0.5rem;">Notes</h4>
                                <p style="color: var(--charcoal); margin: 0;">${quote.notes}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                content.innerHTML = invoiceHTML;
            } catch (error) {
                content.innerHTML = `<div style="text-align: center; padding: 2rem; color: var(--error);">
                    <p>Failed to load quote details</p>
                    <p style="font-size: 0.9rem;">${error.message}</p>
                </div>`;
            }
        }
        
        function closeQuoteDetailsModal() {
            document.getElementById('quoteDetailsModal').classList.remove('active');
        }

        // Users
        async function loadUsers() {
            try {
                const search = document.getElementById('userSearch').value;
                let query = `?page=${customersCurrentPage}&limit=${customersPerPage}`;
                if (search) {
                    query += `&search=${encodeURIComponent(search)}`;
                }
                
                const result = await apiCall(`/users${query}`);
                
                // Update pagination state
                customersTotalCount = result.total || 0;
                customersTotalPages = result.totalPages || 1;
                customersCurrentPage = result.currentPage || 1;
                
                document.getElementById('usersTable').innerHTML = result.data.map(u => `
                    <tr>
                        <td>${u.name || '-'}</td>
                        <td>${u.email}</td>
                        <td>${u.quotations ? u.quotations.length : 0}</td>
                        <td>${formatDate(u.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn delete" onclick="deleteUser('${u._id}')">ðŸ—‘ï¸</button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No customers found</td></tr>';
                
                updateCustomersPagination();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }
        
        function updateCustomersPagination() {
            const container = document.getElementById('customersPaginationContainer');
            const pageInfo = document.getElementById('customersPageInfo');
            const prevBtn = document.getElementById('customersPrevBtn');
            const nextBtn = document.getElementById('customersNextBtn');
            
            if (customersTotalCount === 0) {
                container.style.display = 'none';
                return;
            }
            
            container.style.display = 'flex';
            
            const start = (customersCurrentPage - 1) * customersPerPage + 1;
            const end = Math.min(customersCurrentPage * customersPerPage, customersTotalCount);
            pageInfo.textContent = `Showing ${start}-${end} of ${customersTotalCount} customers`;
            
            prevBtn.disabled = customersCurrentPage === 1;
            nextBtn.disabled = customersCurrentPage === customersTotalPages;
            
            renderCustomersPaginationPages();
        }
        
        function renderCustomersPaginationPages() {
            const pagesContainer = document.getElementById('customersPaginationPages');
            pagesContainer.innerHTML = '';
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, customersCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(customersTotalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.className = 'pagination-page';
                firstBtn.textContent = '1';
                firstBtn.onclick = () => goToCustomersPage(1);
                pagesContainer.appendChild(firstBtn);
                
                if (startPage > 2) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagesContainer.appendChild(dots);
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = 'pagination-page';
                if (i === customersCurrentPage) {
                    pageBtn.classList.add('active');
                }
                pageBtn.textContent = i;
                pageBtn.onclick = () => goToCustomersPage(i);
                pagesContainer.appendChild(pageBtn);
            }
            
            if (endPage < customersTotalPages) {
                if (endPage < customersTotalPages - 1) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagesContainer.appendChild(dots);
                }
                
                const lastBtn = document.createElement('button');
                lastBtn.className = 'pagination-page';
                lastBtn.textContent = customersTotalPages;
                lastBtn.onclick = () => goToCustomersPage(customersTotalPages);
                pagesContainer.appendChild(lastBtn);
            }
        }
        
        function changeCustomersPage(direction) {
            if (direction === 'prev' && customersCurrentPage > 1) {
                customersCurrentPage--;
                loadUsers();
            } else if (direction === 'next' && customersCurrentPage < customersTotalPages) {
                customersCurrentPage++;
                loadUsers();
            }
        }
        
        function goToCustomersPage(page) {
            if (page >= 1 && page <= customersTotalPages && page !== customersCurrentPage) {
                customersCurrentPage = page;
                loadUsers();
            }
        }
        
        function changeCustomersPerPage() {
            customersPerPage = parseInt(document.getElementById('customersPerPage').value);
            customersCurrentPage = 1;
            loadUsers();
        }

        document.getElementById('userSearch').addEventListener('input', debounce(() => {
            customersCurrentPage = 1; // Reset to first page on search
            loadUsers();
        }, 300));

        async function deleteUser(id) {
            if (!confirm('Are you sure you want to delete this user?')) return;
            try {
                await apiCall(`/users/${id}`, 'DELETE');
                showToast('User deleted successfully');
                loadUsers();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Admins
        async function loadAdmins() {
            try {
                const result = await apiCall('/admins');
                document.getElementById('adminsTable').innerHTML = result.data.map(a => `
                    <tr>
                        <td>${a.name}</td>
                        <td>${a.email}</td>
                        <td>${a.role}</td>
                        <td><span class="status-badge status-${a.isActive ? 'active' : 'inactive'}">${a.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td>${formatDate(a.lastLogin)}</td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editAdmin('${a._id}')">âœï¸</button>
                            ${a._id !== currentAdmin.id ? `<button class="action-btn delete" onclick="deleteAdmin('${a._id}')">ðŸ—‘ï¸</button>` : ''}
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No admins found</td></tr>';
            } catch (error) {
                if (error.message.includes('superadmin')) {
                    document.getElementById('adminsTable').innerHTML = '<tr><td colspan="6" style="text-align:center; color: var(--warning);">Only superadmins can view admin list</td></tr>';
                } else {
                    showToast(error.message, 'error');
                }
            }
        }

        async function editAdmin(id) {
            try {
                const result = await apiCall('/admins');
                const admin = result.data.find(a => a._id === id);
                if (!admin) return showToast('Admin not found', 'error');
                
                document.getElementById('adminModalTitle').textContent = 'Edit Admin';
                document.getElementById('adminId').value = admin._id;
                document.getElementById('adminNameInput').value = admin.name;
                document.getElementById('adminEmail').value = admin.email;
                document.getElementById('adminEmail').disabled = true;
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').placeholder = 'Leave blank to keep current';
                document.getElementById('adminRole').value = admin.role;
                document.getElementById('adminIsActive').checked = admin.isActive;
                
                openModal('admin');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteAdmin(id) {
            if (!confirm('Are you sure you want to delete this admin?')) return;
            try {
                await apiCall(`/admins/${id}`, 'DELETE');
                showToast('Admin deleted successfully');
                loadAdmins();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('adminForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('adminId').value;
            
            const data = {
                name: document.getElementById('adminNameInput').value,
                role: document.getElementById('adminRole').value,
                isActive: document.getElementById('adminIsActive').checked
            };
            
            if (!id) {
                data.email = document.getElementById('adminEmail').value;
                data.password = document.getElementById('adminPassword').value;
                if (!data.password) return showToast('Password is required', 'error');
            }
            
            try {
                if (id) {
                    await apiCall(`/admins/${id}`, 'PUT', data);
                    showToast('Admin updated successfully');
                } else {
                    await apiCall('/admins', 'POST', data);
                    showToast('Admin created successfully');
                }
                closeModal('admin');
                loadAdmins();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Modal Functions
        function openModal(type) {
            document.getElementById(`${type}Modal`).classList.add('active');
            if (type === 'event') {
                document.getElementById('eventModalTitle').textContent = document.getElementById('eventId').value ? 'Edit Event' : 'Add Event';
            } else if (type === 'service') {
                document.getElementById('serviceModalTitle').textContent = document.getElementById('serviceId').value ? 'Edit Service' : 'Add Service';
                if (!document.getElementById('serviceId').value) {
                    document.getElementById('pricingList').innerHTML = '';
                }
            } else if (type === 'additionalService') {
                document.getElementById('additionalServiceModalTitle').textContent = document.getElementById('additionalServiceId').value ? 'Edit Additional Service' : 'Add Additional Service';
            } else if (type === 'admin') {
                if (!document.getElementById('adminId').value) {
                    document.getElementById('adminModalTitle').textContent = 'Add Admin';
                    document.getElementById('adminEmail').disabled = false;
                    document.getElementById('adminPassword').placeholder = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                }
            }
        }

        function closeModal(type) {
            document.getElementById(`${type}Modal`).classList.remove('active');
            if (type === 'event') {
                document.getElementById('eventForm').reset();
                document.getElementById('eventId').value = '';
            } else if (type === 'service') {
                document.getElementById('serviceForm').reset();
                document.getElementById('serviceId').value = '';
                document.getElementById('pricingList').innerHTML = '';
            } else if (type === 'additionalService') {
                document.getElementById('additionalServiceForm').reset();
                document.getElementById('additionalServiceId').value = '';
            } else if (type === 'admin') {
                document.getElementById('adminForm').reset();
                document.getElementById('adminId').value = '';
                document.getElementById('adminEmail').disabled = false;
            }
        }

        // Settings
        async function loadSettings() {
            try {
                const result = await apiCall('/settings');
                const emails = result.data.notificationEmails || [];
                
                document.getElementById('notificationEmail1').value = emails[0] || '';
                document.getElementById('notificationEmail2').value = emails[1] || '';
                document.getElementById('notificationEmail3').value = emails[2] || '';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('settingsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const notificationEmails = [
                document.getElementById('notificationEmail1').value.trim(),
                document.getElementById('notificationEmail2').value.trim(),
                document.getElementById('notificationEmail3').value.trim()
            ].filter(email => email); // Remove empty entries
            
            try {
                await apiCall('/settings', 'PUT', { notificationEmails });
                showToast('Settings saved successfully');
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Utility: Debounce
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Auto-generate slug
        document.getElementById('eventName').addEventListener('input', (e) => {
            if (!document.getElementById('eventId').value) {
                document.getElementById('eventSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        document.getElementById('serviceName').addEventListener('input', (e) => {
            if (!document.getElementById('serviceId').value) {
                document.getElementById('serviceSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        document.getElementById('additionalServiceName').addEventListener('input', (e) => {
            if (!document.getElementById('additionalServiceId').value) {
                document.getElementById('additionalServiceSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        // Initialize
        if (authToken) {
            // Verify token is still valid
            apiCall('/profile')
                .then(result => {
                    currentAdmin = result.data;
                    localStorage.setItem('adminData', JSON.stringify(currentAdmin));
                    showAdminPanel();
                })
                .catch(() => {
                    logout();
                });
        } else {
            // If no token but have admin data, clear it
            localStorage.removeItem('adminData');
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeddingClikz Admin Console</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #C9A962;
            --gold-light: #E8D5A8;
            --gold-dark: #8B7340;
            --gold-gradient: linear-gradient(135deg, #C9A962 0%, #E8D5A8 50%, #C9A962 100%);
            --charcoal: #141414;
            --white: #FAFAFA;
            --bg-dark: #0A0A0A;
            --bg-card: #141414;
            --bg-card-hover: #1C1C1C;
            --text-muted: #5A5A5A;
            --text-light: #9A9A9A;
            --text-bright: #E0E0E0;
            --success: #4A9F5B;
            --warning: #E89B3C;
            --danger: #D15252;
            --info: #5A8FD4;
            --border-subtle: rgba(201, 169, 98, 0.12);
            --border-gold: rgba(201, 169, 98, 0.25);
            --shadow-gold: 0 0 30px rgba(201, 169, 98, 0.08);
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-elevated: 0 16px 48px rgba(0, 0, 0, 0.6);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: var(--bg-dark);
            color: var(--white);
            min-height: 100vh;
            font-size: 16px;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Login Page */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(201, 169, 98, 0.06) 0%, transparent 40%),
                radial-gradient(ellipse at 70% 80%, rgba(201, 169, 98, 0.04) 0%, transparent 40%),
                linear-gradient(180deg, #0A0A0A 0%, #0F0F0F 100%);
        }

        .login-box {
            background: linear-gradient(180deg, #161616 0%, #101010 100%);
            padding: 52px 44px;
            border-radius: 24px;
            border: 1px solid var(--border-gold);
            width: 100%;
            max-width: 420px;
            box-shadow: 
                var(--shadow-elevated),
                0 0 60px rgba(201, 169, 98, 0.06),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
            position: relative;
            overflow: hidden;
        }

        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gold-gradient);
            opacity: 0.7;
        }

        .login-box::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
            pointer-events: none;
        }

        .login-box h1 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            text-align: center;
            margin-bottom: 6px;
            font-size: 34px;
            font-weight: 500;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .login-box p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 40px;
            font-size: 13px;
            letter-spacing: 3px;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 26px;
            position: relative;
            z-index: 1;
        }

        .form-group label {
            display: block;
            color: var(--text-light);
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 12px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 15px 18px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--white);
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition-smooth);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1), 0 0 20px rgba(201, 169, 98, 0.05);
            background: rgba(0, 0, 0, 0.6);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        /* Password Toggle */
        .password-input-wrapper {
            position: relative;
            width: 100%;
        }

        .password-input-wrapper input {
            padding-right: 50px;
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: var(--transition-smooth);
        }

        .password-toggle:hover {
            color: var(--gold);
        }

        .password-toggle svg {
            width: 20px;
            height: 20px;
        }

        .password-toggle .eye-off {
            display: none;
        }

        .password-toggle.showing .eye-on {
            display: none;
        }

        .password-toggle.showing .eye-off {
            display: block;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            text-decoration: none;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: #0A0A0A;
            width: 100%;
            box-shadow: 0 4px 20px rgba(201, 169, 98, 0.25);
            position: relative;
            z-index: 1;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(201, 169, 98, 0.35);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-gold);
            color: var(--gold);
        }

        .btn-secondary:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold);
            color: var(--gold-light);
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .btn-icon:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold-dark);
            color: var(--gold);
        }

        .btn-icon svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
        }

        .btn-icon.loading svg {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; width: 30%; }
            50% { opacity: 0.7; width: 70%; }
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #A83232 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(209, 82, 82, 0.25);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #E06060 0%, var(--danger) 100%);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 10px 20px;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .error-message {
            background: rgba(209, 82, 82, 0.08);
            border: 1px solid rgba(209, 82, 82, 0.3);
            color: #E57373;
            padding: 14px 16px;
            border-radius: 10px;
            margin-bottom: 24px;
            text-align: center;
            display: none;
            font-size: 14px;
        }

        /* Admin Layout */
        .admin-layout {
            display: none;
        }

        /* App Bar */
        .app-bar {
            position: fixed;
            top: 0;
            left: 260px;
            right: 0;
            height: 70px;
            background: linear-gradient(180deg, #111111 0%, #0A0A0A 100%);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 36px;
            z-index: 100;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .app-bar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--gold);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: var(--transition-smooth);
        }

        .menu-toggle:hover {
            background: rgba(201, 169, 98, 0.1);
        }

        .menu-toggle svg {
            width: 24px;
            height: 24px;
        }

        .app-bar-title {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .app-bar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .app-bar-user {
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .app-bar-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            font-weight: 600;
            color: #0A0A0A;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .app-bar-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.2);
        }

        .app-bar-user-info {
            display: none;
        }

        .app-bar-user-name {
            color: var(--text-bright);
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .app-bar-user-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .app-bar-logout {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: transparent;
            border: 1px solid var(--border-gold);
            border-radius: 8px;
            color: var(--gold);
            font-size: 12px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .app-bar-logout:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: var(--gold);
        }

        .app-bar-logout svg {
            width: 16px;
            height: 16px;
        }

        /* User Dropdown Menu */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-gold);
            border-radius: 12px;
            padding: 16px;
            min-width: 240px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 10000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 12px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .user-dropdown::after {
            content: '';
            position: absolute;
            top: -7px;
            right: 13px;
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-bottom: 7px solid var(--bg-secondary);
        }

        .user-dropdown-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 12px;
        }

        .user-dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            color: #0A0A0A;
        }

        .user-dropdown-info {
            flex: 1;
        }

        .user-dropdown-name {
            color: var(--text-bright);
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-dropdown-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .user-dropdown-email {
            color: var(--gold);
            font-size: 12px;
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(201, 169, 98, 0.08);
            border-radius: 6px;
            word-break: break-all;
        }

        /* User Dropdown Menu */
        .user-dropdown {
            position: absolute;
            top: calc(100% + 12px);
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-gold);
            border-radius: 12px;
            padding: 16px;
            min-width: 240px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 10000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 12px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .user-dropdown::after {
            content: '';
            position: absolute;
            top: -7px;
            right: 13px;
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-bottom: 7px solid var(--bg-secondary);
        }

        .user-dropdown-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
            margin-bottom: 12px;
        }

        .user-dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            color: #0A0A0A;
        }

        .user-dropdown-info {
            flex: 1;
        }

        .user-dropdown-name {
            color: var(--text-bright);
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-dropdown-role {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .user-dropdown-email {
            color: var(--gold);
            font-size: 12px;
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(201, 169, 98, 0.08);
            border-radius: 6px;
            word-break: break-all;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: linear-gradient(180deg, #111111 0%, #0A0A0A 100%);
            border-right: 1px solid var(--border-subtle);
            padding: 0;
            overflow-y: auto;
            box-shadow: 4px 0 40px rgba(0, 0, 0, 0.4);
        }

        .sidebar::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        .sidebar-logo {
            padding: 32px 28px;
            border-bottom: 1px solid var(--border-subtle);
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.04) 0%, transparent 100%);
        }

        .sidebar-logo h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 2px;
            margin-bottom: 6px;
        }

        .sidebar-logo span {
            color: var(--text-muted);
            font-size: 11px;
            letter-spacing: 2.5px;
            text-transform: uppercase;
        }

        .nav-menu {
            list-style: none;
            padding: 20px 14px;
        }

        .nav-item {
            padding: 14px 20px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: block;
            color: var(--text-light);
            border-radius: 8px;
            margin-bottom: 6px;
            position: relative;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .nav-item:hover {
            background: rgba(201, 169, 98, 0.06);
            color: var(--gold-light);
            padding-left: 24px;
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(201, 169, 98, 0.12) 0%, transparent 100%);
            color: var(--gold);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: var(--gold);
            border-radius: 0 3px 3px 0;
        }

        .main-content {
            margin-left: 260px;
            margin-top: 70px;
            padding: 36px 44px;
            min-height: calc(100vh - 70px);
            background: 
                radial-gradient(ellipse at 80% 10%, rgba(201, 169, 98, 0.03) 0%, transparent 40%),
                linear-gradient(180deg, #0A0A0A 0%, #0E0E0E 100%);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            color: var(--text-bright);
            font-size: 24px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .user-info {
            display: none;
        }

        /* Dashboard Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(145deg, #151515 0%, #0F0F0F 100%);
            padding: 26px 28px;
            border-radius: 14px;
            border: 1px solid var(--border-subtle);
            box-shadow: var(--shadow-card);
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gold-gradient);
            opacity: 0.5;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-elevated), 0 0 40px rgba(201, 169, 98, 0.06);
            border-color: var(--border-gold);
        }

        .stat-card h3 {
            color: var(--text-muted);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 14px;
            font-weight: 500;
        }

        .stat-card .value {
            font-family: 'Playfair Display', serif;
            font-size: 38px;
            color: var(--gold);
            font-weight: 500;
            line-height: 1;
        }

        .stat-card .change {
            font-size: 12px;
            margin-top: 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 5px 12px;
            border-radius: 6px;
            font-weight: 500;
        }

        .stat-card .change.positive {
            color: #6ABF7B;
            background: rgba(74, 159, 91, 0.12);
        }

        .stat-card .change.negative {
            color: #E57373;
            background: rgba(209, 82, 82, 0.12);
        }

        /* Tables */
        .table-container {
            background: linear-gradient(180deg, #141414 0%, #0E0E0E 100%);
            border-radius: 14px;
            border: 1px solid var(--border-subtle);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        /* Offerings Subtabs */
        .offerings-tabs {
            display: flex;
            gap: 8px;
            padding: 20px 26px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.04) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-subtle);
        }

        .offerings-tab {
            padding: 12px 24px;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .offerings-tab:hover {
            background: rgba(201, 169, 98, 0.08);
            border-color: var(--gold-dark);
            color: var(--gold-light);
        }

        .offerings-tab.active {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-color: var(--gold);
            color: #0A0A0A;
            font-weight: 600;
        }

        .offerings-tab svg {
            width: 16px;
            height: 16px;
        }

        .offerings-tab.active svg {
            stroke: #0A0A0A;
        }

        .offerings-content {
            display: none;
        }

        .offerings-content.active {
            display: block;
        }

        /* Film Roll Grid */
        .film-roll-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }

        .film-roll-item {
            position: relative;
            aspect-ratio: 4/5;
            border-radius: 12px;
            overflow: hidden;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
        }

        .film-roll-item:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .film-roll-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .film-roll-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 1rem;
        }

        .film-roll-item:hover .film-roll-item-overlay {
            opacity: 1;
        }

        .film-roll-item-caption {
            color: var(--gold);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .film-roll-item-actions {
            display: flex;
            gap: 0.5rem;
        }

        .film-roll-item-actions button {
            padding: 0.4rem 0.75rem;
            border-radius: 6px;
            border: none;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .film-roll-item-actions .btn-edit {
            background: rgba(201, 169, 98, 0.2);
            color: var(--gold);
        }

        .film-roll-item-actions .btn-edit:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .film-roll-item-actions .btn-delete {
            background: rgba(209, 82, 82, 0.2);
            color: var(--danger);
        }

        .film-roll-item-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .film-roll-item-order {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: rgba(0,0,0,0.7);
            color: var(--gold);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .film-roll-item-status {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
        }

        .film-roll-item-status.active {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
        }

        .film-roll-item-status.inactive {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--danger);
        }

        .film-roll-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .film-roll-empty svg {
            width: 48px;
            height: 48px;
            stroke: var(--text-muted);
            margin-bottom: 1rem;
        }

        /* Archive Entries Grid */
        .archive-entries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .archive-entry-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
        }

        .archive-entry-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .archive-entry-cover {
            position: relative;
            aspect-ratio: 4/3;
            overflow: hidden;
        }

        .archive-entry-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .archive-entry-cover-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 60%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .archive-entry-card:hover .archive-entry-cover-overlay {
            opacity: 1;
        }

        .archive-entry-badge {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            background: rgba(0,0,0,0.7);
            color: var(--gold);
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .archive-entry-status {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .archive-entry-status.active {
            background: var(--success);
        }

        .archive-entry-status.inactive {
            background: var(--danger);
        }

        .archive-entry-info {
            padding: 1rem;
        }

        .archive-entry-couple {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .archive-entry-place {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .archive-entry-gallery-count {
            color: var(--text-secondary);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .archive-entry-gallery-count svg {
            width: 14px;
            height: 14px;
        }

        .archive-entry-actions {
            display: flex;
            gap: 0.5rem;
            padding: 0 1rem 1rem;
        }

        .archive-entry-actions button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 6px;
            border: none;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .archive-entry-actions button svg {
            width: 14px;
            height: 14px;
        }

        .archive-entry-actions .btn-gallery {
            background: rgba(201, 169, 98, 0.2);
            color: var(--gold);
        }

        .archive-entry-actions .btn-gallery:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .archive-entry-actions .btn-edit {
            background: rgba(100, 149, 237, 0.2);
            color: #6495ED;
        }

        .archive-entry-actions .btn-edit:hover {
            background: #6495ED;
            color: var(--white);
        }

        .archive-entry-actions .btn-delete {
            background: rgba(209, 82, 82, 0.2);
            color: var(--danger);
        }

        .archive-entry-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .archive-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .archive-empty svg {
            width: 48px;
            height: 48px;
            stroke: var(--text-muted);
            margin-bottom: 1rem;
        }

        /* Film Entries Grid */
        .film-entries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .film-entry-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
        }

        .film-entry-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .film-entry-thumbnail {
            position: relative;
            aspect-ratio: 16/9;
            overflow: hidden;
            background: #1a1a1a;
        }

        .film-entry-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .film-entry-play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: rgba(201, 169, 98, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .film-entry-card:hover .film-entry-play-icon {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
        }

        .film-entry-play-icon svg {
            width: 24px;
            height: 24px;
            fill: #1a1a1a;
            margin-left: 3px;
        }

        .film-entry-badge {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            background: rgba(0,0,0,0.7);
            color: var(--gold);
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .film-entry-duration {
            position: absolute;
            bottom: 0.75rem;
            right: 0.75rem;
            background: rgba(0,0,0,0.8);
            color: var(--white);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .film-entry-status {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .film-entry-status.active {
            background: var(--success);
        }

        .film-entry-status.inactive {
            background: var(--danger);
        }

        .film-entry-info {
            padding: 1rem;
        }

        .film-entry-title {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .film-entry-couple {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .film-entry-place {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .film-entry-source {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .film-entry-source svg {
            width: 16px;
            height: 16px;
        }

        .film-entry-actions {
            display: flex;
            gap: 0.5rem;
            padding: 0 1rem 1rem;
        }

        .film-entry-actions button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 6px;
            border: none;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .film-entry-actions button svg {
            width: 14px;
            height: 14px;
        }

        .film-entry-actions .btn-preview {
            background: rgba(201, 169, 98, 0.2);
            color: var(--gold);
        }

        .film-entry-actions .btn-preview:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .film-entry-actions .btn-edit {
            background: rgba(100, 149, 237, 0.2);
            color: #6495ED;
        }

        .film-entry-actions .btn-edit:hover {
            background: #6495ED;
            color: var(--white);
        }

        .film-entry-actions .btn-delete {
            background: rgba(209, 82, 82, 0.2);
            color: var(--danger);
        }

        .film-entry-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .film-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .film-empty svg {
            width: 48px;
            height: 48px;
            stroke: var(--text-muted);
            margin-bottom: 1rem;
        }

        /* Services Grid */
        .services-entries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .service-entry-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
        }

        .service-entry-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .service-entry-image {
            position: relative;
            aspect-ratio: 3/2;
            overflow: hidden;
            background: #1a1a1a;
        }

        .service-entry-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .service-entry-badge-tag {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            background: var(--gold);
            color: #1a1a1a;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .service-entry-status {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .service-entry-status.active {
            background: var(--success);
        }

        .service-entry-status.inactive {
            background: var(--danger);
        }

        .service-entry-info {
            padding: 1.25rem;
        }

        .service-entry-title {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .service-entry-description {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .service-entry-features {
            list-style: none;
            padding: 0;
            margin: 0 0 0.75rem 0;
        }

        .service-entry-features li {
            color: var(--text-muted);
            font-size: 0.8rem;
            padding: 0.25rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .service-entry-features li svg {
            width: 14px;
            height: 14px;
            stroke: var(--gold);
            flex-shrink: 0;
        }

        .service-entry-actions {
            display: flex;
            gap: 0.5rem;
            padding: 0 1.25rem 1.25rem;
        }

        .service-entry-actions button {
            flex: 1;
            padding: 0.6rem;
            border-radius: 6px;
            border: none;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .service-entry-actions button svg {
            width: 14px;
            height: 14px;
        }

        .service-entry-actions .btn-edit {
            background: rgba(100, 149, 237, 0.2);
            color: #6495ED;
        }

        .service-entry-actions .btn-edit:hover {
            background: #6495ED;
            color: var(--white);
        }

        .service-entry-actions .btn-delete {
            background: rgba(209, 82, 82, 0.2);
            color: var(--danger);
        }

        .service-entry-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .services-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .services-empty svg {
            width: 48px;
            height: 48px;
            stroke: var(--text-muted);
            margin-bottom: 1rem;
        }

        .services-loading {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        /* Testimonials Grid */
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .testimonial-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
            position: relative;
        }

        .testimonial-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .testimonial-photo {
            display: none;
        }

        .testimonial-photo img {
            display: none;
        }

        .testimonial-photo-placeholder {
            display: none;
        }

        .testimonial-client-info {
            flex: 1;
        }

        .testimonial-client-name {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.15rem;
        }

        .testimonial-rating {
            display: flex;
            gap: 2px;
            margin-bottom: 0.75rem;
        }

        .testimonial-rating svg {
            width: 16px;
            height: 16px;
            fill: var(--gold);
        }

        .testimonial-rating svg.empty {
            fill: var(--text-muted);
            opacity: 0.3;
        }

        .testimonial-content {
            color: var(--text-light);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 0.75rem;
            font-style: italic;
        }

        .testimonial-date {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .testimonial-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .testimonial-status.active {
            background: var(--success);
        }

        .testimonial-status.inactive {
            background: var(--danger);
        }

        .testimonial-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .testimonial-actions button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 6px;
            border: none;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .testimonial-actions button svg {
            width: 14px;
            height: 14px;
        }

        .testimonial-actions .btn-edit {
            background: rgba(201, 169, 98, 0.15);
            color: var(--gold);
        }

        .testimonial-actions .btn-edit:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .testimonial-actions .btn-delete {
            background: rgba(209, 82, 82, 0.15);
            color: var(--danger);
        }

        .testimonial-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .testimonials-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        .testimonials-empty svg {
            width: 48px;
            height: 48px;
            stroke: var(--text-muted);
            margin-bottom: 1rem;
        }

        .testimonials-loading {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        /* About Section Styles */
        .about-story-preview {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-subtle);
        }

        .about-story-preview .story-section {
            margin-bottom: 1.5rem;
        }

        .about-story-preview .story-section:last-child {
            margin-bottom: 0;
        }

        .about-story-preview .story-label {
            color: var(--gold);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .about-story-preview .story-title {
            color: var(--text-light);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .about-story-preview .story-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .about-story-preview .cover-image-preview {
            margin-top: 1.5rem;
            border-top: 1px solid var(--border-subtle);
            padding-top: 1.5rem;
        }

        .about-story-preview .cover-image-preview img {
            max-width: 300px;
            max-height: 180px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .about-story-loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }

        .about-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 1.25rem;
            border: 1px solid var(--border-subtle);
            text-align: center;
            position: relative;
            transition: var(--transition-smooth);
        }

        .stat-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .stat-value {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-actions {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.25rem;
            opacity: 0;
            transition: var(--transition-smooth);
        }

        .stat-card:hover .stat-actions {
            opacity: 1;
        }

        .stat-actions button {
            background: transparent;
            border: none;
            padding: 0.35rem;
            cursor: pointer;
            border-radius: 4px;
            transition: var(--transition-smooth);
        }

        .stat-actions button svg {
            width: 14px;
            height: 14px;
        }

        .stat-actions .edit-btn {
            color: var(--gold);
        }

        .stat-actions .edit-btn:hover {
            background: rgba(201, 169, 98, 0.2);
        }

        .stat-actions .delete-btn {
            color: var(--danger);
        }

        .stat-actions .delete-btn:hover {
            background: rgba(209, 82, 82, 0.2);
        }

        .about-stats-empty, .team-members-empty {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            background: var(--bg-card);
            border-radius: 10px;
            border: 1px dashed var(--border-subtle);
        }

        .team-members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .team-member-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
            position: relative;
        }

        .team-member-card:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .team-member-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .team-member-photo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            background: var(--bg-card-hover);
            flex-shrink: 0;
            border: 2px solid var(--border-gold);
        }

        .team-member-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .team-member-photo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: #0A0A0A;
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .team-member-info {
            flex: 1;
        }

        .team-member-name {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            margin-bottom: 0.15rem;
        }

        .team-member-role {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .team-member-bio {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .team-member-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .team-member-status.active {
            background: var(--success);
        }

        .team-member-status.inactive {
            background: var(--danger);
        }

        .team-member-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .team-member-actions button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 6px;
            border: none;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .team-member-actions button svg {
            width: 14px;
            height: 14px;
        }

        .team-member-actions .btn-edit {
            background: rgba(201, 169, 98, 0.15);
            color: var(--gold);
        }

        .team-member-actions .btn-edit:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .team-member-actions .btn-delete {
            background: rgba(209, 82, 82, 0.15);
            color: var(--danger);
        }

        .team-member-actions .btn-delete:hover {
            background: var(--danger);
            color: var(--white);
        }

        .team-members-loading {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--text-muted);
        }

        /* Why Choose Us Cards Grid */
        .why-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .why-card-item {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.25rem;
            border: 1px solid var(--border-subtle);
            transition: var(--transition-smooth);
            position: relative;
        }

        .why-card-item:hover {
            border-color: var(--gold);
            box-shadow: var(--shadow-gold);
        }

        .why-card-item.featured {
            border-color: var(--gold);
            background: linear-gradient(135deg, rgba(201, 169, 98, 0.08), rgba(201, 169, 98, 0.02));
        }

        .why-card-item.inactive {
            opacity: 0.6;
        }

        .why-card-item .why-card-header {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .why-card-item .why-card-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15), rgba(212, 175, 55, 0.05));
            border-radius: 8px;
            flex-shrink: 0;
        }

        .why-card-item .why-card-icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--gold);
            fill: none;
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .why-card-item .why-card-info {
            flex: 1;
        }

        .why-card-item .why-card-info h4 {
            color: var(--gold);
            font-family: 'Playfair Display', serif;
            font-size: 1.05rem;
            margin: 0 0 0.25rem 0;
        }

        .why-card-item .why-card-order {
            color: var(--text-muted);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .why-card-item .badge {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .why-card-item .featured-badge {
            background: rgba(201, 169, 98, 0.2);
            color: var(--gold);
        }

        .why-card-item .inactive-badge {
            background: rgba(209, 82, 82, 0.2);
            color: var(--danger);
            margin-left: 0.35rem;
        }

        .why-card-item .why-card-desc {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.5;
            margin: 0 0 0.5rem 0;
        }

        .why-card-item .why-card-highlight {
            display: inline-block;
            color: var(--gold);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .why-card-item .why-card-destinations {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
            margin-top: 0.5rem;
        }

        .why-card-item .dest-tag {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            background: rgba(201, 169, 98, 0.1);
            border: 1px solid rgba(201, 169, 98, 0.25);
            border-radius: 12px;
            font-size: 0.65rem;
            color: var(--gold-light);
        }

        .why-card-item .why-card-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-subtle);
        }

        .why-card-item .why-card-actions button {
            flex: 1;
            padding: 0.5rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .why-card-item .why-card-actions .edit-btn {
            background: rgba(201, 169, 98, 0.15);
            color: var(--gold);
        }

        .why-card-item .why-card-actions .edit-btn:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .why-card-item .why-card-actions .delete-btn {
            background: rgba(209, 82, 82, 0.15);
            color: var(--danger);
        }

        .why-card-item .why-card-actions .delete-btn:hover {
            background: var(--danger);
            color: var(--white);
        }

        /* Icon Picker Grid */
        .icon-picker-container {
            margin-top: 0.25rem;
        }

        .icon-picker-selected {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition-smooth);
            margin-bottom: 8px;
        }

        .icon-picker-selected:hover {
            border-color: var(--gold);
            background: rgba(0, 0, 0, 0.6);
        }

        .icon-picker-selected .selected-icon-preview {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(201, 169, 98, 0.15), rgba(201, 169, 98, 0.05));
            border-radius: 8px;
            flex-shrink: 0;
        }

        .icon-picker-selected .selected-icon-preview svg {
            width: 18px;
            height: 18px;
            stroke: var(--gold);
            fill: none;
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .icon-picker-selected .selected-icon-label {
            color: var(--text-light);
            font-size: 14px;
            flex: 1;
        }

        .icon-picker-selected .picker-arrow {
            color: var(--text-muted);
            transition: transform 0.2s ease;
        }

        .icon-picker-selected .picker-arrow.open {
            transform: rotate(180deg);
        }

        .icon-picker-grid-wrapper {
            display: none;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-gold);
            border-radius: 12px;
            padding: 12px;
            max-height: 320px;
            overflow-y: auto;
        }

        .icon-picker-grid-wrapper.open {
            display: block;
        }

        .icon-picker-grid-wrapper::-webkit-scrollbar {
            width: 6px;
        }

        .icon-picker-grid-wrapper::-webkit-scrollbar-track {
            background: transparent;
        }

        .icon-picker-grid-wrapper::-webkit-scrollbar-thumb {
            background: var(--border-gold);
            border-radius: 3px;
        }

        .icon-picker-category {
            margin-bottom: 10px;
        }

        .icon-picker-category:last-child {
            margin-bottom: 0;
        }

        .icon-picker-category-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            padding: 4px 6px;
            margin-bottom: 6px;
        }

        .icon-picker-icons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(44px, 1fr));
            gap: 4px;
        }

        .icon-picker-item {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid transparent;
            background: rgba(255, 255, 255, 0.03);
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
        }

        .icon-picker-item:hover {
            background: rgba(201, 169, 98, 0.12);
            border-color: var(--border-gold);
            transform: scale(1.1);
        }

        .icon-picker-item.selected {
            background: rgba(201, 169, 98, 0.2);
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(201, 169, 98, 0.15);
        }

        .icon-picker-item svg {
            width: 20px;
            height: 20px;
            stroke: var(--gold);
            fill: none;
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .icon-picker-item .icon-picker-tooltip {
            display: none;
            position: absolute;
            bottom: calc(100% + 6px);
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a1a;
            border: 1px solid var(--border-gold);
            color: var(--gold-light);
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 6px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 10;
        }

        .icon-picker-item:hover .icon-picker-tooltip {
            display: block;
        }

        /* Features List in Modal */
        .features-list-container {
            margin-top: 0.5rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            background: var(--bg-card);
            padding: 0.5rem;
            border-radius: 6px;
            border: 1px solid var(--border-subtle);
        }

        .feature-item input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            padding: 0.25rem;
        }

        .feature-item input:focus {
            outline: none;
        }

        .feature-item button {
            background: transparent;
            border: none;
            color: var(--danger);
            cursor: pointer;
            padding: 0.25rem;
        }

        .feature-item button:hover {
            color: #ff6b6b;
        }

        .add-feature-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(201, 169, 98, 0.1);
            border: 1px dashed var(--gold);
            color: var(--gold);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            transition: all 0.2s ease;
        }

        .add-feature-btn:hover {
            background: rgba(201, 169, 98, 0.2);
        }

        /* Gallery Grid in Modal */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-item-delete {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(209, 82, 82, 0.9);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .gallery-item:hover .gallery-item-delete {
            opacity: 1;
        }

        .gallery-item-delete svg {
            width: 14px;
            height: 14px;
        }

        /* Upload Drop Zone */
        .upload-dropzone {
            border: 2px dashed var(--border-gold);
            border-radius: 12px;
            padding: 3rem 2rem;
            text-align: center;
            background: rgba(201, 169, 98, 0.03);
            cursor: pointer;
            transition: var(--transition-smooth);
            margin-bottom: 1.5rem;
        }

        .upload-dropzone:hover,
        .upload-dropzone.dragover {
            border-color: var(--gold);
            background: rgba(201, 169, 98, 0.08);
        }

        .upload-dropzone svg {
            width: 48px;
            height: 48px;
            stroke: var(--gold);
            margin-bottom: 1rem;
        }

        .upload-dropzone h4 {
            color: var(--text-bright);
            margin-bottom: 0.5rem;
        }

        .upload-dropzone p {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .upload-dropzone input[type="file"] {
            display: none;
        }

        /* Video Source Tabs */
        .video-source-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .video-tab {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-subtle);
            background: var(--bg-card);
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .video-tab:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .video-tab.active {
            background: var(--gold);
            border-color: var(--gold);
            color: var(--bg-primary);
        }

        .upload-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .upload-preview-item {
            position: relative;
            aspect-ratio: 4/5;
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-card);
        }

        .upload-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-preview-item .remove-btn {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--danger);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .upload-progress {
            margin-top: 1rem;
        }

        .upload-progress-bar {
            height: 4px;
            background: var(--border-subtle);
            border-radius: 2px;
            overflow: hidden;
        }

        .upload-progress-fill {
            height: 100%;
            background: var(--gold);
            transition: width 0.3s ease;
        }

        /* Offerings Header with Info */
        .offerings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 26px;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.06) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-subtle);
        }

        .offerings-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .offerings-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 22px;
            font-weight: 500;
            letter-spacing: 0.5px;
            margin: 0;
        }

        .info-icon-wrapper {
            position: relative;
            display: inline-flex;
        }

        .info-icon {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: rgba(201, 169, 98, 0.15);
            border: 1px solid var(--gold-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            color: var(--gold);
        }

        .info-icon:hover {
            background: var(--gold);
            color: #0A0A0A;
        }

        .info-icon svg {
            width: 14px;
            height: 14px;
        }

        .info-tooltip {
            position: absolute;
            top: calc(100% + 12px);
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            width: 420px;
            max-height: 80vh;
            overflow-y: auto;
            background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
            border: 1px solid var(--border-gold);
            border-radius: 14px;
            padding: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .info-tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid var(--border-gold);
        }

        .info-tooltip::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid #1a1a1a;
        }

        .info-icon-wrapper:hover .info-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .info-tooltip-title {
            font-family: 'Playfair Display', serif;
            font-size: 16px;
            color: var(--gold);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-tooltip-title svg {
            width: 18px;
            height: 18px;
        }

        .info-tooltip-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-tooltip-list li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(201, 169, 98, 0.1);
            font-size: 13px;
            color: var(--text-light);
            line-height: 1.5;
        }

        .info-tooltip-list li:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .info-tooltip-list li strong {
            color: var(--gold-light);
            font-weight: 600;
        }

        .info-tooltip-bullet {
            width: 20px;
            height: 20px;
            min-width: 20px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: #0A0A0A;
            margin-top: 1px;
        }

        .info-tooltip-section {
            margin-bottom: 14px;
        }

        .info-tooltip-section:last-child {
            margin-bottom: 0;
        }

        .info-tooltip-section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: var(--gold-light);
            margin-bottom: 6px;
        }

        .info-tooltip-section p {
            margin: 0 0 0 30px;
            font-size: 12px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .info-tooltip-section em {
            color: var(--gold);
            font-style: normal;
            font-weight: 500;
        }

        .info-tooltip-sublist {
            list-style: none;
            padding: 0;
            margin: 8px 0 0 30px;
        }

        .info-tooltip-sublist li {
            font-size: 11px;
            color: var(--text-muted);
            padding: 3px 0;
            padding-left: 12px;
            position: relative;
        }

        .info-tooltip-sublist li::before {
            content: '';
            position: absolute;
            left: 0;
            color: var(--gold);
        }

        .info-tooltip-sublist li strong {
            color: var(--gold-light);
            font-weight: 600;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px 26px;
            border-bottom: 1px solid var(--border-subtle);
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
        }

        .table-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 20px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .search-box {
            display: flex;
            gap: 12px;
        }

        .search-box input {
            padding: 10px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--white);
            width: 240px;
            transition: var(--transition-smooth);
            font-size: 14px;
        }

        .search-box input:focus {
            border-color: var(--gold-dark);
            outline: none;
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.08);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 14px 22px;
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        th {
            background: rgba(201, 169, 98, 0.04);
            color: var(--text-light);
            font-weight: 600;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        td {
            color: var(--text-bright);
            font-size: 14px;
        }

        tr {
            transition: var(--transition-smooth);
        }

        tbody tr:hover {
            background: rgba(201, 169, 98, 0.04);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .status-sent { background: rgba(90, 143, 212, 0.12); color: #7EB3F0; }
        .status-viewed { background: rgba(232, 155, 60, 0.12); color: #F0B860; }
        .status-accepted { background: rgba(74, 159, 91, 0.12); color: #6ABF7B; }
        .status-rejected { background: rgba(209, 82, 82, 0.12); color: #E57373; }
        .status-expired { background: rgba(128, 128, 128, 0.12); color: #A0A0A0; }
        .status-draft { background: rgba(128, 128, 128, 0.12); color: #A0A0A0; }
        .status-active { background: rgba(74, 159, 91, 0.12); color: #6ABF7B; }
        .status-inactive { background: rgba(209, 82, 82, 0.12); color: #E57373; }

        .actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-smooth);
            font-size: 14px;
        }

        .action-btn.edit {
            background: rgba(90, 143, 212, 0.12);
            color: #7EB3F0;
        }

        .action-btn.delete {
            background: rgba(209, 82, 82, 0.12);
            color: #E57373;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .action-btn.edit:hover {
            background: rgba(90, 143, 212, 0.2);
            box-shadow: 0 4px 12px rgba(90, 143, 212, 0.15);
        }

        .action-btn.delete:hover {
            background: rgba(209, 82, 82, 0.2);
            box-shadow: 0 4px 12px rgba(209, 82, 82, 0.15);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(6px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 99999;
        }

        .modal-overlay.active {
            display: flex !important;
        }

        .modal {
            background: linear-gradient(180deg, #1a1a1a 0%, #111111 100%);
            border-radius: 16px;
            border: 1px solid var(--border-gold);
            width: calc(100% - 40px);
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.8), 0 0 60px rgba(201, 169, 98, 0.1);
            transform: scale(1);
            opacity: 1;
        }

        .modal::-webkit-scrollbar {
            width: 4px;
        }

        .modal::-webkit-scrollbar-track {
            background: transparent;
        }

        .modal::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        .modal-header {
            padding: 22px 26px;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(180deg, rgba(201, 169, 98, 0.03) 0%, transparent 100%);
        }

        .modal-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            font-size: 20px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-muted);
            font-size: 18px;
            cursor: pointer;
            width: 34px;
            height: 34px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-smooth);
        }

        .modal-close:hover {
            background: rgba(209, 82, 82, 0.15);
            color: #E57373;
        }

        /* Quote Details Invoice Styling */
        .quote-invoice {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
        }

        .quote-invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--gold);
        }

        .quote-invoice-logo h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--charcoal);
            margin-bottom: 0.25rem;
        }

        .quote-invoice-logo h2 span {
            color: var(--gold);
        }

        .quote-invoice-logo p {
            font-size: 0.85rem;
            color: var(--text-light);
            margin: 0;
        }

        .quote-invoice-badge {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--white);
            padding: 0.5rem 1.25rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quote-invoice-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .quote-invoice-meta-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quote-invoice-meta-item label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            font-weight: 600;
        }

        .quote-invoice-meta-item span {
            font-size: 1rem;
            color: var(--charcoal);
            font-weight: 500;
        }

        .quote-invoice-parties {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--cream);
            border-radius: 8px;
        }

        .quote-invoice-party h4 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .quote-invoice-party p {
            margin: 0.25rem 0;
            color: var(--charcoal);
            font-size: 0.95rem;
        }

        .quote-invoice-party strong {
            color: var(--gold-dark);
        }

        .quote-invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }

        .quote-invoice-table thead {
            background: var(--cream);
        }

        .quote-invoice-table th {
            padding: 0.75rem 1rem;
            text-align: left;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-light);
            font-weight: 600;
            border-bottom: 2px solid var(--gold-light);
        }

        .quote-invoice-table th:last-child {
            text-align: right;
        }

        .quote-invoice-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .quote-invoice-table td:last-child {
            text-align: right;
            font-weight: 600;
            color: var(--gold-dark);
        }

        .quote-invoice-table .event-row {
            background: rgba(201, 168, 124, 0.05);
            font-weight: 600;
        }

        .quote-invoice-table .event-row td {
            color: var(--charcoal);
        }

        .quote-invoice-table .service-row td:first-child {
            padding-left: 2rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .quote-invoice-totals {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 2rem;
        }

        .quote-invoice-totals-box {
            min-width: 300px;
        }

        .quote-invoice-totals-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .quote-invoice-totals-row.total {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--white);
            border: none;
            border-radius: 8px;
            margin-top: 0.5rem;
            font-size: 1.1rem;
        }

        .quote-invoice-totals-row.total span:last-child {
            font-size: 1.5rem;
            font-family: 'Playfair Display', serif;
        }

        .modal-body {
            padding: 26px;
        }

        .modal-footer {
            padding: 18px 26px;
            border-top: 1px solid var(--border-subtle);
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            background: rgba(0, 0, 0, 0.15);
        }

        /* Sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
        }

        .toast {
            background: linear-gradient(145deg, #181818 0%, #101010 100%);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 14px 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: var(--shadow-elevated);
            min-width: 280px;
            font-size: 14px;
        }

        .toast.success { 
            border-left: 3px solid #6ABF7B;
            background: linear-gradient(145deg, rgba(74, 159, 91, 0.08) 0%, #101010 100%);
        }
        .toast.error { 
            border-left: 3px solid #E57373;
            background: linear-gradient(145deg, rgba(209, 82, 82, 0.08) 0%, #101010 100%);
        }
        .toast.warning { 
            border-left: 3px solid #F0B860;
            background: linear-gradient(145deg, rgba(232, 155, 60, 0.08) 0%, #101010 100%);
        }

        @keyframes slideIn {
            from {
                transform: translateX(120%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Pricing Editor */
        .pricing-list {
            margin-top: 12px;
        }

        .pricing-item {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            align-items: center;
            padding: 12px 14px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .pricing-item select {
            flex: 1;
        }

        .pricing-item input {
            width: 120px;
        }

        .pricing-item button {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            background: rgba(209, 82, 82, 0.12);
            color: #E57373;
            transition: var(--transition-smooth);
        }

        .pricing-item button:hover {
            background: rgba(209, 82, 82, 0.2);
        }

        .add-pricing-btn {
            background: rgba(74, 159, 91, 0.12);
            color: #6ABF7B;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 500;
            transition: var(--transition-smooth);
        }

        .add-pricing-btn:hover {
            background: rgba(74, 159, 91, 0.2);
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 52px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-subtle);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Pagination */
        .pagination-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(201, 169, 98, 0.02);
        }

        .pagination-info {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pagination-info span {
            color: var(--gold);
            font-weight: 600;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pagination-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--border-subtle);
            background: var(--card-bg);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-smooth);
        }

        .pagination-btn:hover:not(:disabled) {
            border-color: var(--gold);
            color: var(--gold);
            background: rgba(201, 169, 98, 0.1);
        }

        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .pagination-btn svg {
            width: 16px;
            height: 16px;
        }

        .pagination-pages {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .pagination-page {
            min-width: 36px;
            height: 36px;
            padding: 0 8px;
            border: 1px solid transparent;
            background: transparent;
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all var(--transition-smooth);
        }

        .pagination-page:hover:not(.active):not(.ellipsis) {
            border-color: var(--border-subtle);
            background: rgba(255, 255, 255, 0.05);
        }

        .pagination-page.active {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: #0A0A0A;
            font-weight: 600;
            border-color: var(--gold);
        }

        .pagination-page.ellipsis {
            cursor: default;
            color: var(--text-muted);
        }

        .pagination-per-page {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 16px;
            padding-left: 16px;
            border-left: 1px solid var(--border-subtle);
        }

        .pagination-per-page label {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pagination-per-page select {
            padding: 6px 10px;
            border: 1px solid var(--border-subtle);
            background: var(--card-bg);
            border-radius: 6px;
            color: var(--text-light);
            font-size: 13px;
            cursor: pointer;
            transition: all var(--transition-smooth);
        }

        .pagination-per-page select:hover {
            border-color: var(--gold);
        }

        .pagination-per-page select:focus {
            outline: none;
            border-color: var(--gold);
        }

        @media (max-width: 768px) {
            .pagination-container {
                flex-direction: column;
                gap: 12px;
            }

            .pagination-controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            .pagination-per-page {
                margin-left: 0;
                padding-left: 0;
                border-left: none;
            }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 220px;
            }

            .main-content {
                margin-left: 220px;
                padding: 28px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                z-index: 100;
                width: 260px;
            }

            .main-content {
                margin-left: 0;
                padding: 20px 16px;
            }

            .header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                display: block;
                overflow-x: auto;
            }

            .modal {
                margin: 16px;
                max-width: calc(100% - 32px);
            }

            /* App Bar responsive */
            .app-bar {
                left: 0;
                padding: 0 20px;
            }

            .menu-toggle {
                display: flex;
            }

            .app-bar-user-info {
                display: none;
            }

            .app-bar-logout span {
                display: none;
            }

            .app-bar-logout {
                padding: 10px;
            }

            /* Sidebar overlay for mobile */
            .sidebar {
                transform: translateX(-100%);
                z-index: 200;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.6);
                z-index: 150;
                backdrop-filter: blur(4px);
            }

            .sidebar-overlay.active {
                display: block;
            }

            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h1>WeddingClikz</h1>
            <p>Admin Console</p>
            <div class="error-message" id="loginError"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required placeholder="admin@example.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="loginPassword" required placeholder="">
                        <button type="button" class="password-toggle" id="togglePassword" onclick="togglePasswordVisibility()">
                            <svg class="eye-on" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <svg class="eye-off" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                            </svg>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
        </div>
    </div>

    <!-- Admin Layout -->
    <div class="admin-layout" id="adminLayout">
        <!-- Sidebar Overlay (for mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

        <!-- App Bar -->
        <div class="app-bar">
            <div class="app-bar-left">
                <button class="menu-toggle" id="menuToggle" onclick="toggleSidebar()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <h1 class="app-bar-title" id="appBarTitle">Dashboard</h1>
            </div>
            <div class="app-bar-right">
                <div class="app-bar-user">
                    <div class="app-bar-avatar" id="appBarAvatar">A</div>
                    <div class="app-bar-user-info">
                        <span class="app-bar-user-name" id="appBarUserName">Admin</span>
                        <span class="app-bar-user-role">Administrator</span>
                    </div>
                    <!-- User Dropdown Menu -->
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-header">
                            <div class="user-dropdown-avatar" id="dropdownAvatar">A</div>
                            <div class="user-dropdown-info">
                                <div class="user-dropdown-name" id="dropdownName">Admin</div>
                                <div class="user-dropdown-role">Administrator</div>
                            </div>
                        </div>
                        <div class="user-dropdown-email" id="dropdownEmail">admin@example.com</div>
                    </div>
                </div>
                <button class="app-bar-logout" id="appBarLogout">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <h2>WeddingClikz</h2>
                <span>Admin Console</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">Dashboard</li>
                <li class="nav-item" data-section="offerings">Offerings</li>
                <li class="nav-item" data-section="website">Website Controls</li>
                <li class="nav-item" data-section="quotes">Quotes</li>
                <li class="nav-item" data-section="users">Customers</li>
                <li class="nav-item" data-section="admins">Admins</li>
                <li class="nav-item" data-section="settings">Email Notifications</li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-info">
                    <span id="adminName">Admin</span>
                    <button class="btn btn-secondary btn-sm" id="logoutBtn">Logout</button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section class="section active" id="dashboardSection">
                <div class="table-header" style="margin-bottom: 2rem;">
                    <h2>Statistics</h2>
                    <button class="btn-icon" id="refreshDashboardBtn" title="Refresh Dashboard">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                    </button>
                </div>
                <div class="stats-grid" id="statsGrid">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h2>Recent Quotes</h2>
                        <button class="btn btn-secondary btn-sm" onclick="navigateToSection('quotes')">View All</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Quote #</th>
                                <th>Customer</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recentQuotesTable">
                            <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Offerings Section (Combined Events, Services, Additional Services) -->
            <section class="section" id="offeringsSection">
                <!-- Header with Info Icon -->
                <div class="offerings-header">
                    <div class="offerings-header-left">
                        <h2>Manage Offerings</h2>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div class="info-tooltip">
                                <div class="info-tooltip-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                    </svg>
                                    How to Manage Offerings
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">1</span>
                                        <strong>Events</strong>  Occasion Types
                                    </div>
                                    <p>Events represent the types of occasions you cover (e.g., Wedding, Engagement, Pre-Wedding, Birthday). Each event is assigned a <em>pricing category</em> (Category A, B, or C) which determines how services are priced for that event.</p>
                                    <ul class="info-tooltip-sublist">
                                        <li><strong>Category A:</strong> Premium events with highest service rates</li>
                                        <li><strong>Category B:</strong> Standard events with mid-tier pricing</li>
                                        <li><strong>Category C:</strong> Budget-friendly events with lower rates</li>
                                    </ul>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">2</span>
                                        <strong>Services</strong>  What You Offer
                                    </div>
                                    <p>Services are your core offerings (e.g., Photography, Videography, Drone Coverage). Each service has <em>three different prices</em>  one for each pricing category. When a customer selects an event, the quote automatically uses the correct price based on that event's category.</p>
                                    <p style="margin-top: 6px; color: var(--gold);"><strong>Example:</strong> If Photography costs 50,000 for Category A and a customer books a Wedding (Category A event), they'll see the 50,000 price.</p>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">3</span>
                                        <strong>Add-ons</strong>  Optional Extras
                                    </div>
                                    <p>Add-ons are supplementary items customers can include with any event (e.g., Extra Album, Drone Footage, Same-Day Edit). Unlike services, add-ons have a <em>flat price</em> that remains the same regardless of the event category.</p>
                                </div>
                                <div class="info-tooltip-section">
                                    <div class="info-tooltip-section-title">
                                        <span class="info-tooltip-bullet">4</span>
                                        <strong>Active/Inactive</strong>  Visibility Control
                                    </div>
                                    <p>Toggle items as Active or Inactive to control what customers see. Inactive items are <em>hidden</em> from the quote builder but remain in your system  perfect for seasonal offerings or temporarily unavailable services.</p>
                                </div>
                                <div class="info-tooltip-section" style="border-top: 1px solid rgba(201, 169, 98, 0.2); padding-top: 12px; margin-top: 8px;">
                                    <p style="margin: 0; font-size: 11px; color: var(--text-muted);"><strong> Tip:</strong> Start by creating your Events first, then add Services with category-based pricing, and finally add any optional Add-ons.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subtabs -->
                <div class="offerings-tabs">
                    <button class="offerings-tab active" data-subtab="events">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        Events
                    </button>
                    <button class="offerings-tab" data-subtab="services">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        Services
                    </button>
                    <button class="offerings-tab" data-subtab="additionalServices">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Add-ons
                    </button>
                </div>

                <!-- Events Content -->
                <div class="offerings-content active" id="eventsContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Events</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('event')">+ Add Event</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Icon</th>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Category</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="eventsTable">
                                <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Services Content -->
                <div class="offerings-content" id="servicesContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Services</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('service')">+ Add Service</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Pricing</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTable">
                                <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Additional Services Content -->
                <div class="offerings-content" id="additionalServicesContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Additional Services</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openModal('additionalService')">+ Add Add-on</button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Slug</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="additionalServicesTable">
                                <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Quotes Section -->
            <section class="section" id="quotesSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Quotes</h2>
                        <div class="search-box">
                            <input type="text" id="quoteSearch" placeholder="Search quotes...">
                            <select id="quoteStatusFilter">
                                <option value="">All Status</option>
                                <option value="draft">Draft</option>
                                <option value="sent">Sent</option>
                                <option value="viewed">Viewed</option>
                                <option value="accepted">Accepted</option>
                                <option value="rejected">Rejected</option>
                                <option value="expired">Expired</option>
                            </select>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Quote #</th>
                                <th>Customer</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="quotesTable">
                            <tr><td colspan="7" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                    <!-- Pagination -->
                    <div class="pagination-container" id="quotesPagination">
                        <div class="pagination-info">
                            Showing <span id="quotesShowingStart">0</span>-<span id="quotesShowingEnd">0</span> of <span id="quotesTotalCount">0</span> quotes
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="quotesPrevBtn" onclick="changeQuotesPage(-1)" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <div class="pagination-pages" id="quotesPaginationPages">
                                <!-- Page numbers will be rendered here -->
                            </div>
                            <button class="pagination-btn" id="quotesNextBtn" onclick="changeQuotesPage(1)" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </button>
                            <div class="pagination-per-page">
                                <label>Per page:</label>
                                <select id="quotesPerPage" onchange="changeQuotesPerPage()">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customers Section -->
            <section class="section" id="usersSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Customers</h2>
                        <div class="search-box">
                            <input type="text" id="userSearch" placeholder="Search customers...">
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Quotes</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr><td colspan="5" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                    
                    <!-- Customers Pagination Controls -->
                    <div class="pagination-container" id="customersPaginationContainer" style="display: none;">
                        <div class="pagination-info">
                            <span id="customersPageInfo">Showing 0 of 0 customers</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="customersPrevBtn" onclick="changeCustomersPage('prev')" disabled>
                                 Previous
                            </button>
                            <div class="pagination-pages" id="customersPaginationPages">
                                <!-- Page numbers will be inserted here -->
                            </div>
                            <button class="pagination-btn" id="customersNextBtn" onclick="changeCustomersPage('next')" disabled>
                                Next 
                            </button>
                        </div>
                        <div class="pagination-per-page">
                            <label for="customersPerPage">Per page:</label>
                            <select id="customersPerPage" onchange="changeCustomersPerPage()">
                                <option value="5">5</option>
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admins Section -->
            <section class="section" id="adminsSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Admin Users</h2>
                        <div class="search-box">
                            <button class="btn btn-primary btn-sm" onclick="openModal('admin')">+ Add Admin</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="adminsTable">
                            <tr><td colspan="6" class="loading"><div class="spinner"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Email Notifications Section -->
            <section class="section" id="settingsSection">
                <div class="table-container">
                    <div class="table-header">
                        <h2>Email Notifications</h2>
                    </div>
                    <div class="modal-body">
                        <p style="color: var(--text-muted); margin-bottom: 20px;">Configure email addresses that will receive a copy of customer quotes. Maximum 3 emails allowed.</p>
                        <form id="settingsForm">
                            <div class="form-group">
                                <label>Notification Email 1</label>
                                <input type="email" id="notificationEmail1" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label>Notification Email 2</label>
                                <input type="email" id="notificationEmail2" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label>Notification Email 3</label>
                                <input type="email" id="notificationEmail3" placeholder="email@example.com">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Settings</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Website Controls Section -->
            <section class="section" id="websiteSection">
                <div class="offerings-header">
                    <div class="offerings-header-left">
                        <h2>Website Controls</h2>
                    </div>
                </div>

                <!-- Subtabs -->
                <div class="offerings-tabs" style="flex-wrap: wrap;">
                    <button class="offerings-tab active" data-wstab="hero">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 22V12h6v10" /></svg>
                        Hero
                    </button>
                    <button class="offerings-tab" data-wstab="archives">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        Archives
                    </button>
                    <button class="offerings-tab" data-wstab="whyChooseUs">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        Why Choose Us
                    </button>
                    <button class="offerings-tab" data-wstab="films">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                        Films
                    </button>
                    <button class="offerings-tab" data-wstab="wsServices">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        Services
                    </button>
                    <button class="offerings-tab" data-wstab="testimonials">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
                        Testimonials
                    </button>
                    <button class="offerings-tab" data-wstab="about">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        About
                    </button>
                </div>

                <!-- Hero Content -->
                <div class="offerings-content active" id="heroContent">
                    <!-- Hero Settings -->
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none; margin-bottom: 20px;">
                        <div class="table-header">
                            <h2>Hero Settings</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="saveHeroSettings()" id="heroSettingsSaveBtn">Save Settings</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Hero Tagline</label>
                                <input type="text" id="heroTaglineInput" placeholder="Premium Wedding Photography">
                            </div>
                        </div>
                    </div>

                    <!-- Film Roll Images -->
                    <div class="table-container" style="border-radius: 14px;">
                        <div class="table-header">
                            <h2>Film Roll Images</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddFilmRollModal()">+ Add Image</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <p style="color: var(--text-muted); font-size: 13px; margin-bottom: 16px;">These images appear in the scrolling film roll at the bottom of the hero section on the landing page.</p>
                            <div class="film-roll-grid" id="filmRollGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Archives Content -->
                <div class="offerings-content" id="archivesContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Wedding Archives</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddArchiveModal()">+ Add Archive</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="archive-entries-grid" id="archiveEntriesGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Films Content -->
                <div class="offerings-content" id="filmsContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Wedding Films</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddFilmModal()">+ Add Film</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="film-entries-grid" id="filmEntriesGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Website Services Content -->
                <div class="offerings-content" id="wsServicesContent">
                    <!-- Section Settings -->
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none; margin-bottom: 20px;">
                        <div class="table-header">
                            <h2>Section Settings</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="saveServicesSectionSettings()">Save Settings</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label>Section Label</label>
                                    <input type="text" id="servicesSectionLabel" placeholder="e.g. What We Offer">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label>Section Title</label>
                                    <input type="text" id="servicesSectionTitle" placeholder="e.g. Premium Services">
                                </div>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label>Section Subtitle</label>
                                <input type="text" id="servicesSectionSubtitle" placeholder="Brief description of your services">
                            </div>
                        </div>
                    </div>
                    <!-- Services Grid -->
                    <div class="table-container" style="border-radius: 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Service Cards</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddServiceModal()">+ Add Service</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="services-entries-grid" id="servicesEntriesGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonials Content -->
                <div class="offerings-content" id="testimonialsContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Testimonials</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddTestimonialModal()">+ Add Testimonial</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div class="testimonials-grid" id="testimonialsGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Content -->
                <div class="offerings-content" id="aboutContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>About Section</h2>
                        </div>
                        <div style="padding: 20px;">
                            <!-- Story / Content Editor -->
                            <div id="aboutStoryPreview">
                                <div class="form-group">
                                    <label>Section Label</label>
                                    <input type="text" id="aboutSectionLabel" placeholder="e.g. Our Story">
                                </div>
                                <div class="form-group">
                                    <label>Headline</label>
                                    <input type="text" id="aboutHeadline" placeholder="e.g. Passionate About Capturing Love">
                                </div>
                                <div class="form-group">
                                    <label>Paragraph 1</label>
                                    <textarea id="aboutParagraph1" rows="3" placeholder="First paragraph..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Paragraph 2</label>
                                    <textarea id="aboutParagraph2" rows="3" placeholder="Second paragraph..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Paragraph 3</label>
                                    <textarea id="aboutParagraph3" rows="3" placeholder="Third paragraph..."></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Cover Image</label>
                                    <input type="hidden" id="aboutCoverImageUrl">
                                    <input type="hidden" id="aboutCoverImageS3Key">
                                    <div id="aboutCoverImagePreview" style="display:none; margin-bottom: 12px;">
                                        <img src="" alt="Cover" style="max-width: 300px; border-radius: 8px;">
                                    </div>
                                    <input type="file" accept="image/*" onchange="uploadAboutCoverImage()" id="aboutCoverInput" style="margin-bottom: 12px;">
                                </div>
                                <div style="display: flex; gap: 16px;">
                                    <div class="form-group" style="flex:1;">
                                        <label>Badge Value</label>
                                        <input type="text" id="aboutBadgeValue" placeholder="e.g. 500+">
                                    </div>
                                    <div class="form-group" style="flex:1;">
                                        <label>Badge Label</label>
                                        <input type="text" id="aboutBadgeLabel" placeholder="e.g. Weddings Captured">
                                    </div>
                                </div>
                                <button class="btn btn-primary btn-sm" onclick="saveAboutContent()" style="width: auto;">Save About Content</button>
                            </div>

                            <!-- Stats -->
                            <div style="margin-top: 40px;">
                                <div class="table-header" style="padding: 0; margin-bottom: 16px; background: none; border: none;">
                                    <h2 style="font-size: 18px;">Statistics</h2>
                                    <button class="btn btn-primary btn-sm" onclick="openAddStatModal()">+ Add Stat</button>
                                </div>
                                <div class="about-stats-grid" id="aboutStatsGrid">
                                    <div class="loading"><div class="spinner"></div></div>
                                </div>
                            </div>

                            <!-- Team Members -->
                            <div style="margin-top: 40px;">
                                <div class="table-header" style="padding: 0; margin-bottom: 16px; background: none; border: none;">
                                    <h2 style="font-size: 18px;">Team Members</h2>
                                    <button class="btn btn-primary btn-sm" onclick="openAddTeamMemberModal()">+ Add Member</button>
                                </div>
                                <div class="team-members-grid" id="teamMembersGrid">
                                    <div class="loading"><div class="spinner"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Why Choose Us Content -->
                <div class="offerings-content" id="whyChooseUsContent">
                    <div class="table-container" style="border-radius: 0 0 14px 14px; border-top: none;">
                        <div class="table-header">
                            <h2>Why Choose Us</h2>
                            <div class="search-box">
                                <button class="btn btn-primary btn-sm" onclick="openAddWhyCardModal()">+ Add Card</button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <!-- Cards Grid -->
                            <div class="why-cards-grid" id="whyCardsGrid">
                                <div class="loading"><div class="spinner"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <div class="modal-overlay" id="eventModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="eventModalTitle">Add Event</h2>
                <button class="modal-close" onclick="closeModal('event')">&times;</button>
            </div>
            <form id="eventForm">
                <div class="modal-body">
                    <input type="hidden" id="eventId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="eventName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="eventSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Icon (Emoji)</label>
                        <input type="text" id="eventIcon" placeholder="">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="eventCategory" required>
                            <option value="wedding">Wedding</option>
                            <option value="reception-sangeet-engagement">Reception/Sangeet/Engagement</option>
                            <option value="haldi-mehendi-house">Haldi/Mehendi/House</option>
                            <option value="prewedding">Pre-Wedding</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="eventDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="eventSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="eventIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('event')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Service Modal -->
    <div class="modal-overlay" id="serviceModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="serviceModalTitle">Add Service</h2>
                <button class="modal-close" onclick="closeModal('service')">&times;</button>
            </div>
            <form id="serviceForm">
                <div class="modal-body">
                    <input type="hidden" id="serviceId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="serviceName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="serviceSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="serviceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Pricing by Category</label>
                        <div class="pricing-list" id="pricingList"></div>
                        <button type="button" class="add-pricing-btn" onclick="addPricingRow()">+ Add Pricing</button>
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="serviceSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="serviceIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('service')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quote Modal -->
    <div class="modal-overlay" id="quoteModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Quote Details</h2>
                <button class="modal-close" onclick="closeModal('quote')">&times;</button>
            </div>
            <div class="modal-body" id="quoteDetails">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('quote')">Close</button>
            </div>
        </div>
    </div>

    <!-- Additional Service Modal -->
    <div class="modal-overlay" id="additionalServiceModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="additionalServiceModalTitle">Add Additional Service</h2>
                <button class="modal-close" onclick="closeModal('additionalService')">&times;</button>
            </div>
            <form id="additionalServiceForm">
                <div class="modal-body">
                    <input type="hidden" id="additionalServiceId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="additionalServiceName" required>
                    </div>
                    <div class="form-group">
                        <label>Slug</label>
                        <input type="text" id="additionalServiceSlug" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="additionalServiceDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price ()</label>
                        <input type="number" id="additionalServicePrice" required min="0">
                    </div>
                    <div class="form-group">
                        <label>Sort Order</label>
                        <input type="number" id="additionalServiceSortOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="additionalServiceIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('additionalService')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Modal -->
    <div class="modal-overlay" id="adminModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="adminModalTitle">Add Admin</h2>
                <button class="modal-close" onclick="closeModal('admin')">&times;</button>
            </div>
            <form id="adminForm">
                <div class="modal-body">
                    <input type="hidden" id="adminId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="adminNameInput" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="adminEmail" required>
                    </div>
                    <div class="form-group" id="passwordGroup">
                        <label>Password</label>
                        <input type="password" id="adminPassword">
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="adminRole">
                            <option value="admin">Admin</option>
                            <option value="superadmin">Super Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="adminIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('admin')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quote Details Modal -->
    <div class="modal-overlay" id="quoteDetailsModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h2>Quote Details</h2>
                <button class="modal-close" onclick="closeQuoteDetailsModal()">&times;</button>
            </div>
            <div class="modal-body" id="quoteDetailsContent" style="max-height: 70vh; overflow-y: auto;">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeQuoteDetailsModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Archive Entry Modal -->
    <div class="modal-overlay" id="archiveEntryModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="archiveModalTitle">Add Wedding Archive</h2>
                <button class="modal-close" onclick="closeArchiveEntryModal()">&times;</button>
            </div>
            <form id="archiveEntryForm" onsubmit="saveArchiveEntry(event)">
                <input type="hidden" id="archiveEntryId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Couple Name *</label>
                        <input type="text" id="archiveCoupleName" placeholder="e.g. Priya & Arjun" required>
                    </div>
                    <div class="form-group">
                        <label>Wedding Place *</label>
                        <input type="text" id="archiveWeddingPlace" placeholder="e.g. Udaipur, Rajasthan" required>
                    </div>
                    <div class="form-group">
                        <label>Wedding Date</label>
                        <input type="date" id="archiveWeddingDate">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="archiveDescription" rows="3" placeholder="Brief description of the wedding..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Cover Image</label>
                        <div id="archiveCoverDropzone" class="upload-dropzone" onclick="document.getElementById('archiveCoverInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                            <h4>Click to upload cover image</h4>
                            <p>JPG, PNG up to 5MB</p>
                            <input type="file" id="archiveCoverInput" accept="image/*" onchange="handleArchiveCoverSelect(event)" style="display:none;">
                        </div>
                        <div id="archiveCoverPreview" style="display:none; position:relative; text-align:center;">
                            <img id="archiveCoverPreviewImg" src="" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearArchiveCover()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                    </div>
                    <div class="form-group" id="archiveActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="archiveIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeArchiveEntryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="archiveSubmitBtn">Add Wedding</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Archive Gallery Modal -->
    <div class="modal-overlay" id="archiveGalleryModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="galleryModalTitle">Gallery</h2>
                <button class="modal-close" onclick="closeArchiveGalleryModal()">&times;</button>
            </div>
            <input type="hidden" id="galleryEntryId">
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <label class="btn btn-primary btn-sm" style="width: auto; cursor: pointer;">
                        Upload Images
                        <input type="file" id="galleryImagesInput" accept="image/*" multiple onchange="handleGalleryImagesSelect(event)" style="display:none;">
                    </label>
                </div>
                <div id="galleryUploadProgress" style="display:none; margin-bottom: 16px;">
                    <div class="upload-progress-bar">
                        <div class="upload-progress-fill" id="galleryProgressFill" style="width: 0%"></div>
                    </div>
                    <p id="galleryProgressText" style="color: var(--text-muted); font-size: 12px; margin-top: 6px;">Uploading...</p>
                </div>
                <div class="gallery-grid" id="galleryGrid">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeArchiveGalleryModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Film Entry Modal -->
    <div class="modal-overlay" id="filmEntryModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h2 id="filmModalTitle">Add Wedding Film</h2>
                <button class="modal-close" onclick="closeFilmEntryModal()">&times;</button>
            </div>
            <form id="filmEntryForm" onsubmit="saveFilmEntry(event)">
                <input type="hidden" id="filmEntryId">
                <input type="hidden" id="filmVideoS3Key">
                <input type="hidden" id="filmVideoUrl">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Film Title *</label>
                        <input type="text" id="filmTitle" placeholder="e.g. A Beautiful Day" required>
                    </div>
                    <div class="form-group">
                        <label>Couple Name *</label>
                        <input type="text" id="filmCoupleName" placeholder="e.g. Priya & Arjun" required>
                    </div>
                    <div class="form-group">
                        <label>Wedding Place</label>
                        <input type="text" id="filmWeddingPlace" placeholder="e.g. Udaipur, Rajasthan">
                    </div>
                    <div class="form-group">
                        <label>Duration</label>
                        <input type="text" id="filmDuration" placeholder="e.g. 5:30">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="filmDescription" rows="3" placeholder="Brief description..."></textarea>
                    </div>

                    <!-- Thumbnail -->
                    <div class="form-group">
                        <label>Thumbnail Image *</label>
                        <div id="filmThumbnailDropzone" class="upload-dropzone" onclick="document.getElementById('filmThumbnailInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                            <h4>Click to upload thumbnail</h4>
                            <p>JPG, PNG up to 5MB</p>
                            <input type="file" id="filmThumbnailInput" accept="image/*" onchange="handleFilmThumbnailSelect(event)" style="display:none;">
                        </div>
                        <div id="filmThumbnailPreview" style="display:none; position:relative; text-align:center;">
                            <img id="filmThumbnailPreviewImg" src="" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearFilmThumbnail()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                    </div>

                    <!-- Video Source Tabs -->
                    <div class="form-group">
                        <label>Video Source</label>
                        <div class="video-source-tabs">
                            <button type="button" class="video-tab active" id="videoTabUpload" onclick="switchVideoTab('upload')">Upload Video</button>
                            <button type="button" class="video-tab" id="videoTabYoutube" onclick="switchVideoTab('youtube')">YouTube URL</button>
                            <button type="button" class="video-tab" id="videoTabVimeo" onclick="switchVideoTab('vimeo')">Vimeo URL</button>
                        </div>
                    </div>

                    <!-- Video Upload -->
                    <div id="videoSourceUpload">
                        <div id="filmVideoDropzone" class="upload-dropzone" onclick="document.getElementById('filmVideoInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            <h4>Click to upload video</h4>
                            <p>MP4, MOV up to 3GB</p>
                            <input type="file" id="filmVideoInput" accept="video/*" onchange="handleFilmVideoSelect(event)" style="display:none;">
                        </div>
                        <div id="filmVideoPreview" style="display:none; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; border: 1px solid var(--border-subtle);">
                            <p style="color: var(--text-bright);"><span id="filmVideoFileName"></span></p>
                            <p style="color: var(--text-muted); font-size: 12px;"><span id="filmVideoFileSize"></span></p>
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearFilmVideo()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                        <div id="filmVideoUploadProgress" style="display:none; margin-top: 12px;">
                            <div class="upload-progress-bar">
                                <div class="upload-progress-fill" id="filmVideoProgressFill" style="width: 0%"></div>
                            </div>
                            <p id="filmVideoProgressText" style="color: var(--text-muted); font-size: 12px; margin-top: 6px;">Uploading...</p>
                        </div>
                    </div>

                    <!-- YouTube URL -->
                    <div id="videoSourceYoutube" style="display:none;">
                        <div class="form-group">
                            <label>YouTube URL</label>
                            <input type="url" id="filmYoutubeUrl" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                    </div>

                    <!-- Vimeo URL -->
                    <div id="videoSourceVimeo" style="display:none;">
                        <div class="form-group">
                            <label>Vimeo URL</label>
                            <input type="url" id="filmVimeoUrl" placeholder="https://vimeo.com/...">
                        </div>
                    </div>

                    <div class="form-group" id="filmActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="filmIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeFilmEntryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="filmSubmitBtn">Add Film</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Film Preview Modal -->
    <div class="modal-overlay" id="filmPreviewModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h2 id="filmPreviewTitle">Film Preview</h2>
                <button class="modal-close" onclick="closeFilmPreviewModal()">&times;</button>
            </div>
            <div class="modal-body" id="filmPreviewContent" style="text-align: center;">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeFilmPreviewModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Service Entry Modal (Website) -->
    <div class="modal-overlay" id="serviceEntryModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="serviceModalTitle">Add Service</h2>
                <button class="modal-close" onclick="closeServiceEntryModal()">&times;</button>
            </div>
            <form id="serviceEntryForm" onsubmit="saveServiceEntry(event)">
                <input type="hidden" id="serviceEntryId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Badge / Tag</label>
                        <input type="text" id="serviceBadge" placeholder="e.g. PREMIUM">
                    </div>
                    <div class="form-group">
                        <label>Service Title *</label>
                        <input type="text" id="serviceTitle" placeholder="e.g. Wedding Photography" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="serviceDescription" rows="3" placeholder="Service description..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Service Image</label>
                        <div id="serviceImageDropzone" class="upload-dropzone" onclick="document.getElementById('serviceImageInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                            <h4>Click to upload image</h4>
                            <p>JPG, PNG up to 5MB</p>
                            <input type="file" id="serviceImageInput" accept="image/*" onchange="handleServiceImageSelect(event)" style="display:none;">
                        </div>
                        <div id="serviceImagePreview" style="display:none; position:relative; text-align:center;">
                            <img id="serviceImagePreviewImg" src="" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearServiceImage()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Features</label>
                        <div class="features-list-container" id="serviceFeaturesContainer"></div>
                        <button type="button" class="add-feature-btn" onclick="addServiceFeature()">+ Add Feature</button>
                    </div>
                    <div class="form-group">
                        <label>Link Text</label>
                        <input type="text" id="serviceLinkText" placeholder="e.g. Learn More" value="Learn More">
                    </div>
                    <div class="form-group">
                        <label>Link URL</label>
                        <input type="text" id="serviceLinkUrl" placeholder="e.g. #contact" value="#contact">
                    </div>
                    <div class="form-group" id="serviceActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="serviceIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeServiceEntryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="serviceSubmitBtn">Add Service</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Testimonial Entry Modal -->
    <div class="modal-overlay" id="testimonialEntryModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="testimonialModalTitle">Add Testimonial</h2>
                <button class="modal-close" onclick="closeTestimonialEntryModal()">&times;</button>
            </div>
            <form id="testimonialEntryForm" onsubmit="saveTestimonialEntry(event)">
                <input type="hidden" id="testimonialEntryId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Client Name *</label>
                        <input type="text" id="testimonialClientName" placeholder="e.g. Priya & Arjun Sharma" required>
                    </div>
                    <div class="form-group">
                        <label>Wedding Date / Info</label>
                        <input type="text" id="testimonialWeddingDate" placeholder="e.g. Destination Wedding, Udaipur">
                    </div>
                    <div class="form-group">
                        <label>Testimonial Content *</label>
                        <textarea id="testimonialContent" rows="4" placeholder="Client testimonial text..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Rating</label>
                        <select id="testimonialRating">
                            <option value="5"> (5)</option>
                            <option value="4"> (4)</option>
                            <option value="3"> (3)</option>
                            <option value="2"> (2)</option>
                            <option value="1"> (1)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Client Photo <span style="color: var(--gold); font-size: 12px; font-weight: normal;">(Used as background image on website)</span></label>
                        <div style="background: rgba(201, 169, 98, 0.08); border: 1px solid rgba(201, 169, 98, 0.2); border-radius: 8px; padding: 10px 14px; margin-bottom: 12px; font-size: 13px; color: var(--text-light);">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 16px; height: 16px; display: inline; vertical-align: middle; margin-right: 6px; color: var(--gold);">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            This photo will be displayed as the full background with parallax scroll effect in the testimonials section
                        </div>
                        <div id="testimonialPhotoDropzone" class="upload-dropzone" onclick="document.getElementById('testimonialPhotoInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                            <h4>Click to upload photo</h4>
                            <p>JPG, PNG up to 2MB  High quality recommended</p>
                            <input type="file" id="testimonialPhotoInput" accept="image/*" onchange="handleTestimonialPhotoSelect(event)" style="display:none;">
                        </div>
                        <div id="testimonialPhotoPreview" style="display:none; position:relative; text-align:center;">
                            <img id="testimonialPhotoPreviewImg" src="" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearTestimonialPhoto()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                    </div>
                    <div class="form-group" id="testimonialActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="testimonialIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeTestimonialEntryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="testimonialSubmitBtn">Add Testimonial</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Team Member Modal -->
    <div class="modal-overlay" id="teamMemberModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="teamMemberModalTitle">Add Team Member</h2>
                <button class="modal-close" onclick="closeTeamMemberModal()">&times;</button>
            </div>
            <form id="teamMemberForm" onsubmit="saveTeamMember(event)">
                <input type="hidden" id="teamMemberId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Name *</label>
                        <input type="text" id="teamMemberName" placeholder="e.g. John Doe" required>
                    </div>
                    <div class="form-group">
                        <label>Role *</label>
                        <input type="text" id="teamMemberRole" placeholder="e.g. Lead Photographer" required>
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <textarea id="teamMemberBio" rows="3" placeholder="Short bio..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Instagram URL</label>
                        <input type="text" id="teamMemberInstagram" placeholder="https://instagram.com/...">
                    </div>
                    <div class="form-group">
                        <label>Photo</label>
                        <div id="teamPhotoDropzone" class="upload-dropzone" onclick="document.getElementById('teamPhotoInput').click()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                            <h4>Click to upload photo</h4>
                            <p>JPG, PNG up to 5MB</p>
                            <input type="file" id="teamPhotoInput" accept="image/*" onchange="handleTeamPhotoSelect(event)" style="display:none;">
                        </div>
                        <div id="teamPhotoPreview" style="display:none; position:relative; text-align:center;">
                            <img id="teamPhotoPreviewImg" src="" alt="Preview" style="max-width: 150px; max-height: 150px; border-radius: 50%;">
                            <button type="button" class="btn btn-sm btn-danger" onclick="clearTeamPhoto()" style="margin-top: 8px; width: auto;">Remove</button>
                        </div>
                    </div>
                    <div class="form-group" id="teamMemberActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="teamMemberIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeTeamMemberModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="teamMemberSubmitBtn">Add Team Member</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Stat Modal -->
    <div class="modal-overlay" id="statModal">
        <div class="modal" style="max-width: 450px;">
            <div class="modal-header">
                <h2 id="statModalTitle">Add Statistic</h2>
                <button class="modal-close" onclick="closeStatModal()">&times;</button>
            </div>
            <form id="statForm" onsubmit="saveStat(event)">
                <input type="hidden" id="statId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Value *</label>
                        <input type="text" id="statValue" placeholder="e.g. 500" required>
                    </div>
                    <div class="form-group">
                        <label>Suffix</label>
                        <input type="text" id="statSuffix" placeholder="e.g. +">
                    </div>
                    <div class="form-group">
                        <label>Label *</label>
                        <input type="text" id="statLabel" placeholder="e.g. Weddings Captured" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeStatModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="statSubmitBtn">Add Stat</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Why Choose Us Card Modal -->
    <div class="modal-overlay" id="whyCardModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="whyCardModalTitle">Add Feature Card</h2>
                <button class="modal-close" onclick="closeWhyCardModal()">&times;</button>
            </div>
            <form id="whyCardForm" onsubmit="saveWhyCard(event)">
                <input type="hidden" id="whyCardId">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Title *</label>
                        <input type="text" id="whyCardTitle" placeholder="e.g. Creative Storytelling" required>
                    </div>
                    <div class="form-group">
                        <label>Description *</label>
                        <textarea id="whyCardDescription" rows="3" placeholder="Card description..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Icon Type</label>
                        <input type="hidden" id="whyCardIconType" value="star">
                        <div class="icon-picker-container">
                            <div class="icon-picker-selected" onclick="toggleIconPicker()">
                                <div class="selected-icon-preview" id="iconPickerPreview"></div>
                                <span class="selected-icon-label" id="iconPickerLabel">Star</span>
                                <svg class="picker-arrow" id="iconPickerArrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
                            </div>
                            <div class="icon-picker-grid-wrapper" id="iconPickerGrid"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Highlight Text</label>
                        <input type="text" id="whyCardHighlight" placeholder="e.g. 100+ Destination Weddings">
                    </div>
                    <div class="form-group">
                        <label>Destinations (comma-separated)</label>
                        <input type="text" id="whyCardDestinations" placeholder="e.g. Udaipur, Goa, Jaipur">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="whyCardIsFeatured"> Featured Card
                        </label>
                    </div>
                    <div class="form-group" id="whyCardActiveField" style="display:none;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="whyCardIsActive" checked> Active
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeWhyCardModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="whyCardSubmitBtn">Add Card</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Film Roll Image Modal -->
    <div class="modal-overlay" id="filmRollImageModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2 id="filmRollModalTitle">Add Film Roll Image</h2>
                <button class="modal-close" onclick="closeFilmRollImageModal()">&times;</button>
            </div>
            <form id="filmRollImageForm" onsubmit="saveFilmRollImage(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Image <span style="color: var(--danger);">*</span></label>
                        <div id="filmRollImagePreview" style="display:none; margin-bottom: 12px; position: relative; border-radius: 10px; overflow: hidden; max-height: 200px;">
                            <img id="filmRollImagePreviewImg" style="width: 100%; height: 200px; object-fit: cover; display: block;">
                            <button type="button" onclick="clearFilmRollImage()" style="position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); border: none; color: white; width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center;">&times;</button>
                        </div>
                        <input type="file" id="filmRollImageFile" accept="image/*" onchange="handleFilmRollImageSelect(event)" style="display: none;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('filmRollImageFile').click()" id="filmRollImagePickBtn" style="width: 100%;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                            Choose Image
                        </button>
                    </div>
                    <div class="form-group">
                        <label>Caption</label>
                        <input type="text" id="filmRollCaption" placeholder="e.g. Sarah & Michael">
                    </div>
                    <div class="form-group">
                        <label>Alt Text</label>
                        <input type="text" id="filmRollAltText" placeholder="Wedding" value="Wedding">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-sm" onclick="closeFilmRollImageModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary btn-sm" id="filmRollSubmitBtn">Add Image</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURATION - Backend API URL
        // ============================================
        // Auto-detect: use localhost when running locally, production otherwise
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const BACKEND_URL = isLocalhost ? 'http://localhost:3000' : 'https://api.edastra.in';
        const API_BASE = `${BACKEND_URL}/api/admin`;
        
        let authToken = localStorage.getItem('adminToken');
        let currentAdmin = JSON.parse(localStorage.getItem('adminData') || '{}');

        // Utility Functions
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${type === 'success' ? '' : type === 'error' ? '' : ''}</span> ${message}`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        async function apiCall(endpoint, method = 'GET', data = null) {
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${authToken}`
                }
            };
            if (data) options.body = JSON.stringify(data);
            
            const response = await fetch(`${API_BASE}${endpoint}`, options);
            const result = await response.json();
            
            if (!response.ok) {
                if (response.status === 401) {
                    logout();
                    throw new Error('Session expired. Please login again.');
                }
                throw new Error(result.error || 'API request failed');
            }
            return result;
        }

        function formatDate(dateStr) {
            if (!dateStr) return '-';
            return new Date(dateStr).toLocaleDateString('en-IN', {
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        // Password visibility toggle
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleBtn = document.getElementById('togglePassword');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.classList.add('showing');
            } else {
                passwordInput.type = 'password';
                toggleBtn.classList.remove('showing');
            }
        }

        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Close sidebar when nav item is clicked (mobile)
        function closeSidebarOnMobile() {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        }

        // Update app bar title
        function updateAppBarTitle(title) {
            const appBarTitle = document.getElementById('appBarTitle');
            if (appBarTitle) {
                appBarTitle.textContent = title;
            }
        }

        // Update app bar user info
        function updateAppBarUser(name, email) {
            const appBarAvatar = document.getElementById('appBarAvatar');
            const dropdownAvatar = document.getElementById('dropdownAvatar');
            const dropdownName = document.getElementById('dropdownName');
            const dropdownEmail = document.getElementById('dropdownEmail');
            
            // Get admin data from localStorage or use currentAdmin
            let adminData = currentAdmin;
            if (!adminData) {
                const storedData = localStorage.getItem('adminData');
                if (storedData) {
                    try {
                        adminData = JSON.parse(storedData);
                    } catch (e) {
                        console.error('Error parsing admin data:', e);
                    }
                }
            }
            
            // Use provided name or fall back to admin data
            const displayName = name || (adminData ? adminData.name : 'Admin');
            const displayEmail = email || (adminData ? adminData.email : 'admin@example.com');
            
            if (appBarAvatar && displayName) {
                const initial = displayName.charAt(0).toUpperCase();
                appBarAvatar.textContent = initial;
                if (dropdownAvatar) dropdownAvatar.textContent = initial;
            }
            
            if (dropdownName) dropdownName.textContent = displayName;
            if (dropdownEmail) dropdownEmail.textContent = displayEmail;
        }

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            try {
                errorDiv.style.display = 'none';
                const response = await fetch(`${API_BASE}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.error || 'Login failed');
                }
                
                authToken = result.data.token;
                currentAdmin = result.data.admin;
                localStorage.setItem('adminToken', authToken);
                localStorage.setItem('adminData', JSON.stringify(currentAdmin));
                
                showAdminPanel();
                showToast('Login successful!');
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.style.display = 'block';
            }
        });

        function logout() {
            authToken = null;
            currentAdmin = {};
            localStorage.removeItem('adminToken');
            localStorage.removeItem('adminData');
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('adminLayout').style.display = 'none';
        }

        document.getElementById('logoutBtn').addEventListener('click', logout);

        function showAdminPanel() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminLayout').style.display = 'block';
            document.getElementById('adminName').textContent = currentAdmin.name || 'Admin';
            updateAppBarUser(currentAdmin.name, currentAdmin.email);
            loadDashboard();
        }

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                const section = item.dataset.section;
                const title = item.textContent.trim();
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(`${section}Section`).classList.add('active');
                document.getElementById('pageTitle').textContent = title;
                updateAppBarTitle(title);
                
                // Close sidebar on mobile after navigation
                closeSidebarOnMobile();
                
                loadSection(section);
            });
        });

        // Offerings subtabs navigation
        document.querySelectorAll('.offerings-tab[data-subtab]').forEach(tab => {
            tab.addEventListener('click', () => {
                // Update active tab
                document.querySelectorAll('.offerings-tab[data-subtab]').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                const subtab = tab.dataset.subtab;
                document.querySelectorAll('#offeringsSection .offerings-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${subtab}Content`).classList.add('active');
                
                // Load data for the subtab
                loadOfferingsSubtab(subtab);
            });
        });

        // Navigate to section programmatically (used by dashboard cards)
        function navigateToSection(section, subtab = null) {
            // Update sidebar navigation
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const navItem = document.querySelector(`.nav-item[data-section="${section}"]`);
            if (navItem) {
                navItem.classList.add('active');
                const title = navItem.textContent.trim();
                document.getElementById('pageTitle').textContent = title;
                updateAppBarTitle(title);
            }
            
            // Show section
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(`${section}Section`).classList.add('active');
            
            // Handle offerings subtab if specified
            if (section === 'offerings' && subtab) {
                setTimeout(() => {
                    document.querySelectorAll('.offerings-tab[data-subtab]').forEach(t => t.classList.remove('active'));
                    const tab = document.querySelector(`.offerings-tab[data-subtab="${subtab}"]`);
                    if (tab) {
                        tab.classList.add('active');
                        document.querySelectorAll('#offeringsSection .offerings-content').forEach(c => c.classList.remove('active'));
                        document.getElementById(`${subtab}Content`).classList.add('active');
                        loadOfferingsSubtab(subtab);
                    }
                }, 100);
            } else if (section === 'website' && subtab) {
                setTimeout(() => {
                    document.querySelectorAll('.offerings-tab[data-wstab]').forEach(t => t.classList.remove('active'));
                    const tab = document.querySelector(`.offerings-tab[data-wstab="${subtab}"]`);
                    if (tab) {
                        tab.classList.add('active');
                        document.querySelectorAll('#websiteSection .offerings-content').forEach(c => c.classList.remove('active'));
                        document.getElementById(`${subtab}Content`).classList.add('active');
                        loadWebsiteSubtab(subtab);
                    }
                }, 100);
            } else {
                // Load section data
                loadSection(section);
            }
            
            // Close sidebar on mobile
            closeSidebarOnMobile();
        }

        // Refresh Dashboard
        document.getElementById('refreshDashboardBtn').addEventListener('click', async () => {
            const btn = document.getElementById('refreshDashboardBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            try {
                await loadDashboard();
            } catch (error) {
                showToast('Failed to refresh dashboard', 'error');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });

        function loadOfferingsSubtab(subtab) {
            switch(subtab) {
                case 'events': loadEvents(); break;
                case 'services': loadServices(); break;
                case 'additionalServices': loadAdditionalServices(); break;
            }
        }

        // Website Controls subtabs navigation
        document.querySelectorAll('.offerings-tab[data-wstab]').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.offerings-tab[data-wstab]').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const subtab = tab.dataset.wstab;
                document.querySelectorAll('#websiteSection .offerings-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${subtab}Content`).classList.add('active');
                loadWebsiteSubtab(subtab);
            });
        });

        function loadWebsiteSubtab(subtab) {
            switch(subtab) {
                case 'hero': loadWebsiteHero(); break;
                case 'archives': loadWebsiteArchives(); break;
                case 'films': loadWebsiteFilms(); break;
                case 'wsServices': loadWebsiteServices(); break;
                case 'testimonials': loadWebsiteTestimonials(); break;
                case 'about': loadWebsiteAbout(); break;
                case 'whyChooseUs': loadWhyChooseUs(); break;
            }
        }

        // Image compression utility
        function compressImage(file, maxWidth, quality) {
            return new Promise((resolve) => {
                if (!file.type.startsWith('image/')) return resolve(file);
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let w = img.width, h = img.height;
                        if (w > maxWidth) { h = (h * maxWidth) / w; w = maxWidth; }
                        canvas.width = w;
                        canvas.height = h;
                        canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                        canvas.toBlob((blob) => {
                            resolve(blob || file);
                        }, 'image/jpeg', quality);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        }

        // ==========================================
        // Website Controls - Hero Section
        // ==========================================
        
        let currentFilmRollImages = [];
        let filmRollImageFile = null;

        async function loadWebsiteHero() {
            try {
                const result = await apiCall('/website-content/home');
                if (result.success && result.data) {
                    const heroData = result.data.home?.hero || {};
                    document.getElementById('heroTaglineInput').value = heroData.tagline || '';
                    currentFilmRollImages = heroData.filmRollImages || [];
                    renderFilmRollGrid();
                }
            } catch (error) {
                showToast('Error loading hero content: ' + error.message, 'error');
            }
        }

        function renderFilmRollGrid() {
            const grid = document.getElementById('filmRollGrid');
            if (!currentFilmRollImages || currentFilmRollImages.length === 0) {
                grid.innerHTML = `
                    <div class="film-roll-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <p style="color: var(--text-muted); margin-top: 12px;">No film roll images yet</p>
                        <button class="btn btn-secondary btn-sm" style="margin-top: 12px;" onclick="openAddFilmRollModal()">+ Add First Image</button>
                    </div>`;
                return;
            }

            grid.innerHTML = currentFilmRollImages
                .sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0))
                .map((img, idx) => `
                    <div class="film-roll-item">
                        <img src="${img.imageUrl}" alt="${img.altText || 'Wedding'}" loading="lazy">
                        <div class="film-roll-item-overlay">
                            <span class="film-roll-item-caption">${img.caption || 'No caption'}</span>
                            <div class="film-roll-item-actions">
                                <button class="btn-delete" onclick="deleteFilmRollImageItem('${img._id}')" title="Delete">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                                </button>
                            </div>
                        </div>
                        <span class="film-roll-item-order">#${idx + 1}</span>
                        ${img.isActive === false ? '<span class="film-roll-item-status inactive">Inactive</span>' : ''}
                    </div>
                `).join('');
        }

        function openAddFilmRollModal() {
            document.getElementById('filmRollModalTitle').textContent = 'Add Film Roll Image';
            document.getElementById('filmRollSubmitBtn').textContent = 'Add Image';
            document.getElementById('filmRollImageForm').reset();
            document.getElementById('filmRollAltText').value = 'Wedding';
            document.getElementById('filmRollImagePreview').style.display = 'none';
            document.getElementById('filmRollImagePickBtn').style.display = '';
            filmRollImageFile = null;
            document.getElementById('filmRollImageModal').classList.add('active');
        }

        function closeFilmRollImageModal() {
            document.getElementById('filmRollImageModal').classList.remove('active');
        }

        function handleFilmRollImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            filmRollImageFile = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('filmRollImagePreviewImg').src = e.target.result;
                document.getElementById('filmRollImagePreview').style.display = 'block';
                document.getElementById('filmRollImagePickBtn').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function clearFilmRollImage() {
            filmRollImageFile = null;
            document.getElementById('filmRollImagePreview').style.display = 'none';
            document.getElementById('filmRollImagePickBtn').style.display = '';
            document.getElementById('filmRollImageFile').value = '';
        }

        async function saveFilmRollImage(event) {
            event.preventDefault();
            
            if (!filmRollImageFile) {
                showToast('Please select an image', 'error');
                return;
            }

            const submitBtn = document.getElementById('filmRollSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Uploading...';

            try {
                // Compress image
                const compressedFile = await compressImage(filmRollImageFile, 1200, 0.85);

                // Get signed upload URL
                const signedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        folder: 'website',
                        filename: filmRollImageFile.name,
                        mimeType: compressedFile.type,
                        fileSize: compressedFile.size,
                        prefix: 'home/film-roll'
                    })
                });

                const signedUrlData = await signedUrlResult.json();
                if (!signedUrlData.success) throw new Error(signedUrlData.error || 'Failed to get upload URL');

                // Upload to S3
                const uploadResponse = await fetch(signedUrlData.uploadUrl, {
                    method: 'PUT',
                    headers: { 'Content-Type': compressedFile.type },
                    body: compressedFile
                });
                if (!uploadResponse.ok) throw new Error('Failed to upload image');

                const imageUrl = `https://${signedUrlData.bucket}.s3.${signedUrlData.region}.amazonaws.com/${signedUrlData.key}`;
                const s3Key = signedUrlData.key;

                // Save to backend
                const caption = document.getElementById('filmRollCaption').value.trim();
                const altText = document.getElementById('filmRollAltText').value.trim() || 'Wedding';

                const result = await apiCall('/website-content/home/film-roll', 'POST', {
                    imageUrl, s3Key, caption, altText
                });

                if (result.success) {
                    showToast('Film roll image added!', 'success');
                    closeFilmRollImageModal();
                    loadWebsiteHero();
                } else {
                    throw new Error(result.error || 'Failed to save');
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Add Image';
            }
        }

        async function deleteFilmRollImageItem(imageId) {
            if (!confirm('Delete this film roll image?')) return;

            try {
                const result = await apiCall(`/website-content/home/film-roll/${imageId}`, 'DELETE');
                if (result.success) {
                    showToast('Image deleted', 'success');
                    loadWebsiteHero();
                } else {
                    throw new Error(result.error || 'Failed to delete');
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            }
        }

        async function saveHeroSettings() {
            const btn = document.getElementById('heroSettingsSaveBtn');
            btn.disabled = true;
            btn.textContent = 'Saving...';

            try {
                const tagline = document.getElementById('heroTaglineInput').value.trim();
                const result = await apiCall('/website-content/home/hero', 'PUT', { tagline });

                if (result.success) {
                    showToast('Hero settings saved!', 'success');
                } else {
                    throw new Error(result.error || 'Failed to save');
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Save Settings';
            }
        }

        // ==========================================
        // Website Controls - Archive Page
        // ==========================================
        
        let archiveCoverFile = null;
        let currentArchiveEntries = [];
        let galleryFilesToUpload = [];

        async function loadWebsiteArchives() {
            const grid = document.getElementById('archiveEntriesGrid');
            grid.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            try {
                const response = await fetch(`${API_BASE}/website-content/archives`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                
                if (data.success && data.data && data.data.archives && data.data.archives.entries) {
                    currentArchiveEntries = data.data.archives.entries.sort((a, b) => a.sortOrder - b.sortOrder);
                    renderArchiveEntriesGrid();
                } else {
                    currentArchiveEntries = [];
                    renderArchiveEntriesGrid();
                }
            } catch (error) {
                console.error('Error loading archives:', error);
                grid.innerHTML = '<div class="archive-empty"><p>Error loading archives</p></div>';
            }
        }

        function renderArchiveEntriesGrid() {
            const grid = document.getElementById('archiveEntriesGrid');
            
            if (currentArchiveEntries.length === 0) {
                grid.innerHTML = `
                    <div class="archive-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <p>No wedding archives yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Archive" to create your first archive</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentArchiveEntries.map((entry, index) => `
                <div class="archive-entry-card" data-id="${entry._id}">
                    <div class="archive-entry-cover">
                        <img src="${entry.coverImageUrl}" alt="${entry.coupleName}" onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22300%22 fill=%22%23333%22%3E%3Crect width=%22100%25%22 height=%22100%25%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 fill=%22%23666%22 font-size=%2214%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo Image%3C/text%3E%3C/svg%3E'">
                        <div class="archive-entry-cover-overlay"></div>
                        <span class="archive-entry-badge">#${index + 1}</span>
                        <span class="archive-entry-status ${entry.isActive ? 'active' : 'inactive'}"></span>
                    </div>
                    <div class="archive-entry-info">
                        <div class="archive-entry-couple">${entry.coupleName}</div>
                        <div class="archive-entry-place">${entry.weddingPlace}</div>
                        <div class="archive-entry-gallery-count">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            ${entry.galleryImages ? entry.galleryImages.length : 0} photos
                        </div>
                    </div>
                    <div class="archive-entry-actions">
                        <button class="btn-gallery" onclick="openArchiveGalleryModal('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            Gallery
                        </button>
                        <button class="btn-edit" onclick="editArchiveEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit
                        </button>
                        <button class="btn-delete" onclick="deleteArchiveEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Archive Entry Modal Functions
        function openAddArchiveModal() {
            document.getElementById('archiveModalTitle').textContent = 'Add Wedding Archive';
            document.getElementById('archiveSubmitBtn').textContent = 'Add Wedding';
            document.getElementById('archiveEntryForm').reset();
            document.getElementById('archiveEntryId').value = '';
            document.getElementById('archiveActiveField').style.display = 'none';
            document.getElementById('archiveCoverDropzone').style.display = 'block';
            document.getElementById('archiveCoverPreview').style.display = 'none';
            archiveCoverFile = null;
            document.getElementById('archiveEntryModal').classList.add('active');
        }

        function editArchiveEntry(entryId) {
            const entry = currentArchiveEntries.find(e => e._id === entryId);
            if (!entry) return;
            
            document.getElementById('archiveModalTitle').textContent = 'Edit Wedding Archive';
            document.getElementById('archiveSubmitBtn').textContent = 'Save Changes';
            document.getElementById('archiveEntryId').value = entry._id;
            document.getElementById('archiveCoupleName').value = entry.coupleName || '';
            document.getElementById('archiveWeddingPlace').value = entry.weddingPlace || '';
            document.getElementById('archiveWeddingDate').value = entry.weddingDate ? entry.weddingDate.split('T')[0] : '';
            document.getElementById('archiveDescription').value = entry.description || '';
            document.getElementById('archiveIsActive').checked = entry.isActive !== false;
            document.getElementById('archiveActiveField').style.display = 'block';
            
            // Show current cover image
            document.getElementById('archiveCoverDropzone').style.display = 'none';
            document.getElementById('archiveCoverPreview').style.display = 'block';
            document.getElementById('archiveCoverPreviewImg').src = entry.coverImageUrl;
            archiveCoverFile = null; // No new file selected
            
            document.getElementById('archiveEntryModal').classList.add('active');
        }

        function closeArchiveEntryModal() {
            document.getElementById('archiveEntryModal').classList.remove('active');
            archiveCoverFile = null;
        }

        function handleArchiveCoverSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            archiveCoverFile = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('archiveCoverDropzone').style.display = 'none';
                document.getElementById('archiveCoverPreview').style.display = 'block';
                document.getElementById('archiveCoverPreviewImg').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function clearArchiveCover() {
            archiveCoverFile = null;
            document.getElementById('archiveCoverInput').value = '';
            document.getElementById('archiveCoverDropzone').style.display = 'block';
            document.getElementById('archiveCoverPreview').style.display = 'none';
        }

        async function saveArchiveEntry(event) {
            event.preventDefault();
            
            const entryId = document.getElementById('archiveEntryId').value;
            const isEdit = !!entryId;
            
            const coupleName = document.getElementById('archiveCoupleName').value.trim();
            const weddingPlace = document.getElementById('archiveWeddingPlace').value.trim();
            const weddingDate = document.getElementById('archiveWeddingDate').value;
            const description = document.getElementById('archiveDescription').value.trim();
            const isActive = document.getElementById('archiveIsActive').checked;
            
            if (!coupleName || !weddingPlace) {
                showToast('Please fill in required fields', 'error');
                return;
            }
            
            // For new entries, cover image is required
            if (!isEdit && !archiveCoverFile) {
                showToast('Please select a cover image', 'error');
                return;
            }
            
            const submitBtn = document.getElementById('archiveSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = isEdit ? 'Saving...' : 'Adding...';
            
            try {
                let coverImageUrl = '';
                let coverImageS3Key = '';
                
                // If new cover file selected, upload it
                if (archiveCoverFile) {
                    const compressedFile = await compressImage(archiveCoverFile, 1200, 0.85);
                    
                    const signedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: archiveCoverFile.name,
                            mimeType: compressedFile.type,
                            fileSize: compressedFile.size,
                            prefix: 'archives/covers'
                        })
                    });
                    
                    const signedUrlData = await signedUrlResult.json();
                    if (!signedUrlData.success) {
                        throw new Error(signedUrlData.error || 'Failed to get upload URL');
                    }
                    
                    const uploadResponse = await fetch(signedUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': compressedFile.type },
                        body: compressedFile
                    });
                    
                    if (!uploadResponse.ok) {
                        throw new Error('Failed to upload cover image');
                    }
                    
                    coverImageUrl = `https://${signedUrlData.bucket}.s3.${signedUrlData.region}.amazonaws.com/${signedUrlData.key}`;
                    coverImageS3Key = signedUrlData.key;
                }
                
                let apiUrl, method, body;
                
                if (isEdit) {
                    apiUrl = `${API_BASE}/website-content/archives/entry/${entryId}`;
                    method = 'PUT';
                    body = { coupleName, weddingPlace, weddingDate, description, isActive };
                    if (coverImageUrl) {
                        body.coverImageUrl = coverImageUrl;
                        body.coverImageS3Key = coverImageS3Key;
                    }
                } else {
                    apiUrl = `${API_BASE}/website-content/archives/entry`;
                    method = 'POST';
                    body = { coupleName, weddingPlace, weddingDate, description, coverImageUrl, coverImageS3Key };
                }
                
                const response = await fetch(apiUrl, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify(body)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast(isEdit ? 'Archive updated successfully' : 'Archive added successfully', 'success');
                    closeArchiveEntryModal();
                    loadWebsiteArchives();
                } else {
                    throw new Error(data.error || 'Failed to save archive');
                }
            } catch (error) {
                console.error('Error saving archive:', error);
                showToast(error.message || 'Failed to save archive', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Wedding';
            }
        }

        async function deleteArchiveEntry(entryId) {
            if (!confirm('Are you sure you want to delete this archive? This will also delete all gallery images.')) {
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE}/website-content/archives/entry/${entryId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Archive deleted successfully', 'success');
                    loadWebsiteArchives();
                } else {
                    throw new Error(data.error || 'Failed to delete archive');
                }
            } catch (error) {
                console.error('Error deleting archive:', error);
                showToast(error.message || 'Failed to delete archive', 'error');
            }
        }

        // Gallery Modal Functions
        function openArchiveGalleryModal(entryId) {
            const entry = currentArchiveEntries.find(e => e._id === entryId);
            if (!entry) return;
            
            document.getElementById('galleryModalTitle').textContent = `${entry.coupleName} - Gallery`;
            document.getElementById('galleryEntryId').value = entryId;
            document.getElementById('galleryUploadProgress').style.display = 'none';
            galleryFilesToUpload = [];
            
            renderGalleryGrid(entry.galleryImages || []);
            document.getElementById('archiveGalleryModal').classList.add('active');
        }

        function closeArchiveGalleryModal() {
            document.getElementById('archiveGalleryModal').classList.remove('active');
            galleryFilesToUpload = [];
        }

        function renderGalleryGrid(images) {
            const grid = document.getElementById('galleryGrid');
            
            if (!images || images.length === 0) {
                grid.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No images in gallery. Upload some above.</p>';
                return;
            }
            
            grid.innerHTML = images.map(img => `
                <div class="gallery-item" data-id="${img._id}">
                    <img src="${img.imageUrl}" alt="Gallery image" onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22150%22 height=%22150%22 fill=%22%23333%22%3E%3Crect width=%22100%25%22 height=%22100%25%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 fill=%22%23666%22 font-size=%2212%22 text-anchor=%22middle%22 dy=%22.3em%22%3EError%3C/text%3E%3C/svg%3E'">
                    <button class="gallery-item-delete" onclick="deleteGalleryImage('${img._id}')">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            `).join('');
        }

        async function handleGalleryImagesSelect(event) {
            const files = Array.from(event.target.files);
            if (files.length === 0) return;
            
            const entryId = document.getElementById('galleryEntryId').value;
            if (!entryId) return;
            
            const progressDiv = document.getElementById('galleryUploadProgress');
            const progressFill = document.getElementById('galleryProgressFill');
            const progressText = document.getElementById('galleryProgressText');
            
            progressDiv.style.display = 'block';
            
            const uploadedImages = [];
            
            // Calculate total size for progress display
            const totalSize = files.reduce((sum, f) => sum + f.size, 0);
            let uploadedSize = 0;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const progress = ((i + 1) / files.length) * 100;
                progressFill.style.width = `${progress}%`;
                const uploadedMB = (uploadedSize / (1024 * 1024)).toFixed(1);
                const totalMB = (totalSize / (1024 * 1024)).toFixed(1);
                progressText.textContent = `Uploading ${i + 1} of ${files.length}... (${uploadedMB} MB / ${totalMB} MB)`;
                
                try {
                    const compressedFile = await compressImage(file, 1200, 0.85);
                    
                    const signedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: file.name,
                            mimeType: compressedFile.type,
                            fileSize: compressedFile.size,
                            prefix: `archives/gallery/${entryId}`
                        })
                    });
                    
                    const signedUrlData = await signedUrlResult.json();
                    if (!signedUrlData.success) {
                        throw new Error(signedUrlData.error);
                    }
                    
                    const uploadResponse = await fetch(signedUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': compressedFile.type },
                        body: compressedFile
                    });
                    
                    if (!uploadResponse.ok) {
                        throw new Error('Upload failed');
                    }
                    
                    uploadedImages.push({
                        imageUrl: `https://${signedUrlData.bucket}.s3.${signedUrlData.region}.amazonaws.com/${signedUrlData.key}`,
                        s3Key: signedUrlData.key
                    });
                    
                    // Update uploaded size
                    uploadedSize += file.size;
                } catch (error) {
                    console.error(`Error uploading ${file.name}:`, error);
                }
            }
            
            // Save uploaded images to database
            if (uploadedImages.length > 0) {
                try {
                    const response = await fetch(`${API_BASE}/website-content/archives/entry/${entryId}/gallery`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({ images: uploadedImages })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showToast(`${uploadedImages.length} image(s) uploaded successfully`, 'success');
                        // Refresh the current entry's gallery
                        const entry = data.data.archives.entries.find(e => e._id === entryId);
                        if (entry) {
                            renderGalleryGrid(entry.galleryImages);
                            // Update the local cache
                            const localEntry = currentArchiveEntries.find(e => e._id === entryId);
                            if (localEntry) {
                                localEntry.galleryImages = entry.galleryImages;
                                renderArchiveEntriesGrid();
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error saving gallery images:', error);
                    showToast('Error saving gallery images', 'error');
                }
            }
            
            progressDiv.style.display = 'none';
            document.getElementById('galleryImagesInput').value = '';
        }

        async function deleteGalleryImage(imageId) {
            const entryId = document.getElementById('galleryEntryId').value;
            if (!entryId) return;
            
            if (!confirm('Delete this image?')) return;
            
            try {
                const response = await fetch(`${API_BASE}/website-content/archives/entry/${entryId}/gallery/${imageId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Image deleted', 'success');
                    const entry = data.data.archives.entries.find(e => e._id === entryId);
                    if (entry) {
                        renderGalleryGrid(entry.galleryImages);
                        // Update local cache
                        const localEntry = currentArchiveEntries.find(e => e._id === entryId);
                        if (localEntry) {
                            localEntry.galleryImages = entry.galleryImages;
                            renderArchiveEntriesGrid();
                        }
                    }
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error deleting image:', error);
                showToast('Failed to delete image', 'error');
            }
        }

        // ==========================================
        // Website Controls - Films Page
        // ==========================================
        
        let filmThumbnailFile = null;
        let currentFilmEntries = [];

        async function loadWebsiteFilms() {
            const grid = document.getElementById('filmEntriesGrid');
            grid.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            try {
                const response = await fetch(`${API_BASE}/website-content/films`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                
                if (data.success && data.data && data.data.films && data.data.films.entries) {
                    currentFilmEntries = data.data.films.entries.sort((a, b) => a.sortOrder - b.sortOrder);
                    renderFilmEntriesGrid();
                } else {
                    currentFilmEntries = [];
                    renderFilmEntriesGrid();
                }
            } catch (error) {
                console.error('Error loading films:', error);
                grid.innerHTML = '<div class="film-empty"><p>Error loading films</p></div>';
            }
        }

        function renderFilmEntriesGrid() {
            const grid = document.getElementById('filmEntriesGrid');
            
            if (currentFilmEntries.length === 0) {
                grid.innerHTML = `
                    <div class="film-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        <p>No wedding films yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Film" to create your first film</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentFilmEntries.map((entry, index) => `
                <div class="film-entry-card" data-id="${entry._id}">
                    <div class="film-entry-thumbnail">
                        <img src="${entry.thumbnailUrl}" alt="${entry.title}" onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22640%22 height=%22360%22 fill=%22%23333%22%3E%3Crect width=%22100%25%22 height=%22100%25%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 fill=%22%23666%22 font-size=%2216%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo Thumbnail%3C/text%3E%3C/svg%3E'">
                        <div class="film-entry-play-icon">
                            <svg viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        </div>
                        <span class="film-entry-badge">#${index + 1}</span>
                        ${entry.duration ? `<span class="film-entry-duration">${entry.duration}</span>` : ''}
                        <span class="film-entry-status ${entry.isActive ? 'active' : 'inactive'}"></span>
                    </div>
                    <div class="film-entry-info">
                        <div class="film-entry-title">${entry.title}</div>
                        <div class="film-entry-couple">${entry.coupleName}</div>
                        ${entry.weddingPlace ? `<div class="film-entry-place">${entry.weddingPlace}</div>` : ''}
                        <div class="film-entry-source">
                            ${entry.youtubeUrl ? '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg> YouTube' : ''}
                            ${entry.vimeoUrl ? '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.977 6.416c-.105 2.338-1.739 5.543-4.894 9.609-3.268 4.247-6.026 6.37-8.29 6.37-1.409 0-2.578-1.294-3.553-3.881L5.322 11.4C4.603 8.816 3.834 7.522 3.01 7.522c-.179 0-.806.378-1.881 1.132L0 7.197c1.185-1.044 2.351-2.084 3.501-3.128C5.08 2.701 6.266 1.984 7.055 1.91c1.867-.18 3.016 1.1 3.447 3.838.465 2.953.789 4.789.971 5.507.539 2.45 1.131 3.674 1.776 3.674.502 0 1.256-.796 2.265-2.385 1.004-1.589 1.54-2.797 1.612-3.628.144-1.371-.395-2.061-1.614-2.061-.574 0-1.167.121-1.777.391 1.186-3.868 3.434-5.757 6.762-5.637 2.473.06 3.628 1.664 3.493 4.797l-.013.01z"/></svg> Vimeo' : ''}
                            ${(!entry.youtubeUrl && !entry.vimeoUrl && (entry.videoUrl || entry.videoS3Key)) ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg> S3 Video' : ''}
                        </div>
                    </div>
                    <div class="film-entry-actions">
                        <button class="btn-preview" onclick="previewFilm('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            Preview
                        </button>
                        <button class="btn-edit" onclick="editFilmEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit
                        </button>
                        <button class="btn-delete" onclick="deleteFilmEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Film Entry Modal Functions
        let filmVideoFile = null;
        let currentVideoSourceType = 'upload';
        
        function switchVideoTab(type) {
            currentVideoSourceType = type;
            
            // Update tab active states
            document.getElementById('videoTabUpload').classList.toggle('active', type === 'upload');
            document.getElementById('videoTabYoutube').classList.toggle('active', type === 'youtube');
            document.getElementById('videoTabVimeo').classList.toggle('active', type === 'vimeo');
            
            // Show/hide sections
            document.getElementById('videoSourceUpload').style.display = type === 'upload' ? 'block' : 'none';
            document.getElementById('videoSourceYoutube').style.display = type === 'youtube' ? 'block' : 'none';
            document.getElementById('videoSourceVimeo').style.display = type === 'vimeo' ? 'block' : 'none';
        }
        
        function handleFilmVideoSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (3GB limit for wedding films)
            const maxSize = 3 * 1024 * 1024 * 1024; // 3GB
            if (file.size > maxSize) {
                showToast('Video file is too large. Maximum size is 3GB.', 'error');
                return;
            }
            
            filmVideoFile = file;
            document.getElementById('filmVideoDropzone').style.display = 'none';
            document.getElementById('filmVideoPreview').style.display = 'block';
            document.getElementById('filmVideoFileName').textContent = file.name;
            document.getElementById('filmVideoFileSize').textContent = formatFileSize(file.size);
        }
        
        function clearFilmVideo() {
            filmVideoFile = null;
            document.getElementById('filmVideoInput').value = '';
            document.getElementById('filmVideoDropzone').style.display = 'block';
            document.getElementById('filmVideoPreview').style.display = 'none';
            document.getElementById('filmVideoUploadProgress').style.display = 'none';
            document.getElementById('filmVideoS3Key').value = '';
            document.getElementById('filmVideoUrl').value = '';
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function openAddFilmModal() {
            document.getElementById('filmModalTitle').textContent = 'Add Wedding Film';
            document.getElementById('filmSubmitBtn').textContent = 'Add Film';
            document.getElementById('filmEntryForm').reset();
            document.getElementById('filmEntryId').value = '';
            document.getElementById('filmActiveField').style.display = 'none';
            document.getElementById('filmThumbnailDropzone').style.display = 'block';
            document.getElementById('filmThumbnailPreview').style.display = 'none';
            filmThumbnailFile = null;
            
            // Reset video section
            filmVideoFile = null;
            switchVideoTab('upload');
            document.getElementById('filmVideoDropzone').style.display = 'block';
            document.getElementById('filmVideoPreview').style.display = 'none';
            document.getElementById('filmVideoUploadProgress').style.display = 'none';
            document.getElementById('filmVideoS3Key').value = '';
            document.getElementById('filmVideoUrl').value = '';
            
            document.getElementById('filmEntryModal').classList.add('active');
        }

        function editFilmEntry(entryId) {
            const entry = currentFilmEntries.find(e => e._id === entryId);
            if (!entry) return;
            
            document.getElementById('filmModalTitle').textContent = 'Edit Wedding Film';
            document.getElementById('filmSubmitBtn').textContent = 'Save Changes';
            document.getElementById('filmEntryId').value = entry._id;
            document.getElementById('filmTitle').value = entry.title || '';
            document.getElementById('filmCoupleName').value = entry.coupleName || '';
            document.getElementById('filmWeddingPlace').value = entry.weddingPlace || '';
            document.getElementById('filmDuration').value = entry.duration || '';
            document.getElementById('filmDescription').value = entry.description || '';
            document.getElementById('filmYoutubeUrl').value = entry.youtubeUrl || '';
            document.getElementById('filmVimeoUrl').value = entry.vimeoUrl || '';
            document.getElementById('filmIsActive').checked = entry.isActive !== false;
            document.getElementById('filmActiveField').style.display = 'block';
            
            // Show current thumbnail
            document.getElementById('filmThumbnailDropzone').style.display = 'none';
            document.getElementById('filmThumbnailPreview').style.display = 'block';
            document.getElementById('filmThumbnailPreviewImg').src = entry.thumbnailUrl;
            filmThumbnailFile = null;
            
            // Set video source based on existing entry
            filmVideoFile = null;
            if (entry.youtubeUrl) {
                switchVideoTab('youtube');
            } else if (entry.vimeoUrl) {
                switchVideoTab('vimeo');
            } else {
                switchVideoTab('upload');
                // Show existing video info if present
                if (entry.videoS3Key || entry.videoUrl) {
                    document.getElementById('filmVideoDropzone').style.display = 'none';
                    document.getElementById('filmVideoPreview').style.display = 'block';
                    document.getElementById('filmVideoFileName').textContent = 'Existing video file';
                    document.getElementById('filmVideoFileSize').textContent = 'Click Remove to change';
                    document.getElementById('filmVideoS3Key').value = entry.videoS3Key || '';
                    document.getElementById('filmVideoUrl').value = entry.videoUrl || '';
                } else {
                    document.getElementById('filmVideoDropzone').style.display = 'block';
                    document.getElementById('filmVideoPreview').style.display = 'none';
                }
            }
            
            document.getElementById('filmEntryModal').classList.add('active');
        }

        function closeFilmEntryModal() {
            document.getElementById('filmEntryModal').classList.remove('active');
            filmThumbnailFile = null;
            filmVideoFile = null;
        }

        function handleFilmThumbnailSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            filmThumbnailFile = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('filmThumbnailDropzone').style.display = 'none';
                document.getElementById('filmThumbnailPreview').style.display = 'block';
                document.getElementById('filmThumbnailPreviewImg').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function clearFilmThumbnail() {
            filmThumbnailFile = null;
            document.getElementById('filmThumbnailInput').value = '';
            document.getElementById('filmThumbnailDropzone').style.display = 'block';
            document.getElementById('filmThumbnailPreview').style.display = 'none';
        }

        async function saveFilmEntry(event) {
            event.preventDefault();
            
            const entryId = document.getElementById('filmEntryId').value;
            const isEdit = !!entryId;
            
            const title = document.getElementById('filmTitle').value.trim();
            const coupleName = document.getElementById('filmCoupleName').value.trim();
            const weddingPlace = document.getElementById('filmWeddingPlace').value.trim();
            const duration = document.getElementById('filmDuration').value.trim();
            const description = document.getElementById('filmDescription').value.trim();
            const isActive = document.getElementById('filmIsActive').checked;
            
            // Get video sources based on selected tab
            let youtubeUrl = '';
            let vimeoUrl = '';
            let videoUrl = document.getElementById('filmVideoUrl').value || '';
            let videoS3Key = document.getElementById('filmVideoS3Key').value || '';
            
            if (currentVideoSourceType === 'youtube') {
                youtubeUrl = document.getElementById('filmYoutubeUrl').value.trim();
            } else if (currentVideoSourceType === 'vimeo') {
                vimeoUrl = document.getElementById('filmVimeoUrl').value.trim();
            }
            
            if (!title || !coupleName) {
                showToast('Please fill in required fields', 'error');
                return;
            }
            
            // For new entries, thumbnail is required
            if (!isEdit && !filmThumbnailFile) {
                showToast('Please select a thumbnail image', 'error');
                return;
            }
            
            // Validate video source based on type
            if (currentVideoSourceType === 'youtube' && !youtubeUrl) {
                showToast('Please provide a YouTube URL', 'error');
                return;
            } else if (currentVideoSourceType === 'vimeo' && !vimeoUrl) {
                showToast('Please provide a Vimeo URL', 'error');
                return;
            } else if (currentVideoSourceType === 'upload' && !filmVideoFile && !videoS3Key) {
                showToast('Please upload a video file', 'error');
                return;
            }
            
            const submitBtn = document.getElementById('filmSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = isEdit ? 'Saving...' : 'Adding...';
            
            try {
                let thumbnailUrl = '';
                let thumbnailS3Key = '';
                
                // If new thumbnail file selected, upload it
                if (filmThumbnailFile) {
                    const compressedFile = await compressImage(filmThumbnailFile, 1280, 0.85);
                    
                    const signedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: filmThumbnailFile.name,
                            mimeType: compressedFile.type,
                            fileSize: compressedFile.size,
                            prefix: 'films/thumbnails'
                        })
                    });
                    
                    const signedUrlData = await signedUrlResult.json();
                    if (!signedUrlData.success) {
                        throw new Error(signedUrlData.error || 'Failed to get upload URL');
                    }
                    
                    const uploadResponse = await fetch(signedUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': compressedFile.type },
                        body: compressedFile
                    });
                    
                    if (!uploadResponse.ok) {
                        throw new Error('Failed to upload thumbnail');
                    }
                    
                    thumbnailUrl = `https://${signedUrlData.bucket}.s3.${signedUrlData.region}.amazonaws.com/${signedUrlData.key}`;
                    thumbnailS3Key = signedUrlData.key;
                }
                
                // If new video file selected, upload it to S3
                if (filmVideoFile) {
                    submitBtn.textContent = 'Uploading video...';
                    
                    // Show progress
                    document.getElementById('filmVideoUploadProgress').style.display = 'block';
                    document.getElementById('filmVideoProgressText').textContent = 'Getting upload URL...';
                    
                    const videoSignedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: filmVideoFile.name,
                            mimeType: filmVideoFile.type,
                            fileSize: filmVideoFile.size,
                            prefix: 'films/videos'
                        })
                    });
                    
                    const videoSignedUrlData = await videoSignedUrlResult.json();
                    if (!videoSignedUrlData.success) {
                        throw new Error(videoSignedUrlData.error || 'Failed to get video upload URL');
                    }
                    
                    document.getElementById('filmVideoProgressText').textContent = 'Uploading video...';
                    
                    // Use XMLHttpRequest for progress tracking
                    await new Promise((resolve, reject) => {
                        const xhr = new XMLHttpRequest();
                        
                        xhr.upload.addEventListener('progress', (e) => {
                            if (e.lengthComputable) {
                                const percent = Math.round((e.loaded / e.total) * 100);
                                const loadedMB = (e.loaded / (1024 * 1024)).toFixed(1);
                                const totalMB = (e.total / (1024 * 1024)).toFixed(1);
                                document.getElementById('filmVideoProgressFill').style.width = percent + '%';
                                document.getElementById('filmVideoProgressText').textContent = `Uploading video... ${percent}% (${loadedMB} MB / ${totalMB} MB)`;
                            }
                        });
                        
                        xhr.addEventListener('load', () => {
                            if (xhr.status >= 200 && xhr.status < 300) {
                                resolve();
                            } else {
                                reject(new Error('Failed to upload video'));
                            }
                        });
                        
                        xhr.addEventListener('error', () => reject(new Error('Video upload failed')));
                        xhr.addEventListener('abort', () => reject(new Error('Video upload aborted')));
                        
                        xhr.open('PUT', videoSignedUrlData.uploadUrl);
                        xhr.setRequestHeader('Content-Type', filmVideoFile.type);
                        xhr.send(filmVideoFile);
                    });
                    
                    videoUrl = `https://${videoSignedUrlData.bucket}.s3.${videoSignedUrlData.region}.amazonaws.com/${videoSignedUrlData.key}`;
                    videoS3Key = videoSignedUrlData.key;
                    
                    document.getElementById('filmVideoProgressText').textContent = 'Video uploaded! Compressing...';
                    
                    // Always compress video on the backend
                    document.getElementById('filmVideoProgressFill').style.width = '0%';
                    document.getElementById('filmVideoProgressFill').style.animation = 'pulse 1.5s ease-in-out infinite';
                    
                    try {
                        submitBtn.textContent = 'Compressing video...';
                        const optimizeResponse = await fetch(`${API_BASE}/s3/optimize-video`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${authToken}`
                            },
                            body: JSON.stringify({
                                s3Key: videoS3Key,
                                quality: 'balanced',
                                replaceOriginal: true
                            })
                        });
                        
                        const optimizeData = await optimizeResponse.json();
                        document.getElementById('filmVideoProgressFill').style.animation = 'none';
                        
                        if (optimizeData.success) {
                            videoUrl = optimizeData.url || videoUrl;
                            videoS3Key = optimizeData.s3Key || videoS3Key;
                            document.getElementById('filmVideoProgressFill').style.width = '100%';
                            document.getElementById('filmVideoProgressText').textContent = 
                                `Video compressed! ${optimizeData.originalSize}  ${optimizeData.compressedSize} (${optimizeData.reduction} smaller)`;
                            console.log('Video optimization result:', optimizeData);
                        } else {
                            console.warn('Video compression skipped:', optimizeData.error);
                            document.getElementById('filmVideoProgressFill').style.width = '100%';
                            document.getElementById('filmVideoProgressText').textContent = 
                                'Video uploaded (compression skipped: ' + (optimizeData.error || 'unavailable') + ')';
                        }
                    } catch (optimizeError) {
                        console.error('Video compression error:', optimizeError);
                        document.getElementById('filmVideoProgressFill').style.animation = 'none';
                        document.getElementById('filmVideoProgressFill').style.width = '100%';
                        document.getElementById('filmVideoProgressText').textContent = 
                            'Video uploaded (compression skipped due to error)';
                    }
                }
                
                let apiUrl, method, body;
                
                if (isEdit) {
                    apiUrl = `${API_BASE}/website-content/films/entry/${entryId}`;
                    method = 'PUT';
                    body = { title, coupleName, weddingPlace, duration, description, youtubeUrl, vimeoUrl, videoUrl, videoS3Key, isActive };
                    if (thumbnailUrl) {
                        body.thumbnailUrl = thumbnailUrl;
                        body.thumbnailS3Key = thumbnailS3Key;
                    }
                } else {
                    apiUrl = `${API_BASE}/website-content/films/entry`;
                    method = 'POST';
                    body = { title, coupleName, weddingPlace, duration, description, youtubeUrl, vimeoUrl, videoUrl, videoS3Key, thumbnailUrl, thumbnailS3Key };
                }
                
                const response = await fetch(apiUrl, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify(body)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast(isEdit ? 'Film updated successfully' : 'Film added successfully', 'success');
                    closeFilmEntryModal();
                    loadWebsiteFilms();
                } else {
                    throw new Error(data.error || 'Failed to save film');
                }
            } catch (error) {
                console.error('Error saving film:', error);
                showToast(error.message || 'Failed to save film', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Film';
                filmVideoFile = null;
            }
        }

        async function deleteFilmEntry(entryId) {
            if (!confirm('Are you sure you want to delete this film?')) {
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE}/website-content/films/entry/${entryId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Film deleted successfully', 'success');
                    loadWebsiteFilms();
                } else {
                    throw new Error(data.error || 'Failed to delete film');
                }
            } catch (error) {
                console.error('Error deleting film:', error);
                showToast(error.message || 'Failed to delete film', 'error');
            }
        }

        // Film Preview Modal
        function previewFilm(entryId) {
            const entry = currentFilmEntries.find(e => e._id === entryId);
            if (!entry) return;
            
            document.getElementById('filmPreviewTitle').textContent = entry.title;
            const container = document.getElementById('filmPreviewContainer');
            
            if (entry.youtubeUrl) {
                const videoId = extractYouTubeId(entry.youtubeUrl);
                if (videoId) {
                    container.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${videoId}?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                }
            } else if (entry.vimeoUrl) {
                const videoId = extractVimeoId(entry.vimeoUrl);
                if (videoId) {
                    container.innerHTML = `<iframe width="100%" height="100%" src="https://player.vimeo.com/video/${videoId}?autoplay=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>`;
                }
            } else if (entry.videoUrl) {
                container.innerHTML = `<video width="100%" height="100%" controls autoplay><source src="${entry.videoUrl}" type="video/mp4">Your browser does not support the video tag.</video>`;
            } else {
                container.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No video source available</p>';
            }
            
            document.getElementById('filmPreviewModal').classList.add('active');
        }

        function closeFilmPreviewModal() {
            document.getElementById('filmPreviewModal').classList.remove('active');
            document.getElementById('filmPreviewContainer').innerHTML = '';
        }

        function extractYouTubeId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function extractVimeoId(url) {
            const regExp = /vimeo\.com\/(\d+)/;
            const match = url.match(regExp);
            return match ? match[1] : null;
        }

        // ==========================================
        // Website Controls - Services
        // ==========================================
        
        let currentServiceEntries = [];
        let serviceImageFile = null;
        let serviceFeatures = [];

        async function loadWebsiteServices() {
            const grid = document.getElementById('servicesEntriesGrid');
            
            try {
                const response = await fetch(`${API_BASE}/website-content/services`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                
                if (data.success && data.data && data.data.services) {
                    const servicesData = data.data.services;
                    
                    // Populate section settings
                    document.getElementById('servicesSectionLabel').value = servicesData.sectionLabel || '';
                    document.getElementById('servicesSectionTitle').value = servicesData.sectionTitle || '';
                    document.getElementById('servicesSectionSubtitle').value = servicesData.sectionSubtitle || '';
                    
                    currentServiceEntries = servicesData.entries || [];
                    // Sort by sortOrder
                    currentServiceEntries.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    renderServiceEntriesGrid();
                } else {
                    currentServiceEntries = [];
                    renderServiceEntriesGrid();
                }
            } catch (error) {
                console.error('Error loading services:', error);
                grid.innerHTML = `<div class="services-empty"><p>Error loading services</p></div>`;
            }
        }

        async function saveServicesSectionSettings() {
            const sectionLabel = document.getElementById('servicesSectionLabel').value.trim();
            const sectionTitle = document.getElementById('servicesSectionTitle').value.trim();
            const sectionSubtitle = document.getElementById('servicesSectionSubtitle').value.trim();
            
            try {
                const response = await fetch(`${API_BASE}/website-content/services`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        services: {
                            sectionLabel,
                            sectionTitle,
                            sectionSubtitle
                        }
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    showToast('Section settings saved successfully', 'success');
                } else {
                    throw new Error(data.error || 'Failed to save');
                }
            } catch (error) {
                console.error('Error saving section settings:', error);
                showToast(error.message || 'Failed to save section settings', 'error');
            }
        }

        function renderServiceEntriesGrid() {
            const grid = document.getElementById('servicesEntriesGrid');
            
            if (currentServiceEntries.length === 0) {
                grid.innerHTML = `
                    <div class="services-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <p>No services yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Service" to create your first service</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentServiceEntries.map((entry, index) => `
                <div class="service-entry-card" data-id="${entry._id}">
                    <div class="service-entry-image">
                        <img src="${entry.imageUrl}" alt="${entry.title}" onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22600%22 height=%22400%22 fill=%22%23333%22%3E%3Crect width=%22100%25%22 height=%22100%25%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 fill=%22%23666%22 font-size=%2214%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo Image%3C/text%3E%3C/svg%3E'">
                        <span class="service-entry-badge-tag">${entry.badge}</span>
                        <span class="service-entry-status ${entry.isActive ? 'active' : 'inactive'}"></span>
                    </div>
                    <div class="service-entry-info">
                        <div class="service-entry-title">${entry.title}</div>
                        <div class="service-entry-description">${entry.description}</div>
                        ${entry.features && entry.features.length > 0 ? `
                            <ul class="service-entry-features">
                                ${entry.features.slice(0, 3).map(f => `
                                    <li>
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="20 6 9 17 4 12"/>
                                        </svg>
                                        ${f.text}
                                    </li>
                                `).join('')}
                            </ul>
                        ` : ''}
                    </div>
                    <div class="service-entry-actions">
                        <button class="btn-edit" onclick="editServiceEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit
                        </button>
                        <button class="btn-delete" onclick="deleteServiceEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Service Entry Modal Functions
        function openAddServiceModal() {
            console.log('openAddServiceModal called');
            try {
                document.getElementById('serviceModalTitle').textContent = 'Add Service';
                document.getElementById('serviceSubmitBtn').textContent = 'Add Service';
                document.getElementById('serviceEntryForm').reset();
                document.getElementById('serviceEntryId').value = '';
                document.getElementById('serviceActiveField').style.display = 'none';
                document.getElementById('serviceImageDropzone').style.display = 'block';
                document.getElementById('serviceImagePreview').style.display = 'none';
                serviceImageFile = null;
                serviceFeatures = [];
                renderServiceFeatures();
                const modal = document.getElementById('serviceEntryModal');
                console.log('Modal element:', modal);
                modal.classList.add('active');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                console.log('Modal classes after add:', modal.className);
            } catch (error) {
                console.error('Error opening service modal:', error);
            }
        }

        function editServiceEntry(entryId) {
            console.log('editServiceEntry called with:', entryId);
            console.log('currentServiceEntries:', currentServiceEntries);
            const entry = currentServiceEntries.find(e => e._id === entryId);
            console.log('Found entry:', entry);
            if (!entry) {
                console.error('Entry not found!');
                return;
            }
            
            document.getElementById('serviceModalTitle').textContent = 'Edit Service';
            document.getElementById('serviceSubmitBtn').textContent = 'Save Changes';
            document.getElementById('serviceEntryId').value = entry._id;
            document.getElementById('serviceBadge').value = entry.badge || '';
            document.getElementById('serviceTitle').value = entry.title || '';
            document.getElementById('serviceDescription').value = entry.description || '';
            document.getElementById('serviceLinkText').value = entry.linkText || 'Learn More';
            document.getElementById('serviceLinkUrl').value = entry.linkUrl || '#contact';
            document.getElementById('serviceIsActive').checked = entry.isActive !== false;
            document.getElementById('serviceActiveField').style.display = 'block';
            
            // Show current image
            document.getElementById('serviceImageDropzone').style.display = 'none';
            document.getElementById('serviceImagePreview').style.display = 'block';
            document.getElementById('serviceImagePreviewImg').src = entry.imageUrl;
            serviceImageFile = null;
            
            // Load features
            serviceFeatures = entry.features ? entry.features.map(f => f.text) : [];
            renderServiceFeatures();
            
            const modal = document.getElementById('serviceEntryModal');
            modal.classList.add('active');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeServiceEntryModal() {
            const modal = document.getElementById('serviceEntryModal');
            modal.classList.remove('active');
            modal.style.display = 'none';
            document.body.style.overflow = '';
            serviceImageFile = null;
            serviceFeatures = [];
        }

        function handleServiceImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            serviceImageFile = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('serviceImageDropzone').style.display = 'none';
                document.getElementById('serviceImagePreview').style.display = 'block';
                document.getElementById('serviceImagePreviewImg').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function clearServiceImage() {
            serviceImageFile = null;
            document.getElementById('serviceImageInput').value = '';
            document.getElementById('serviceImageDropzone').style.display = 'block';
            document.getElementById('serviceImagePreview').style.display = 'none';
        }

        function addServiceFeature() {
            serviceFeatures.push('');
            renderServiceFeatures();
            // Focus the new input
            const container = document.getElementById('serviceFeaturesContainer');
            const inputs = container.querySelectorAll('input');
            if (inputs.length > 0) {
                inputs[inputs.length - 1].focus();
            }
        }

        function removeServiceFeature(index) {
            serviceFeatures.splice(index, 1);
            renderServiceFeatures();
        }

        function updateServiceFeature(index, value) {
            serviceFeatures[index] = value;
        }

        function renderServiceFeatures() {
            const container = document.getElementById('serviceFeaturesContainer');
            container.innerHTML = serviceFeatures.map((feature, index) => `
                <div class="feature-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--gold)" stroke-width="2" style="width: 16px; height: 16px; flex-shrink: 0;">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    <input type="text" value="${feature}" placeholder="Feature description..." onchange="updateServiceFeature(${index}, this.value)" onblur="updateServiceFeature(${index}, this.value)">
                    <button type="button" onclick="removeServiceFeature(${index})">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 16px; height: 16px;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            `).join('');
        }

        async function saveServiceEntry(event) {
            event.preventDefault();
            
            const entryId = document.getElementById('serviceEntryId').value;
            const isEdit = !!entryId;
            
            const badge = document.getElementById('serviceBadge').value.trim();
            const title = document.getElementById('serviceTitle').value.trim();
            const description = document.getElementById('serviceDescription').value.trim();
            const linkText = document.getElementById('serviceLinkText').value.trim() || 'Learn More';
            const linkUrl = document.getElementById('serviceLinkUrl').value.trim() || '#contact';
            const isActive = document.getElementById('serviceIsActive').checked;
            
            // Filter empty features
            const features = serviceFeatures.filter(f => f.trim()).map((text, index) => ({ text, sortOrder: index }));
            
            if (!badge || !title || !description) {
                showToast('Please fill in required fields', 'error');
                return;
            }
            
            // For new entries, image is required
            if (!isEdit && !serviceImageFile) {
                showToast('Please select an image', 'error');
                return;
            }
            
            const submitBtn = document.getElementById('serviceSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = isEdit ? 'Saving...' : 'Adding...';
            
            try {
                let imageUrl = '';
                let imageS3Key = '';
                
                // If new image file selected, upload it
                if (serviceImageFile) {
                    const compressedFile = await compressImage(serviceImageFile, 800, 0.85);
                    
                    const signedUrlResult = await fetch(`${BACKEND_URL}/api/admin/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${authToken}`
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: serviceImageFile.name,
                            mimeType: compressedFile.type,
                            fileSize: compressedFile.size,
                            prefix: 'services'
                        })
                    });
                    
                    const signedUrlData = await signedUrlResult.json();
                    if (!signedUrlData.success) {
                        throw new Error(signedUrlData.error || 'Failed to get upload URL');
                    }
                    
                    const uploadResponse = await fetch(signedUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': compressedFile.type },
                        body: compressedFile
                    });
                    
                    if (!uploadResponse.ok) {
                        throw new Error('Failed to upload image');
                    }
                    
                    imageUrl = `https://${signedUrlData.bucket}.s3.${signedUrlData.region}.amazonaws.com/${signedUrlData.key}`;
                    imageS3Key = signedUrlData.key;
                }
                
                let apiUrl, method, body;
                
                if (isEdit) {
                    apiUrl = `${API_BASE}/website-content/services/entry/${entryId}`;
                    method = 'PUT';
                    body = { badge, title, description, features, linkText, linkUrl, isActive };
                    if (imageUrl) {
                        body.imageUrl = imageUrl;
                        body.imageS3Key = imageS3Key;
                    }
                } else {
                    apiUrl = `${API_BASE}/website-content/services/entry`;
                    method = 'POST';
                    body = { badge, title, description, features, linkText, linkUrl, imageUrl, imageS3Key };
                }
                
                const response = await fetch(apiUrl, {
                    method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify(body)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast(isEdit ? 'Service updated successfully' : 'Service added successfully', 'success');
                    closeServiceEntryModal();
                    loadWebsiteServices();
                } else {
                    throw new Error(data.error || 'Failed to save service');
                }
            } catch (error) {
                console.error('Error saving service:', error);
                showToast(error.message || 'Failed to save service', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Service';
            }
        }

        async function deleteServiceEntry(entryId) {
            if (!confirm('Are you sure you want to delete this service?')) {
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE}/website-content/services/entry/${entryId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast('Service deleted successfully', 'success');
                    loadWebsiteServices();
                } else {
                    throw new Error(data.error || 'Failed to delete service');
                }
            } catch (error) {
                console.error('Error deleting service:', error);
                showToast(error.message || 'Failed to delete service', 'error');
            }
        }

        // ==========================================
        // Website Controls - Testimonials
        // ==========================================
        
        let currentTestimonialEntries = [];
        let testimonialPhotoFile = null;

        async function loadWebsiteTestimonials() {
            const grid = document.getElementById('testimonialsGrid');
            
            try {
                const response = await fetch(`${API_BASE}/website-content/testimonials`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                
                if (data.success && data.data && data.data.testimonials) {
                    currentTestimonialEntries = data.data.testimonials.entries || [];
                    // Sort by sortOrder
                    currentTestimonialEntries.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    renderTestimonialsGrid();
                } else {
                    currentTestimonialEntries = [];
                    renderTestimonialsGrid();
                }
            } catch (error) {
                console.error('Error loading testimonials:', error);
                grid.innerHTML = `<div class="testimonials-empty"><p>Error loading testimonials</p></div>`;
            }
        }

        function renderTestimonialsGrid() {
            const grid = document.getElementById('testimonialsGrid');
            
            if (currentTestimonialEntries.length === 0) {
                grid.innerHTML = `
                    <div class="testimonials-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                        </svg>
                        <p>No testimonials yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Testimonial" to add your first client testimonial</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentTestimonialEntries.map((entry) => `
                <div class="testimonial-card" data-id="${entry._id}">
                    <span class="testimonial-status ${entry.isActive ? 'active' : 'inactive'}"></span>
                    <div class="testimonial-header">
                        <div class="testimonial-photo">
                            ${entry.photoUrl ? 
                                `<img src="${entry.photoUrl}" alt="${entry.clientName}" onerror="this.onerror=null;this.parentElement.innerHTML='<div class=\\'testimonial-photo-placeholder\\'>${getInitials(entry.clientName)}</div>'">` :
                                `<div class="testimonial-photo-placeholder">${getInitials(entry.clientName)}</div>`
                            }
                        </div>
                        <div class="testimonial-client-info">
                            <div class="testimonial-client-name">${entry.clientName}</div>
                        </div>
                    </div>
                    <div class="testimonial-rating">
                        ${renderStars(entry.rating || 5)}
                    </div>
                    <div class="testimonial-content">"${truncateText(entry.content, 150)}"</div>
                    ${entry.weddingDate ? `<div class="testimonial-date">${entry.weddingDate}</div>` : ''}
                    <div class="testimonial-actions">
                        <button class="btn-edit" onclick="editTestimonialEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit
                        </button>
                        <button class="btn-delete" onclick="deleteTestimonialEntry('${entry._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getInitials(name) {
            if (!name) return '?';
            const parts = name.split(/[&,\s]+/).filter(p => p.length > 0);
            if (parts.length >= 2) {
                return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
            }
            return parts[0].substring(0, 2).toUpperCase();
        }

        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += `<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`;
                } else {
                    stars += `<svg viewBox="0 0 24 24" class="empty"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`;
                }
            }
            return stars;
        }

        function truncateText(text, maxLength) {
            if (!text) return '';
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '...';
        }

        // Testimonial Entry Modal Functions
        function openAddTestimonialModal() {
            document.getElementById('testimonialModalTitle').textContent = 'Add Testimonial';
            document.getElementById('testimonialSubmitBtn').textContent = 'Add Testimonial';
            document.getElementById('testimonialEntryForm').reset();
            document.getElementById('testimonialEntryId').value = '';
            document.getElementById('testimonialActiveField').style.display = 'none';
            document.getElementById('testimonialPhotoDropzone').style.display = 'block';
            document.getElementById('testimonialPhotoPreview').style.display = 'none';
            document.getElementById('testimonialRating').value = '5';
            testimonialPhotoFile = null;
            document.getElementById('testimonialEntryModal').classList.add('active');
        }

        function editTestimonialEntry(entryId) {
            const entry = currentTestimonialEntries.find(e => e._id === entryId);
            if (!entry) return;
            
            document.getElementById('testimonialModalTitle').textContent = 'Edit Testimonial';
            document.getElementById('testimonialSubmitBtn').textContent = 'Save Changes';
            document.getElementById('testimonialEntryId').value = entry._id;
            document.getElementById('testimonialClientName').value = entry.clientName || '';
            document.getElementById('testimonialWeddingDate').value = entry.weddingDate || '';
            document.getElementById('testimonialContent').value = entry.content || '';
            document.getElementById('testimonialRating').value = entry.rating || 5;
            document.getElementById('testimonialIsActive').checked = entry.isActive !== false;
            document.getElementById('testimonialActiveField').style.display = 'block';
            
            // Handle photo
            if (entry.photoUrl) {
                document.getElementById('testimonialPhotoDropzone').style.display = 'none';
                document.getElementById('testimonialPhotoPreview').style.display = 'block';
                document.getElementById('testimonialPhotoPreviewImg').src = entry.photoUrl;
            } else {
                document.getElementById('testimonialPhotoDropzone').style.display = 'block';
                document.getElementById('testimonialPhotoPreview').style.display = 'none';
            }
            
            testimonialPhotoFile = null;
            document.getElementById('testimonialEntryModal').classList.add('active');
        }

        function closeTestimonialEntryModal() {
            document.getElementById('testimonialEntryModal').classList.remove('active');
            testimonialPhotoFile = null;
        }

        function handleTestimonialPhotoSelect(event) {
            const file = event.target.files[0];
            if (file) {
                testimonialPhotoFile = file;
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('testimonialPhotoPreviewImg').src = e.target.result;
                    document.getElementById('testimonialPhotoDropzone').style.display = 'none';
                    document.getElementById('testimonialPhotoPreview').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        function clearTestimonialPhoto() {
            testimonialPhotoFile = null;
            document.getElementById('testimonialPhotoDropzone').style.display = 'block';
            document.getElementById('testimonialPhotoPreview').style.display = 'none';
        }

        async function saveTestimonialEntry(event) {
            event.preventDefault();
            
            const entryId = document.getElementById('testimonialEntryId').value;
            const isEdit = !!entryId;
            
            const submitBtn = document.getElementById('testimonialSubmitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Saving...';
            
            try {
                let photoUrl = '';
                let photoS3Key = '';
                
                // If editing and no new photo, keep existing
                if (isEdit && !testimonialPhotoFile) {
                    const existingEntry = currentTestimonialEntries.find(e => e._id === entryId);
                    if (existingEntry) {
                        photoUrl = existingEntry.photoUrl || '';
                        photoS3Key = existingEntry.photoS3Key || '';
                    }
                }
                
                // Upload new photo if selected
                if (testimonialPhotoFile) {
                    // Compress image
                    const compressedFile = await compressImage(testimonialPhotoFile, 400, 0.85);
                    
                    // Get upload URL
                    const timestamp = Date.now();
                    const filename = `testimonial_${timestamp}.jpg`;
                    
                    const uploadUrlRes = await fetch(`${API_BASE}/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${authToken}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: filename,
                            mimeType: 'image/jpeg',
                            fileSize: compressedFile.size,
                            prefix: 'testimonials'
                        })
                    });
                    
                    const uploadUrlData = await uploadUrlRes.json();
                    if (!uploadUrlData.success) throw new Error('Failed to get upload URL');
                    
                    // Upload to S3
                    await fetch(uploadUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'image/jpeg' },
                        body: compressedFile
                    });
                    
                    photoS3Key = uploadUrlData.key;
                    // photoUrl will be generated from photoS3Key via signed URL at read time
                    photoUrl = '';
                }
                
                const testimonialData = {
                    clientName: document.getElementById('testimonialClientName').value,
                    weddingDate: document.getElementById('testimonialWeddingDate').value,
                    content: document.getElementById('testimonialContent').value,
                    rating: parseInt(document.getElementById('testimonialRating').value) || 5,
                    photoUrl,
                    photoS3Key
                };
                
                if (isEdit) {
                    testimonialData.isActive = document.getElementById('testimonialIsActive').checked;
                }
                
                const url = isEdit 
                    ? `${API_BASE}/website-content/testimonials/entry/${entryId}`
                    : `${API_BASE}/website-content/testimonials/entry`;
                
                const response = await fetch(url, {
                    method: isEdit ? 'PUT' : 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testimonialData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(isEdit ? 'Testimonial updated!' : 'Testimonial added!', 'success');
                    closeTestimonialEntryModal();
                    
                    // Update local data
                    if (result.data && result.data.testimonials) {
                        currentTestimonialEntries = result.data.testimonials.entries || [];
                        currentTestimonialEntries.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderTestimonialsGrid();
                    } else {
                        loadWebsiteTestimonials();
                    }
                } else {
                    throw new Error(result.error || 'Failed to save testimonial');
                }
            } catch (error) {
                console.error('Error saving testimonial:', error);
                showToast('Error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Testimonial';
            }
        }

        async function deleteTestimonialEntry(entryId) {
            if (!confirm('Are you sure you want to delete this testimonial?')) return;
            
            try {
                const response = await fetch(`${API_BASE}/website-content/testimonials/entry/${entryId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Testimonial deleted!', 'success');
                    
                    if (result.data && result.data.testimonials) {
                        currentTestimonialEntries = result.data.testimonials.entries || [];
                        currentTestimonialEntries.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderTestimonialsGrid();
                    } else {
                        loadWebsiteTestimonials();
                    }
                } else {
                    throw new Error(result.error || 'Failed to delete testimonial');
                }
            } catch (error) {
                console.error('Error deleting testimonial:', error);
                showToast('Error: ' + error.message, 'error');
            }
        }

        // ==========================================
        // Website Controls - About Section
        // ==========================================

        let currentAboutData = null;
        let currentTeamMembers = [];
        let currentStats = [];
        let teamPhotoFile = null;
        let aboutCoverFile = null;

        async function loadWebsiteAbout() {
            const storyPreview = document.getElementById('aboutStoryPreview');
            const statsGrid = document.getElementById('aboutStatsGrid');
            const teamGrid = document.getElementById('teamMembersGrid');
            
            try {
                const response = await fetch(`${API_BASE}/website-content/about`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                const data = await response.json();
                
                if (data.success && data.data && data.data.about) {
                    currentAboutData = data.data.about;
                    currentTeamMembers = data.data.about.teamMembers || [];
                    currentStats = data.data.about.stats || [];
                    
                    // Sort by sortOrder
                    currentTeamMembers.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    currentStats.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    
                    renderAboutStoryPreview();
                    renderStatsGrid();
                    renderTeamMembersGrid();
                } else {
                    currentAboutData = {};
                    currentTeamMembers = [];
                    currentStats = [];
                    renderAboutStoryPreview();
                    renderStatsGrid();
                    renderTeamMembersGrid();
                }
            } catch (error) {
                console.error('Error loading about content:', error);
                storyPreview.innerHTML = `<div class="about-story-loading"><p>Error loading content</p></div>`;
            }
        }

        function renderAboutStoryPreview() {
            const data = currentAboutData || {};
            
            // Populate form fields
            document.getElementById('aboutSectionLabel').value = data.sectionLabel || 'Our Story';
            document.getElementById('aboutHeadline').value = data.headline || 'Passionate About Capturing Love';
            
            // Paragraphs
            const paragraphs = data.paragraphs || [];
            document.getElementById('aboutParagraph1').value = paragraphs[0] || '';
            document.getElementById('aboutParagraph2').value = paragraphs[1] || '';
            document.getElementById('aboutParagraph3').value = paragraphs[2] || '';
            
            // Cover image
            document.getElementById('aboutCoverImageUrl').value = data.coverImageUrl || '';
            document.getElementById('aboutCoverImageS3Key').value = data.coverImageS3Key || '';
            
            // Show preview if image exists
            const previewContainer = document.getElementById('aboutCoverImagePreview');
            if (data.coverImageUrl) {
                previewContainer.style.display = 'block';
                previewContainer.querySelector('img').src = data.coverImageUrl;
            } else {
                previewContainer.style.display = 'none';
            }
            
            // Badge
            document.getElementById('aboutBadgeValue').value = data.badgeValue || '500+';
            document.getElementById('aboutBadgeLabel').value = data.badgeLabel || 'Weddings Captured';
        }

        async function saveAboutContent() {
            const sectionLabel = document.getElementById('aboutSectionLabel').value.trim();
            const headline = document.getElementById('aboutHeadline').value.trim();
            const paragraphs = [
                document.getElementById('aboutParagraph1').value.trim(),
                document.getElementById('aboutParagraph2').value.trim(),
                document.getElementById('aboutParagraph3').value.trim()
            ].filter(p => p); // Remove empty paragraphs
            
            const coverImageUrl = document.getElementById('aboutCoverImageUrl').value.trim();
            const coverImageS3Key = document.getElementById('aboutCoverImageS3Key').value.trim();
            const badgeValue = document.getElementById('aboutBadgeValue').value.trim();
            const badgeLabel = document.getElementById('aboutBadgeLabel').value.trim();
            
            try {
                const response = await fetch(`${API_BASE}/website-content/about`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        sectionLabel,
                        headline,
                        paragraphs,
                        coverImageUrl,
                        coverImageS3Key,
                        badgeValue,
                        badgeLabel
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    currentAboutData = result.data.about;
                    showToast('About content saved successfully', 'success');
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                console.error('Error saving about content:', error);
                showToast('Failed to save about content', 'error');
            }
        }

        async function uploadAboutCoverImage() {
            const input = document.getElementById('aboutCoverInput');
            const file = input.files[0];
            if (!file) return;
            
            try {
                showToast('Uploading image...', 'info');
                
                // Get signed URL
                const response = await fetch(`${API_BASE}/s3/upload-url`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        folder: 'website',
                        filename: file.name,
                        mimeType: file.type,
                        fileSize: file.size,
                        prefix: 'about'
                    })
                });
                
                const urlData = await response.json();
                if (!urlData.success) throw new Error(urlData.error);
                
                // Upload to S3
                await fetch(urlData.uploadUrl, {
                    method: 'PUT',
                    body: file,
                    headers: { 'Content-Type': file.type }
                });
                
                // Update form - downloadUrl is generated at read time from S3 key
                document.getElementById('aboutCoverImageUrl').value = '';
                document.getElementById('aboutCoverImageS3Key').value = urlData.key;
                
                // Show preview
                const previewContainer = document.getElementById('aboutCoverImagePreview');
                previewContainer.style.display = 'block';
                previewContainer.querySelector('img').src = URL.createObjectURL(file);
                
                showToast('Image uploaded successfully', 'success');
            } catch (error) {
                console.error('Upload error:', error);
                showToast('Failed to upload image', 'error');
            }
        }

        function renderStatsGrid() {
            const grid = document.getElementById('aboutStatsGrid');
            
            if (currentStats.length === 0) {
                grid.innerHTML = `
                    <div class="about-stats-empty" style="grid-column: 1 / -1;">
                        <p>No statistics added yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Stat" to showcase your achievements</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentStats.map(stat => `
                <div class="stat-card" data-id="${stat._id}">
                    <div class="stat-actions">
                        <button class="edit-btn" onclick="editStat('${stat._id}')" title="Edit">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        </button>
                        <button class="delete-btn" onclick="deleteStat('${stat._id}')" title="Delete">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                    <div class="stat-value">${stat.value}${stat.suffix || ''}</div>
                    <div class="stat-label">${stat.label}</div>
                </div>
            `).join('');
        }

        function renderTeamMembersGrid() {
            const grid = document.getElementById('teamMembersGrid');
            
            if (currentTeamMembers.length === 0) {
                grid.innerHTML = `
                    <div class="team-members-empty" style="grid-column: 1 / -1;">
                        <p>No team members added yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Team Member" to introduce your team</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentTeamMembers.map(member => `
                <div class="team-member-card" data-id="${member._id}">
                    <span class="team-member-status ${member.isActive ? 'active' : 'inactive'}"></span>
                    <div class="team-member-header">
                        <div class="team-member-photo">
                            ${member.photoUrl ? 
                                `<img src="${member.photoUrl}" alt="${member.name}" onerror="this.onerror=null;this.parentElement.innerHTML='<div class=\\'team-member-photo-placeholder\\'>${getInitials(member.name)}</div>'">` :
                                `<div class="team-member-photo-placeholder">${getInitials(member.name)}</div>`
                            }
                        </div>
                        <div class="team-member-info">
                            <div class="team-member-name">${member.name}</div>
                            <div class="team-member-role">${member.role}</div>
                        </div>
                    </div>
                    ${member.bio ? `<div class="team-member-bio">${truncateText(member.bio, 120)}</div>` : ''}
                    <div class="team-member-actions">
                        <button class="btn-edit" onclick="editTeamMember('${member._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Edit
                        </button>
                        <button class="btn-delete" onclick="deleteTeamMember('${member._id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Team Member Modal Functions
        function openAddTeamMemberModal() {
            document.getElementById('teamMemberModalTitle').textContent = 'Add Team Member';
            document.getElementById('teamMemberSubmitBtn').textContent = 'Add Team Member';
            document.getElementById('teamMemberForm').reset();
            document.getElementById('teamMemberId').value = '';
            document.getElementById('teamMemberActiveField').style.display = 'none';
            document.getElementById('teamPhotoDropzone').style.display = 'block';
            document.getElementById('teamPhotoPreview').style.display = 'none';
            teamPhotoFile = null;
            document.getElementById('teamMemberModal').classList.add('active');
        }

        function editTeamMember(memberId) {
            const member = currentTeamMembers.find(m => m._id === memberId);
            if (!member) return;
            
            document.getElementById('teamMemberModalTitle').textContent = 'Edit Team Member';
            document.getElementById('teamMemberSubmitBtn').textContent = 'Save Changes';
            document.getElementById('teamMemberId').value = member._id;
            document.getElementById('teamMemberName').value = member.name || '';
            document.getElementById('teamMemberRole').value = member.role || '';
            document.getElementById('teamMemberBio').value = member.bio || '';
            document.getElementById('teamMemberInstagram').value = member.socialLinks?.instagram || '';
            document.getElementById('teamMemberIsActive').checked = member.isActive !== false;
            document.getElementById('teamMemberActiveField').style.display = 'block';
            
            // Handle photo
            if (member.photoUrl) {
                document.getElementById('teamPhotoDropzone').style.display = 'none';
                document.getElementById('teamPhotoPreview').style.display = 'block';
                document.getElementById('teamPhotoPreviewImg').src = member.photoUrl;
            } else {
                document.getElementById('teamPhotoDropzone').style.display = 'block';
                document.getElementById('teamPhotoPreview').style.display = 'none';
            }
            
            teamPhotoFile = null;
            document.getElementById('teamMemberModal').classList.add('active');
        }

        function closeTeamMemberModal() {
            document.getElementById('teamMemberModal').classList.remove('active');
            teamPhotoFile = null;
        }

        function handleTeamPhotoSelect(event) {
            const file = event.target.files[0];
            if (file) {
                teamPhotoFile = file;
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('teamPhotoPreviewImg').src = e.target.result;
                    document.getElementById('teamPhotoDropzone').style.display = 'none';
                    document.getElementById('teamPhotoPreview').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        function clearTeamPhoto() {
            teamPhotoFile = null;
            document.getElementById('teamPhotoDropzone').style.display = 'block';
            document.getElementById('teamPhotoPreview').style.display = 'none';
        }

        async function saveTeamMember(event) {
            event.preventDefault();
            
            const memberId = document.getElementById('teamMemberId').value;
            const isEdit = !!memberId;
            
            const submitBtn = document.getElementById('teamMemberSubmitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Saving...';
            
            try {
                let photoUrl = '';
                let photoS3Key = '';
                
                // If editing and no new photo, keep existing
                if (isEdit && !teamPhotoFile) {
                    const existingMember = currentTeamMembers.find(m => m._id === memberId);
                    if (existingMember) {
                        photoUrl = existingMember.photoUrl || '';
                        photoS3Key = existingMember.photoS3Key || '';
                    }
                }
                
                // Upload new photo if selected
                if (teamPhotoFile) {
                    const compressedFile = await compressImage(teamPhotoFile, 400, 0.85);
                    
                    const timestamp = Date.now();
                    const filename = `team_${timestamp}.jpg`;
                    
                    const uploadUrlRes = await fetch(`${API_BASE}/s3/upload-url`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${authToken}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            folder: 'website',
                            filename: filename,
                            mimeType: 'image/jpeg',
                            fileSize: compressedFile.size,
                            prefix: 'about/team'
                        })
                    });
                    
                    const uploadUrlData = await uploadUrlRes.json();
                    if (!uploadUrlData.success) throw new Error('Failed to get upload URL');
                    
                    await fetch(uploadUrlData.uploadUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'image/jpeg' },
                        body: compressedFile
                    });
                    
                    photoS3Key = uploadUrlData.key;
                    photoUrl = uploadUrlData.downloadUrl;
                }
                
                const memberData = {
                    name: document.getElementById('teamMemberName').value,
                    role: document.getElementById('teamMemberRole').value,
                    bio: document.getElementById('teamMemberBio').value,
                    photoUrl,
                    photoS3Key,
                    socialLinks: {
                        instagram: document.getElementById('teamMemberInstagram').value
                    }
                };
                
                if (isEdit) {
                    memberData.isActive = document.getElementById('teamMemberIsActive').checked;
                }
                
                const url = isEdit 
                    ? `${API_BASE}/website-content/about/team/${memberId}`
                    : `${API_BASE}/website-content/about/team`;
                
                const response = await fetch(url, {
                    method: isEdit ? 'PUT' : 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(memberData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(isEdit ? 'Team member updated!' : 'Team member added!', 'success');
                    closeTeamMemberModal();
                    
                    if (result.data && result.data.about) {
                        currentTeamMembers = result.data.about.teamMembers || [];
                        currentTeamMembers.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderTeamMembersGrid();
                    } else {
                        loadWebsiteAbout();
                    }
                } else {
                    throw new Error(result.error || 'Failed to save team member');
                }
            } catch (error) {
                console.error('Error saving team member:', error);
                showToast('Error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Team Member';
            }
        }

        async function deleteTeamMember(memberId) {
            if (!confirm('Are you sure you want to delete this team member?')) return;
            
            try {
                const response = await fetch(`${API_BASE}/website-content/about/team/${memberId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Team member deleted!', 'success');
                    
                    if (result.data && result.data.about) {
                        currentTeamMembers = result.data.about.teamMembers || [];
                        currentTeamMembers.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderTeamMembersGrid();
                    } else {
                        loadWebsiteAbout();
                    }
                } else {
                    throw new Error(result.error || 'Failed to delete team member');
                }
            } catch (error) {
                console.error('Error deleting team member:', error);
                showToast('Error: ' + error.message, 'error');
            }
        }

        // Stat Modal Functions
        function openAddStatModal() {
            document.getElementById('statModalTitle').textContent = 'Add Statistic';
            document.getElementById('statSubmitBtn').textContent = 'Add Stat';
            document.getElementById('statForm').reset();
            document.getElementById('statId').value = '';
            document.getElementById('statModal').classList.add('active');
        }

        function editStat(statId) {
            const stat = currentStats.find(s => s._id === statId);
            if (!stat) return;
            
            document.getElementById('statModalTitle').textContent = 'Edit Statistic';
            document.getElementById('statSubmitBtn').textContent = 'Save Changes';
            document.getElementById('statId').value = stat._id;
            document.getElementById('statValue').value = stat.value || '';
            document.getElementById('statSuffix').value = stat.suffix || '';
            document.getElementById('statLabel').value = stat.label || '';
            
            document.getElementById('statModal').classList.add('active');
        }

        function closeStatModal() {
            document.getElementById('statModal').classList.remove('active');
        }

        async function saveStat(event) {
            event.preventDefault();
            
            const statId = document.getElementById('statId').value;
            const isEdit = !!statId;
            
            const submitBtn = document.getElementById('statSubmitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Saving...';
            
            try {
                const statData = {
                    value: document.getElementById('statValue').value,
                    suffix: document.getElementById('statSuffix').value,
                    label: document.getElementById('statLabel').value
                };
                
                const url = isEdit 
                    ? `${API_BASE}/website-content/about/stat/${statId}`
                    : `${API_BASE}/website-content/about/stat`;
                
                const response = await fetch(url, {
                    method: isEdit ? 'PUT' : 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(statData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(isEdit ? 'Statistic updated!' : 'Statistic added!', 'success');
                    closeStatModal();
                    
                    if (result.data && result.data.about) {
                        currentStats = result.data.about.stats || [];
                        currentStats.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderStatsGrid();
                    } else {
                        loadWebsiteAbout();
                    }
                } else {
                    throw new Error(result.error || 'Failed to save statistic');
                }
            } catch (error) {
                console.error('Error saving stat:', error);
                showToast('Error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = isEdit ? 'Save Changes' : 'Add Stat';
            }
        }

        async function deleteStat(statId) {
            if (!confirm('Are you sure you want to delete this statistic?')) return;
            
            try {
                const response = await fetch(`${API_BASE}/website-content/about/stat/${statId}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Statistic deleted!', 'success');
                    
                    if (result.data && result.data.about) {
                        currentStats = result.data.about.stats || [];
                        currentStats.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                        renderStatsGrid();
                    } else {
                        loadWebsiteAbout();
                    }
                } else {
                    throw new Error(result.error || 'Failed to delete statistic');
                }
            } catch (error) {
                console.error('Error deleting stat:', error);
                showToast('Error: ' + error.message, 'error');
            }
        }

        // ==========================================
        // Website Controls - Why Choose Us
        // ==========================================
        
        let whyChooseUsData = null;
        let currentWhyCards = [];
        
        async function loadWhyChooseUs() {
            try {
                const result = await apiCall('/website-content/why-choose-us');
                whyChooseUsData = result.data;
                
                if (whyChooseUsData && whyChooseUsData.whyChooseUs) {
                    const wcu = whyChooseUsData.whyChooseUs;
                    
                    currentWhyCards = wcu.cards || [];
                    currentWhyCards.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    renderWhyCardsGrid();
                } else {
                    currentWhyCards = [];
                    renderWhyCardsGrid();
                }
            } catch (error) {
                showToast('Failed to load Why Choose Us content: ' + error.message, 'error');
                renderWhyCardsGrid();
            }
        }
        
        // Icon Picker for Why Choose Us modal
        const iconPickerData = [
            { category: 'Wedding & Love', icons: [
                { value: 'heart', label: 'Heart' }, { value: 'rings', label: 'Rings' }, { value: 'sparkles', label: 'Sparkles' },
                { value: 'crown', label: 'Crown' }, { value: 'gift', label: 'Gift' }, { value: 'music', label: 'Music' }
            ]},
            { category: 'Photography & Film', icons: [
                { value: 'camera', label: 'Camera' }, { value: 'film', label: 'Film' }, { value: 'aperture', label: 'Aperture' },
                { value: 'image', label: 'Image' }, { value: 'video', label: 'Video' }, { value: 'edit', label: 'Edit' }
            ]},
            { category: 'Quality & Trust', icons: [
                { value: 'star', label: 'Star' }, { value: 'award', label: 'Award' }, { value: 'shield', label: 'Shield' },
                { value: 'check-circle', label: 'Verified' }, { value: 'thumbs-up', label: 'Thumbs Up' }, { value: 'bookmark', label: 'Bookmark' }
            ]},
            { category: 'Service & Experience', icons: [
                { value: 'luxury', label: 'Luxury' }, { value: 'palette', label: 'Creative' }, { value: 'headphones', label: 'Support' },
                { value: 'coffee', label: 'Consultation' }, { value: 'smile', label: 'Experience' }, { value: 'feather', label: 'Elegant' },
                { value: 'zap', label: 'Fast' }
            ]},
            { category: 'Team & Travel', icons: [
                { value: 'team', label: 'Team' }, { value: 'users', label: 'Users' }, { value: 'globe', label: 'Globe' },
                { value: 'map-pin', label: 'Location' }, { value: 'compass', label: 'Compass' }, { value: 'send', label: 'Delivery' }
            ]},
            { category: 'General', icons: [
                { value: 'clock', label: 'Clock' }, { value: 'sun', label: 'Sun' }, { value: 'layers', label: 'Layers' },
                { value: 'trending-up', label: 'Trending' }
            ]}
        ];

        function renderIconPickerGrid() {
            const grid = document.getElementById('iconPickerGrid');
            const currentValue = document.getElementById('whyCardIconType').value;
            grid.innerHTML = iconPickerData.map(cat => `
                <div class="icon-picker-category">
                    <div class="icon-picker-category-label">${cat.category}</div>
                    <div class="icon-picker-icons">
                        ${cat.icons.map(icon => `
                            <div class="icon-picker-item ${icon.value === currentValue ? 'selected' : ''}" onclick="selectIcon('${icon.value}', '${icon.label}')" title="${icon.label}">
                                ${getWhyCardIconSVG(icon.value)}
                                <span class="icon-picker-tooltip">${icon.label}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function toggleIconPicker() {
            const grid = document.getElementById('iconPickerGrid');
            const arrow = document.getElementById('iconPickerArrow');
            const isOpen = grid.classList.contains('open');
            if (!isOpen) {
                renderIconPickerGrid();
            }
            grid.classList.toggle('open');
            arrow.classList.toggle('open');
        }

        function selectIcon(value, label) {
            document.getElementById('whyCardIconType').value = value;
            document.getElementById('iconPickerPreview').innerHTML = getWhyCardIconSVG(value);
            document.getElementById('iconPickerLabel').textContent = label;
            // Update selected state
            document.querySelectorAll('.icon-picker-item').forEach(el => el.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            // Close picker
            document.getElementById('iconPickerGrid').classList.remove('open');
            document.getElementById('iconPickerArrow').classList.remove('open');
        }

        function setIconPickerValue(value) {
            document.getElementById('whyCardIconType').value = value;
            document.getElementById('iconPickerPreview').innerHTML = getWhyCardIconSVG(value);
            // Find label for this value
            let label = value;
            for (const cat of iconPickerData) {
                const found = cat.icons.find(i => i.value === value);
                if (found) { label = found.label; break; }
            }
            document.getElementById('iconPickerLabel').textContent = label;
            // Close grid if open
            document.getElementById('iconPickerGrid').classList.remove('open');
            document.getElementById('iconPickerArrow').classList.remove('open');
        }

        function getWhyCardIconSVG(iconType) {
            const icons = {
                // Wedding & Love
                'heart': `<svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>`,
                'rings': `<svg viewBox="0 0 24 24"><circle cx="9" cy="12" r="5" fill="none"/><circle cx="15" cy="12" r="5" fill="none"/></svg>`,
                'sparkles': `<svg viewBox="0 0 24 24"><path d="M12 3l1.5 5.5L19 10l-5.5 1.5L12 17l-1.5-5.5L5 10l5.5-1.5L12 3z"/><path d="M19 15l.5 1.5L21 17l-1.5.5L19 19l-.5-1.5L17 17l1.5-.5L19 15z"/><path d="M5 17l.5 1.5L7 19l-1.5.5L5 21l-.5-1.5L3 19l1.5-.5L5 17z"/></svg>`,
                'crown': `<svg viewBox="0 0 24 24"><path d="M2 20h20L19 8l-5 5-2-7-2 7-5-5L2 20z"/><line x1="2" y1="20" x2="22" y2="20"/></svg>`,
                'gift': `<svg viewBox="0 0 24 24"><polyline points="20 12 20 22 4 22 4 12"/><rect x="2" y="7" width="20" height="5"/><line x1="12" y1="22" x2="12" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></svg>`,
                'music': `<svg viewBox="0 0 24 24"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>`,
                // Photography & Film
                'camera': `<svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>`,
                'film': `<svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/><line x1="2" y1="7" x2="7" y2="7"/><line x1="2" y1="17" x2="7" y2="17"/><line x1="17" y1="7" x2="22" y2="7"/><line x1="17" y1="17" x2="22" y2="17"/></svg>`,
                'aperture': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="14.31" y1="8" x2="20.05" y2="17.94"/><line x1="9.69" y1="8" x2="21.17" y2="8"/><line x1="7.38" y1="12" x2="13.12" y2="2.06"/><line x1="9.69" y1="16" x2="3.95" y2="6.06"/><line x1="14.31" y1="16" x2="2.83" y2="16"/><line x1="16.62" y1="12" x2="10.88" y2="21.94"/></svg>`,
                'image': `<svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>`,
                'video': `<svg viewBox="0 0 24 24"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>`,
                'edit': `<svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>`,
                // Quality & Trust
                'star': `<svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>`,
                'award': `<svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>`,
                'shield': `<svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`,
                'check-circle': `<svg viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`,
                'thumbs-up': `<svg viewBox="0 0 24 24"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>`,
                'bookmark': `<svg viewBox="0 0 24 24"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>`,
                // Service & Experience
                'luxury': `<svg viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>`,
                'palette': `<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-1 0-.83.67-1.5 1.5-1.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9z"/><circle cx="6.5" cy="11.5" r="1.5"/><circle cx="9.5" cy="7.5" r="1.5"/><circle cx="14.5" cy="7.5" r="1.5"/><circle cx="17.5" cy="11.5" r="1.5"/></svg>`,
                'headphones': `<svg viewBox="0 0 24 24"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></svg>`,
                'coffee': `<svg viewBox="0 0 24 24"><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg>`,
                'smile': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>`,
                'feather': `<svg viewBox="0 0 24 24"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"/><line x1="16" y1="8" x2="2" y2="22"/><line x1="17.5" y1="15" x2="9" y2="15"/></svg>`,
                'zap': `<svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`,
                // Team & Travel
                'team': `<svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`,
                'users': `<svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`,
                'globe': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>`,
                'map-pin': `<svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>`,
                'compass': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>`,
                'send': `<svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>`,
                // General
                'clock': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
                'sun': `<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>`,
                'layers': `<svg viewBox="0 0 24 24"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>`,
                'trending-up': `<svg viewBox="0 0 24 24"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>`
            };
            return icons[iconType] || icons['star'];
        }

        function renderWhyCardsGrid() {
            const grid = document.getElementById('whyCardsGrid');
            
            if (!currentWhyCards || currentWhyCards.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 48px; height: 48px; margin-bottom: 1rem; opacity: 0.5;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p>No feature cards yet</p>
                        <p style="font-size: 0.85rem;">Click "Add Card" to create your first feature card</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = currentWhyCards.map((card, index) => `
                <div class="why-card-item ${card.isFeatured ? 'featured' : ''} ${!card.isActive ? 'inactive' : ''}" data-id="${card._id}">
                    <div class="why-card-header">
                        <span class="why-card-icon">${getWhyCardIconSVG(card.iconType)}</span>
                        <div class="why-card-info">
                            <h4>${card.title}</h4>
                            ${card.isFeatured ? '<span class="badge featured-badge">Featured</span>' : ''}
                            ${!card.isActive ? '<span class="badge inactive-badge">Hidden</span>' : ''}
                        </div>
                        <span class="why-card-order">#${index + 1}</span>
                    </div>
                    <p class="why-card-desc">${card.description}</p>
                    ${card.highlight ? `<span class="why-card-highlight">${card.highlight}</span>` : ''}
                    ${card.destinations && card.destinations.length > 0 ? `
                        <div class="why-card-destinations">
                            ${card.destinations.map(d => `<span class="dest-tag">${d}</span>`).join('')}
                        </div>
                    ` : ''}
                    <div class="why-card-actions">
                        <button class="edit-btn" onclick="editWhyCard('${card._id}')" title="Edit">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        </button>
                        <button class="delete-btn" onclick="deleteWhyCard('${card._id}')" title="Delete">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function openAddWhyCardModal() {
            try {
                document.getElementById('whyCardModalTitle').textContent = 'Add Feature Card';
                document.getElementById('whyCardId').value = '';
                document.getElementById('whyCardTitle').value = '';
                document.getElementById('whyCardDescription').value = '';
                setIconPickerValue('star');
                document.getElementById('whyCardIsFeatured').checked = false;
                document.getElementById('whyCardHighlight').value = '';
                document.getElementById('whyCardDestinations').value = '';
                document.getElementById('whyCardIsActive').checked = true;
                document.getElementById('whyCardActiveField').style.display = 'none';
                document.getElementById('whyCardSubmitBtn').textContent = 'Add Card';
                
                const modal = document.getElementById('whyCardModal');
                modal.classList.add('active');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error opening why card modal:', error);
                showToast('Error opening modal: ' + error.message, 'error');
            }
        }
        
        function editWhyCard(cardId) {
            const card = currentWhyCards.find(c => c._id === cardId);
            if (!card) {
                showToast('Error: Card not found', 'error');
                return;
            }
            
            document.getElementById('whyCardModalTitle').textContent = 'Edit Feature Card';
            document.getElementById('whyCardId').value = cardId;
            document.getElementById('whyCardTitle').value = card.title || '';
            document.getElementById('whyCardDescription').value = card.description || '';
            setIconPickerValue(card.iconType || 'star');
            document.getElementById('whyCardIsFeatured').checked = card.isFeatured || false;
            document.getElementById('whyCardHighlight').value = card.highlight || '';
            document.getElementById('whyCardDestinations').value = (card.destinations || []).join(', ');
            document.getElementById('whyCardIsActive').checked = card.isActive !== false;
            document.getElementById('whyCardActiveField').style.display = 'block';
            document.getElementById('whyCardSubmitBtn').textContent = 'Save Changes';
            
            const modal = document.getElementById('whyCardModal');
            modal.classList.add('active');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeWhyCardModal() {
            const modal = document.getElementById('whyCardModal');
            modal.classList.remove('active');
            modal.style.display = 'none';
            document.body.style.overflow = '';
        }
        
        async function saveWhyCard(event) {
            event.preventDefault();
            
            const cardId = document.getElementById('whyCardId').value;
            const isEdit = !!cardId;
            
            const destinationsStr = document.getElementById('whyCardDestinations').value;
            const destinations = destinationsStr ? destinationsStr.split(',').map(d => d.trim()).filter(d => d) : [];
            
            const cardData = {
                title: document.getElementById('whyCardTitle').value,
                description: document.getElementById('whyCardDescription').value,
                iconType: document.getElementById('whyCardIconType').value,
                isFeatured: document.getElementById('whyCardIsFeatured').checked,
                highlight: document.getElementById('whyCardHighlight').value,
                destinations: destinations
            };
            
            if (isEdit) {
                cardData.isActive = document.getElementById('whyCardIsActive').checked;
            }
            
            try {
                let result;
                if (isEdit) {
                    result = await apiCall(`/website-content/why-choose-us/card/${cardId}`, 'PUT', cardData);
                } else {
                    result = await apiCall('/website-content/why-choose-us/card', 'POST', cardData);
                }
                
                showToast(isEdit ? 'Card updated!' : 'Card added!', 'success');
                closeWhyCardModal();
                
                if (result.data && result.data.whyChooseUs) {
                    currentWhyCards = result.data.whyChooseUs.cards || [];
                    currentWhyCards.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    renderWhyCardsGrid();
                } else {
                    loadWhyChooseUs();
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            }
        }
        
        async function deleteWhyCard(cardId) {
            if (!confirm('Are you sure you want to delete this card?')) return;
            
            try {
                const result = await apiCall(`/website-content/why-choose-us/card/${cardId}`, 'DELETE');
                showToast('Card deleted!', 'success');
                
                if (result.data && result.data.whyChooseUs) {
                    currentWhyCards = result.data.whyChooseUs.cards || [];
                    currentWhyCards.sort((a, b) => (a.sortOrder || 0) - (b.sortOrder || 0));
                    renderWhyCardsGrid();
                } else {
                    loadWhyChooseUs();
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            }
        }

        // App bar logout handler
        document.getElementById('appBarLogout').addEventListener('click', () => {
            localStorage.removeItem('adminToken');
            localStorage.removeItem('adminData');
            currentAdmin = null;
            document.getElementById('adminLayout').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            showToast('Logged out successfully', 'success');
        });

        // User dropdown toggle functionality
        document.getElementById('appBarAvatar').addEventListener('click', (e) => {
            e.stopPropagation();
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('userDropdown');
            const userContainer = document.querySelector('.app-bar-user');
            
            if (dropdown && !userContainer.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        function loadSection(section) {
            switch(section) {
                case 'dashboard': loadDashboard(); break;
                case 'offerings': 
                    // Load the currently active subtab
                    const activeSubtab = document.querySelector('.offerings-tab[data-subtab].active');
                    if (activeSubtab) {
                        loadOfferingsSubtab(activeSubtab.dataset.subtab);
                    } else {
                        loadEvents(); // Default to events
                    }
                    break;
                case 'website':
                    // Load the currently active website subtab
                    const activeWsTab = document.querySelector('.offerings-tab[data-wstab].active');
                    if (activeWsTab) {
                        loadWebsiteSubtab(activeWsTab.dataset.wstab);
                    } else {
                        loadWebsiteHero(); // Default to hero
                    }
                    break;
                case 'quotes': loadQuotes(); break;
                case 'users': loadUsers(); break;
                case 'admins': loadAdmins(); break;
                case 'settings': loadSettings(); break;
            }
        }

        // Dashboard
        async function loadDashboard() {
            try {
                const result = await apiCall('/dashboard');
                const data = result.data;
                
                document.getElementById('statsGrid').innerHTML = `
                    <div class="stat-card" onclick="navigateToSection('offerings')">
                        <h3>Total Events</h3>
                        <div class="value">${data.events.total}</div>
                        <div class="change positive">${data.events.active} active</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('offerings', 'services')">
                        <h3>Total Services</h3>
                        <div class="value">${data.services.total}</div>
                        <div class="change positive">${data.services.active} active</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('quotes')">
                        <h3>Total Quotes</h3>
                        <div class="value">${data.quotes.total}</div>
                    </div>
                    <div class="stat-card" onclick="navigateToSection('users')">
                        <h3>Total Users</h3>
                        <div class="value">${data.users.total}</div>
                    </div>
                `;
                
                document.getElementById('recentQuotesTable').innerHTML = data.recentQuotes.map(q => `
                    <tr>
                        <td>${q.quoteNumber}</td>
                        <td>${q.customerName || q.customerEmail}</td>
                        <td>${formatCurrency(q.total)}</td>
                        <td><span class="status-badge status-${q.status}">${q.status}</span></td>
                        <td>${formatDate(q.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn view" onclick="viewQuoteDetails('${q._id}')" title="View Details"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No quotes yet</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Events
        async function loadEvents() {
            try {
                const result = await apiCall('/events');
                document.getElementById('eventsTable').innerHTML = result.data.map(e => `
                    <tr>
                        <td>${e.icon || ''}</td>
                        <td>${e.name}</td>
                        <td>${e.slug}</td>
                        <td>${e.category}</td>
                        <td><span class="status-badge status-${e.isActive ? 'active' : 'inactive'}">${e.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editEvent('${e._id}')"></button>
                            <button class="action-btn delete" onclick="deleteEvent('${e._id}')"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No events found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        let eventsCache = [];
        async function editEvent(id) {
            try {
                const result = await apiCall('/events');
                const event = result.data.find(e => e._id === id);
                if (!event) return showToast('Event not found', 'error');
                
                document.getElementById('eventModalTitle').textContent = 'Edit Event';
                document.getElementById('eventId').value = event._id;
                document.getElementById('eventName').value = event.name;
                document.getElementById('eventSlug').value = event.slug;
                document.getElementById('eventIcon').value = event.icon || '';
                document.getElementById('eventCategory').value = event.category;
                document.getElementById('eventDescription').value = event.description || '';
                document.getElementById('eventSortOrder').value = event.sortOrder || 0;
                document.getElementById('eventIsActive').checked = event.isActive;
                
                openModal('event');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteEvent(id) {
            if (!confirm('Are you sure you want to delete this event?')) return;
            try {
                await apiCall(`/events/${id}`, 'DELETE');
                showToast('Event deleted successfully');
                loadEvents();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('eventForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('eventId').value;
            const data = {
                name: document.getElementById('eventName').value,
                slug: document.getElementById('eventSlug').value,
                icon: document.getElementById('eventIcon').value,
                category: document.getElementById('eventCategory').value,
                description: document.getElementById('eventDescription').value,
                sortOrder: parseInt(document.getElementById('eventSortOrder').value) || 0,
                isActive: document.getElementById('eventIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/events/${id}`, 'PUT', data);
                    showToast('Event updated successfully');
                } else {
                    await apiCall('/events', 'POST', data);
                    showToast('Event created successfully');
                }
                closeModal('event');
                loadEvents();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Services
        async function loadServices() {
            try {
                const result = await apiCall('/services');
                document.getElementById('servicesTable').innerHTML = result.data.map(s => `
                    <tr>
                        <td>${s.name}</td>
                        <td>${s.slug}</td>
                        <td>${s.pricing.map(p => `${p.category}: ${formatCurrency(p.price)}`).join('<br>')}</td>
                        <td><span class="status-badge status-${s.isActive ? 'active' : 'inactive'}">${s.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editService('${s._id}')"></button>
                            <button class="action-btn delete" onclick="deleteService('${s._id}')"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No services found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function editService(id) {
            try {
                const result = await apiCall('/services');
                const service = result.data.find(s => s._id === id);
                if (!service) return showToast('Service not found', 'error');
                
                document.getElementById('serviceModalTitle').textContent = 'Edit Service';
                document.getElementById('serviceId').value = service._id;
                document.getElementById('serviceName').value = service.name;
                document.getElementById('serviceSlug').value = service.slug;
                document.getElementById('serviceDescription').value = service.description || '';
                document.getElementById('serviceSortOrder').value = service.sortOrder || 0;
                document.getElementById('serviceIsActive').checked = service.isActive;
                
                // Load pricing
                const pricingList = document.getElementById('pricingList');
                pricingList.innerHTML = '';
                service.pricing.forEach(p => addPricingRow(p.category, p.price));
                
                openModal('service');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        function addPricingRow(category = '', price = '') {
            const pricingList = document.getElementById('pricingList');
            const row = document.createElement('div');
            row.className = 'pricing-item';
            row.innerHTML = `
                <select class="pricing-category">
                    <option value="wedding" ${category === 'wedding' ? 'selected' : ''}>Wedding</option>
                    <option value="reception-sangeet-engagement" ${category === 'reception-sangeet-engagement' ? 'selected' : ''}>Reception/Sangeet/Engagement</option>
                    <option value="haldi-mehendi-house" ${category === 'haldi-mehendi-house' ? 'selected' : ''}>Haldi/Mehendi/House</option>
                    <option value="prewedding" ${category === 'prewedding' ? 'selected' : ''}>Pre-Wedding</option>
                </select>
                <input type="number" class="pricing-price" placeholder="Price" value="${price}">
                <button type="button" onclick="this.parentElement.remove()"></button>
            `;
            pricingList.appendChild(row);
        }

        async function deleteService(id) {
            if (!confirm('Are you sure you want to delete this service?')) return;
            try {
                await apiCall(`/services/${id}`, 'DELETE');
                showToast('Service deleted successfully');
                loadServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('serviceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('serviceId').value;
            
            const pricingRows = document.querySelectorAll('.pricing-item');
            const pricing = [];
            pricingRows.forEach(row => {
                const category = row.querySelector('.pricing-category').value;
                const price = parseFloat(row.querySelector('.pricing-price').value) || 0;
                if (category && price > 0) {
                    pricing.push({ category, price });
                }
            });
            
            const data = {
                name: document.getElementById('serviceName').value,
                slug: document.getElementById('serviceSlug').value,
                description: document.getElementById('serviceDescription').value,
                pricing,
                sortOrder: parseInt(document.getElementById('serviceSortOrder').value) || 0,
                isActive: document.getElementById('serviceIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/services/${id}`, 'PUT', data);
                    showToast('Service updated successfully');
                } else {
                    await apiCall('/services', 'POST', data);
                    showToast('Service created successfully');
                }
                closeModal('service');
                loadServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Additional Services
        async function loadAdditionalServices() {
            try {
                const result = await apiCall('/additional-services');
                document.getElementById('additionalServicesTable').innerHTML = result.data.map(s => `
                    <tr>
                        <td>${s.name}</td>
                        <td><code>${s.slug}</code></td>
                        <td>${s.price.toLocaleString('en-IN')}</td>
                        <td><span class="status-badge status-${s.isActive ? 'active' : 'inactive'}">${s.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editAdditionalService('${s._id}')"></button>
                            <button class="action-btn delete" onclick="deleteAdditionalService('${s._id}')"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No additional services found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function editAdditionalService(id) {
            try {
                const result = await apiCall('/additional-services');
                const service = result.data.find(s => s._id === id);
                if (!service) return showToast('Additional service not found', 'error');
                
                document.getElementById('additionalServiceModalTitle').textContent = 'Edit Additional Service';
                document.getElementById('additionalServiceId').value = service._id;
                document.getElementById('additionalServiceName').value = service.name;
                document.getElementById('additionalServiceSlug').value = service.slug;
                document.getElementById('additionalServiceDescription').value = service.description || '';
                document.getElementById('additionalServicePrice').value = service.price;
                document.getElementById('additionalServiceSortOrder').value = service.sortOrder || 0;
                document.getElementById('additionalServiceIsActive').checked = service.isActive;
                
                openModal('additionalService');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteAdditionalService(id) {
            if (!confirm('Are you sure you want to delete this additional service?')) return;
            try {
                await apiCall(`/additional-services/${id}`, 'DELETE');
                showToast('Additional service deleted successfully');
                loadAdditionalServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('additionalServiceForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('additionalServiceId').value;
            
            const data = {
                name: document.getElementById('additionalServiceName').value,
                slug: document.getElementById('additionalServiceSlug').value,
                description: document.getElementById('additionalServiceDescription').value,
                price: parseFloat(document.getElementById('additionalServicePrice').value) || 0,
                sortOrder: parseInt(document.getElementById('additionalServiceSortOrder').value) || 0,
                isActive: document.getElementById('additionalServiceIsActive').checked
            };
            
            try {
                if (id) {
                    await apiCall(`/additional-services/${id}`, 'PUT', data);
                    showToast('Additional service updated successfully');
                } else {
                    await apiCall('/additional-services', 'POST', data);
                    showToast('Additional service created successfully');
                }
                closeModal('additionalService');
                loadAdditionalServices();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Quotes Pagination State
        let quotesCurrentPage = 1;
        let quotesPerPage = 10;
        let quotesTotalPages = 1;
        let quotesTotalCount = 0;

        // Customers Pagination State
        let customersCurrentPage = 1;
        let customersPerPage = 10;
        let customersTotalPages = 1;
        let customersTotalCount = 0;

        // Quotes
        async function loadQuotes(resetPage = false) {
            if (resetPage) quotesCurrentPage = 1;
            
            try {
                const search = document.getElementById('quoteSearch').value;
                const status = document.getElementById('quoteStatusFilter').value;
                let query = `?page=${quotesCurrentPage}&limit=${quotesPerPage}`;
                if (search) query += `&search=${encodeURIComponent(search)}`;
                if (status) query += `&status=${status}`;
                
                const result = await apiCall(`/quotes${query}`);
                
                // Handle pagination data from response
                const quotes = result.data || [];
                quotesTotalCount = result.total || result.pagination?.total || quotes.length;
                quotesTotalPages = result.totalPages || result.pagination?.pages || Math.ceil(quotesTotalCount / quotesPerPage);
                
                // Update pagination UI
                updateQuotesPagination();
                
                document.getElementById('quotesTable').innerHTML = quotes.map(q => `
                    <tr>
                        <td>${q.quoteNumber}</td>
                        <td>${q.customerName || '-'}<br><small>${q.customerEmail}</small></td>
                        <td>${q.items.length} items</td>
                        <td>${formatCurrency(q.total)}</td>
                        <td><span class="status-badge status-${q.status}">${q.status}</span></td>
                        <td>${formatDate(q.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn view" onclick="viewQuoteDetails('${q._id}')" title="View Details"></button>
                            <button class="action-btn delete" onclick="deleteQuote('${q._id}')" title="Delete"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="7">No quotes found</td></tr>';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Update quotes pagination UI
        function updateQuotesPagination() {
            const startItem = quotesTotalCount === 0 ? 0 : (quotesCurrentPage - 1) * quotesPerPage + 1;
            const endItem = Math.min(quotesCurrentPage * quotesPerPage, quotesTotalCount);
            
            document.getElementById('quotesShowingStart').textContent = startItem;
            document.getElementById('quotesShowingEnd').textContent = endItem;
            document.getElementById('quotesTotalCount').textContent = quotesTotalCount;
            
            // Update prev/next buttons
            document.getElementById('quotesPrevBtn').disabled = quotesCurrentPage <= 1;
            document.getElementById('quotesNextBtn').disabled = quotesCurrentPage >= quotesTotalPages;
            
            // Render page numbers
            renderQuotesPaginationPages();
        }

        // Render pagination page numbers
        function renderQuotesPaginationPages() {
            const container = document.getElementById('quotesPaginationPages');
            let html = '';
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, quotesCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(quotesTotalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // First page + ellipsis
            if (startPage > 1) {
                html += `<button class="pagination-page" onclick="goToQuotesPage(1)">1</button>`;
                if (startPage > 2) {
                    html += `<span class="pagination-page ellipsis">...</span>`;
                }
            }
            
            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                html += `<button class="pagination-page ${i === quotesCurrentPage ? 'active' : ''}" onclick="goToQuotesPage(${i})">${i}</button>`;
            }
            
            // Ellipsis + last page
            if (endPage < quotesTotalPages) {
                if (endPage < quotesTotalPages - 1) {
                    html += `<span class="pagination-page ellipsis">...</span>`;
                }
                html += `<button class="pagination-page" onclick="goToQuotesPage(${quotesTotalPages})">${quotesTotalPages}</button>`;
            }
            
            container.innerHTML = html;
        }

        // Change page
        function changeQuotesPage(delta) {
            const newPage = quotesCurrentPage + delta;
            if (newPage >= 1 && newPage <= quotesTotalPages) {
                quotesCurrentPage = newPage;
                loadQuotes();
            }
        }

        // Go to specific page
        function goToQuotesPage(page) {
            if (page >= 1 && page <= quotesTotalPages && page !== quotesCurrentPage) {
                quotesCurrentPage = page;
                loadQuotes();
            }
        }

        // Change per page
        function changeQuotesPerPage() {
            quotesPerPage = parseInt(document.getElementById('quotesPerPage').value);
            quotesCurrentPage = 1;
            loadQuotes();
        }

        document.getElementById('quoteSearch').addEventListener('input', debounce(() => loadQuotes(true), 300));
        document.getElementById('quoteStatusFilter').addEventListener('change', () => loadQuotes(true));

        async function viewQuote(id) {
            try {
                document.getElementById('quoteDetails').innerHTML = '<div class="loading"><div class="spinner"></div></div>';
                openModal('quote');
                
                const result = await apiCall(`/quotes/${id}`);
                const q = result.data;
                
                document.getElementById('quoteDetails').innerHTML = `
                    <p><strong>Quote #:</strong> ${q.quoteNumber}</p>
                    <p><strong>Customer:</strong> ${q.customerName || '-'}</p>
                    <p><strong>Email:</strong> ${q.customerEmail}</p>
                    <p><strong>Status:</strong> <span class="status-badge status-${q.status}">${q.status}</span></p>
                    <p><strong>Created:</strong> ${formatDate(q.createdAt)}</p>
                    <p><strong>Valid Until:</strong> ${formatDate(q.validUntil)}</p>
                    <hr style="margin: 15px 0; border-color: var(--gold-dark);">
                    <h4 style="color: var(--gold); margin-bottom: 10px;">Items</h4>
                    ${q.items.map(item => `
                        <p> ${item.eventName} - ${item.serviceName}: ${formatCurrency(item.price)}</p>
                    `).join('')}
                    <hr style="margin: 15px 0; border-color: var(--gold-dark);">
                    <p><strong>Total:</strong> ${formatCurrency(q.total)}</p>
                `;
            } catch (error) {
                showToast(error.message, 'error');
                closeModal('quote');
            }
        }

        async function deleteQuote(id) {
            if (!confirm('Are you sure you want to delete this quote?')) return;
            try {
                await apiCall(`/quotes/${id}`, 'DELETE');
                showToast('Quote deleted successfully');
                loadQuotes();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // View Quote Details
        async function viewQuoteDetails(id) {
            const modal = document.getElementById('quoteDetailsModal');
            const content = document.getElementById('quoteDetailsContent');
            
            modal.classList.add('active');
            content.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            try {
                const result = await apiCall(`/quotes/${id}`);
                const quote = result.data;
                
                // Format date
                const formatDateLocal = (date) => {
                    if (!date) return '';
                    return new Date(date).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                };
                
                // Format currency
                const formatCurrencyLocal = (amount) => {
                    return `${(amount || 0).toLocaleString('en-IN')}`;
                };
                
                // Group items by event
                const eventGroups = {};
                if (quote.items && quote.items.length > 0) {
                    quote.items.forEach(item => {
                        const eventKey = item.eventName || 'Other';
                        if (!eventGroups[eventKey]) {
                            eventGroups[eventKey] = {
                                eventName: item.eventName,
                                eventDate: item.eventDate,
                                services: []
                            };
                        }
                        eventGroups[eventKey].services.push({
                            name: item.serviceName,
                            price: item.price
                        });
                    });
                }
                
                // Group additional services by event
                if (quote.additionalServices && quote.additionalServices.length > 0) {
                    quote.additionalServices.forEach(addon => {
                        const eventKey = addon.event || addon.eventSlug || 'Other';
                        // Find matching event group or create "Add-ons" group
                        let targetGroup = Object.values(eventGroups).find(g => 
                            g.eventName === eventKey || 
                            g.eventName?.toLowerCase().replace(/\s+/g, '-') === eventKey
                        );
                        if (!targetGroup) {
                            if (!eventGroups['Add-ons']) {
                                eventGroups['Add-ons'] = { eventName: 'Additional Services', services: [] };
                            }
                            targetGroup = eventGroups['Add-ons'];
                        }
                        if (!targetGroup.addons) targetGroup.addons = [];
                        targetGroup.addons.push({
                            name: addon.name,
                            price: addon.price
                        });
                    });
                }
                
                // Build invoice HTML
                let invoiceHTML = `
                    <div class="quote-invoice">
                        <div class="quote-invoice-header">
                            <div class="quote-invoice-logo">
                                <h2>Wedding<span>Clickz</span></h2>
                                <p>Professional Wedding Photography</p>
                            </div>
                            <div class="quote-invoice-badge">
                                ${quote.quoteNumber}
                            </div>
                        </div>
                        
                        <div class="quote-invoice-meta">
                            <div class="quote-invoice-meta-item">
                                <label>Quote Date</label>
                                <span>${formatDateLocal(quote.createdAt)}</span>
                            </div>
                            <div class="quote-invoice-meta-item">
                                <label>Status</label>
                                <span class="status-badge status-${quote.status}">${quote.status.toUpperCase()}</span>
                            </div>
                        </div>
                        
                        <div class="quote-invoice-parties">
                            <div class="quote-invoice-party">
                                <h4>From</h4>
                                <p><strong>WeddingClickz</strong></p>
                                <p>Email: contact@weddingclickz.com</p>
                                <p>Phone: +91 XXX XXX XXXX</p>
                            </div>
                            <div class="quote-invoice-party">
                                <h4>To</h4>
                                <p><strong>${quote.customerName || 'N/A'}</strong></p>
                                <p>Email: ${quote.customerEmail}</p>
                                ${quote.customerPhone ? `<p>Phone: ${quote.customerPhone}</p>` : ''}
                            </div>
                        </div>
                        
                        <table class="quote-invoice-table">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th style="text-align: right;">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                // Add items grouped by event
                Object.values(eventGroups).forEach(group => {
                    // Event header
                    invoiceHTML += `
                        <tr class="event-row">
                            <td colspan="2">
                                <strong>${group.eventName}</strong>
                                ${group.eventDate ? ` - ${formatDateLocal(group.eventDate)}` : ''}
                            </td>
                        </tr>
                    `;
                    
                    // Services
                    if (group.services && group.services.length > 0) {
                        group.services.forEach(service => {
                            invoiceHTML += `
                                <tr class="service-row">
                                    <td>${service.name}</td>
                                    <td>${formatCurrencyLocal(service.price)}</td>
                                </tr>
                            `;
                        });
                    }
                    
                    // Additional services for this event
                    if (group.addons && group.addons.length > 0) {
                        group.addons.forEach(addon => {
                            invoiceHTML += `
                                <tr class="service-row">
                                    <td>${addon.name} (Add-on)</td>
                                    <td>${formatCurrencyLocal(addon.price)}</td>
                                </tr>
                            `;
                        });
                    }
                });
                
                invoiceHTML += `
                            </tbody>
                        </table>
                        
                        <div class="quote-invoice-totals">
                            <div class="quote-invoice-totals-box">
                                <div class="quote-invoice-totals-row total">
                                    <span>Total Amount</span>
                                    <span>${formatCurrencyLocal(quote.total)}</span>
                                </div>
                            </div>
                        </div>
                        
                        ${quote.notes ? `
                            <div style="margin-top: 2rem; padding: 1rem; background: var(--cream); border-radius: 8px;">
                                <h4 style="font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-light); margin-bottom: 0.5rem;">Notes</h4>
                                <p style="color: var(--charcoal); margin: 0;">${quote.notes}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                content.innerHTML = invoiceHTML;
            } catch (error) {
                content.innerHTML = `<div style="text-align: center; padding: 2rem; color: var(--error);">
                    <p>Failed to load quote details</p>
                    <p style="font-size: 0.9rem;">${error.message}</p>
                </div>`;
            }
        }
        
        function closeQuoteDetailsModal() {
            document.getElementById('quoteDetailsModal').classList.remove('active');
        }

        // Users
        async function loadUsers() {
            try {
                const search = document.getElementById('userSearch').value;
                let query = `?page=${customersCurrentPage}&limit=${customersPerPage}`;
                if (search) {
                    query += `&search=${encodeURIComponent(search)}`;
                }
                
                const result = await apiCall(`/users${query}`);
                
                // Update pagination state
                customersTotalCount = result.total || 0;
                customersTotalPages = result.totalPages || 1;
                customersCurrentPage = result.currentPage || 1;
                
                document.getElementById('usersTable').innerHTML = result.data.map(u => `
                    <tr>
                        <td>${u.name || '-'}</td>
                        <td>${u.email}</td>
                        <td>${u.quotations ? u.quotations.length : 0}</td>
                        <td>${formatDate(u.createdAt)}</td>
                        <td class="actions">
                            <button class="action-btn delete" onclick="deleteUser('${u._id}')"></button>
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="5">No customers found</td></tr>';
                
                updateCustomersPagination();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }
        
        function updateCustomersPagination() {
            const container = document.getElementById('customersPaginationContainer');
            const pageInfo = document.getElementById('customersPageInfo');
            const prevBtn = document.getElementById('customersPrevBtn');
            const nextBtn = document.getElementById('customersNextBtn');
            
            if (customersTotalCount === 0) {
                container.style.display = 'none';
                return;
            }
            
            container.style.display = 'flex';
            
            const start = (customersCurrentPage - 1) * customersPerPage + 1;
            const end = Math.min(customersCurrentPage * customersPerPage, customersTotalCount);
            pageInfo.textContent = `Showing ${start}-${end} of ${customersTotalCount} customers`;
            
            prevBtn.disabled = customersCurrentPage === 1;
            nextBtn.disabled = customersCurrentPage === customersTotalPages;
            
            renderCustomersPaginationPages();
        }
        
        function renderCustomersPaginationPages() {
            const pagesContainer = document.getElementById('customersPaginationPages');
            pagesContainer.innerHTML = '';
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, customersCurrentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(customersTotalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.className = 'pagination-page';
                firstBtn.textContent = '1';
                firstBtn.onclick = () => goToCustomersPage(1);
                pagesContainer.appendChild(firstBtn);
                
                if (startPage > 2) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagesContainer.appendChild(dots);
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = 'pagination-page';
                if (i === customersCurrentPage) {
                    pageBtn.classList.add('active');
                }
                pageBtn.textContent = i;
                pageBtn.onclick = () => goToCustomersPage(i);
                pagesContainer.appendChild(pageBtn);
            }
            
            if (endPage < customersTotalPages) {
                if (endPage < customersTotalPages - 1) {
                    const dots = document.createElement('span');
                    dots.className = 'pagination-dots';
                    dots.textContent = '...';
                    pagesContainer.appendChild(dots);
                }
                
                const lastBtn = document.createElement('button');
                lastBtn.className = 'pagination-page';
                lastBtn.textContent = customersTotalPages;
                lastBtn.onclick = () => goToCustomersPage(customersTotalPages);
                pagesContainer.appendChild(lastBtn);
            }
        }
        
        function changeCustomersPage(direction) {
            if (direction === 'prev' && customersCurrentPage > 1) {
                customersCurrentPage--;
                loadUsers();
            } else if (direction === 'next' && customersCurrentPage < customersTotalPages) {
                customersCurrentPage++;
                loadUsers();
            }
        }
        
        function goToCustomersPage(page) {
            if (page >= 1 && page <= customersTotalPages && page !== customersCurrentPage) {
                customersCurrentPage = page;
                loadUsers();
            }
        }
        
        function changeCustomersPerPage() {
            customersPerPage = parseInt(document.getElementById('customersPerPage').value);
            customersCurrentPage = 1;
            loadUsers();
        }

        document.getElementById('userSearch').addEventListener('input', debounce(() => {
            customersCurrentPage = 1; // Reset to first page on search
            loadUsers();
        }, 300));

        async function deleteUser(id) {
            if (!confirm('Are you sure you want to delete this user?')) return;
            try {
                await apiCall(`/users/${id}`, 'DELETE');
                showToast('User deleted successfully');
                loadUsers();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        // Admins
        async function loadAdmins() {
            try {
                const result = await apiCall('/admins');
                document.getElementById('adminsTable').innerHTML = result.data.map(a => `
                    <tr>
                        <td>${a.name}</td>
                        <td>${a.email}</td>
                        <td>${a.role}</td>
                        <td><span class="status-badge status-${a.isActive ? 'active' : 'inactive'}">${a.isActive ? 'Active' : 'Inactive'}</span></td>
                        <td>${formatDate(a.lastLogin)}</td>
                        <td class="actions">
                            <button class="action-btn edit" onclick="editAdmin('${a._id}')"></button>
                            ${a._id !== currentAdmin.id ? `<button class="action-btn delete" onclick="deleteAdmin('${a._id}')"></button>` : ''}
                        </td>
                    </tr>
                `).join('') || '<tr><td colspan="6">No admins found</td></tr>';
            } catch (error) {
                if (error.message.includes('superadmin')) {
                    document.getElementById('adminsTable').innerHTML = '<tr><td colspan="6" style="text-align:center; color: var(--warning);">Only superadmins can view admin list</td></tr>';
                } else {
                    showToast(error.message, 'error');
                }
            }
        }

        async function editAdmin(id) {
            try {
                const result = await apiCall('/admins');
                const admin = result.data.find(a => a._id === id);
                if (!admin) return showToast('Admin not found', 'error');
                
                document.getElementById('adminModalTitle').textContent = 'Edit Admin';
                document.getElementById('adminId').value = admin._id;
                document.getElementById('adminNameInput').value = admin.name;
                document.getElementById('adminEmail').value = admin.email;
                document.getElementById('adminEmail').disabled = true;
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').placeholder = 'Leave blank to keep current';
                document.getElementById('adminRole').value = admin.role;
                document.getElementById('adminIsActive').checked = admin.isActive;
                
                openModal('admin');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function deleteAdmin(id) {
            if (!confirm('Are you sure you want to delete this admin?')) return;
            try {
                await apiCall(`/admins/${id}`, 'DELETE');
                showToast('Admin deleted successfully');
                loadAdmins();
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('adminForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = document.getElementById('adminId').value;
            
            const data = {
                name: document.getElementById('adminNameInput').value,
                role: document.getElementById('adminRole').value,
                isActive: document.getElementById('adminIsActive').checked
            };
            
            if (!id) {
                data.email = document.getElementById('adminEmail').value;
                data.password = document.getElementById('adminPassword').value;
                if (!data.password) return showToast('Password is required', 'error');
            }
            
            try {
                if (id) {
                    await apiCall(`/admins/${id}`, 'PUT', data);
                    showToast('Admin updated successfully');
                } else {
                    await apiCall('/admins', 'POST', data);
                    showToast('Admin created successfully');
                }
                closeModal('admin');
                loadAdmins();
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Modal Functions
        function openModal(type) {
            document.getElementById(`${type}Modal`).classList.add('active');
            if (type === 'event') {
                document.getElementById('eventModalTitle').textContent = document.getElementById('eventId').value ? 'Edit Event' : 'Add Event';
            } else if (type === 'service') {
                document.getElementById('serviceModalTitle').textContent = document.getElementById('serviceId').value ? 'Edit Service' : 'Add Service';
                if (!document.getElementById('serviceId').value) {
                    document.getElementById('pricingList').innerHTML = '';
                }
            } else if (type === 'additionalService') {
                document.getElementById('additionalServiceModalTitle').textContent = document.getElementById('additionalServiceId').value ? 'Edit Additional Service' : 'Add Additional Service';
            } else if (type === 'admin') {
                if (!document.getElementById('adminId').value) {
                    document.getElementById('adminModalTitle').textContent = 'Add Admin';
                    document.getElementById('adminEmail').disabled = false;
                    document.getElementById('adminPassword').placeholder = '';
                }
            }
        }

        function closeModal(type) {
            document.getElementById(`${type}Modal`).classList.remove('active');
            if (type === 'event') {
                document.getElementById('eventForm').reset();
                document.getElementById('eventId').value = '';
            } else if (type === 'service') {
                document.getElementById('serviceForm').reset();
                document.getElementById('serviceId').value = '';
                document.getElementById('pricingList').innerHTML = '';
            } else if (type === 'additionalService') {
                document.getElementById('additionalServiceForm').reset();
                document.getElementById('additionalServiceId').value = '';
            } else if (type === 'admin') {
                document.getElementById('adminForm').reset();
                document.getElementById('adminId').value = '';
                document.getElementById('adminEmail').disabled = false;
            }
        }

        // Settings
        async function loadSettings() {
            try {
                const result = await apiCall('/settings');
                const emails = result.data.notificationEmails || [];
                
                document.getElementById('notificationEmail1').value = emails[0] || '';
                document.getElementById('notificationEmail2').value = emails[1] || '';
                document.getElementById('notificationEmail3').value = emails[2] || '';
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        document.getElementById('settingsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const notificationEmails = [
                document.getElementById('notificationEmail1').value.trim(),
                document.getElementById('notificationEmail2').value.trim(),
                document.getElementById('notificationEmail3').value.trim()
            ].filter(email => email); // Remove empty entries
            
            try {
                await apiCall('/settings', 'PUT', { notificationEmails });
                showToast('Settings saved successfully');
            } catch (error) {
                showToast(error.message, 'error');
            }
        });

        // Utility: Debounce
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Auto-generate slug
        document.getElementById('eventName').addEventListener('input', (e) => {
            if (!document.getElementById('eventId').value) {
                document.getElementById('eventSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        document.getElementById('serviceName').addEventListener('input', (e) => {
            if (!document.getElementById('serviceId').value) {
                document.getElementById('serviceSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        document.getElementById('additionalServiceName').addEventListener('input', (e) => {
            if (!document.getElementById('additionalServiceId').value) {
                document.getElementById('additionalServiceSlug').value = e.target.value
                    .toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }
        });

        // Initialize
        if (authToken) {
            // Verify token is still valid
            apiCall('/profile')
                .then(result => {
                    currentAdmin = result.data;
                    localStorage.setItem('adminData', JSON.stringify(currentAdmin));
                    showAdminPanel();
                })
                .catch(() => {
                    logout();
                });
        } else {
            // If no token but have admin data, clear it
            localStorage.removeItem('adminData');
        }
    </script>
</body>
</html>
